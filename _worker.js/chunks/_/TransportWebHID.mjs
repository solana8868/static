import{B as e,k as r}from"../runtime.mjs";import{l as t,c as n,a as o,T as s}from"../build/app.mjs";var i={},a={};!function(r){r.__esModule=!0;var n=t;var o={data:e.alloc(0),dataLength:0,sequence:0};r.default=function(r,t){return{makeBlocks:function(n){var o,s,i=e.concat([(o=n.length,s=e.alloc(2),s.writeUInt16BE(o,0),s),n]),a=t-5,c=Math.ceil(i.length/a);i=e.concat([i,e.alloc(c*a-i.length+1).fill(0)]);for(var l=[],u=0;u<c;u++){var p=e.alloc(5);p.writeUInt16BE(r,0),p.writeUInt8(5,2),p.writeUInt16BE(u,3);var h=i.slice(u*a,(u+1)*a);l.push(e.concat([p,h]))}return l},reduceResponse:function(t,s){var i=t||o,a=i.data,c=i.dataLength,l=i.sequence;if(s.readUInt16BE(0)!==r)throw new n.TransportError("Invalid channel","InvalidChannel");if(5!==s.readUInt8(2))throw new n.TransportError("Invalid tag","InvalidTag");if(s.readUInt16BE(3)!==l)throw new n.TransportError("Invalid sequence","InvalidSequence");t||(c=s.readUInt16BE(5)),l++;var u=s.slice(t?5:7);return(a=e.concat([a,u])).length>c&&(a=a.slice(0,c)),{data:a,dataLength:c,sequence:l}},getReducedResult:function(e){if(e&&e.dataLength===e.data.length)return e.data}}}}(a);var c={},l={exports:{}};var u={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};var p="object"==typeof r&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,r){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:o}=u,s=p,i=(r=e.exports={}).re=[],a=r.safeRe=[],c=r.src=[],l=r.t={};let h=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[d,n]],createToken=(e,r,t)=>{const n=(e=>{for(const[r,t]of f)e=e.split(`${r}*`).join(`${r}{0,${t}}`).split(`${r}+`).join(`${r}{1,${t}}`);return e})(r),o=h++;s(e,o,r),l[e]=o,c[o]=r,i[o]=new RegExp(r,t?"g":void 0),a[o]=new RegExp(n,t?"g":void 0)};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*"),createToken("NUMERICIDENTIFIERLOOSE","\\d+"),createToken("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),createToken("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),createToken("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),createToken("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),createToken("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),createToken("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),createToken("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),createToken("BUILDIDENTIFIER",`${d}+`),createToken("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),createToken("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),createToken("FULL",`^${c[l.FULLPLAIN]}$`),createToken("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),createToken("LOOSE",`^${c[l.LOOSEPLAIN]}$`),createToken("GTLT","((?:<|>)?=?)"),createToken("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),createToken("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),createToken("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),createToken("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),createToken("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),createToken("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),createToken("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),createToken("COERCE",`${c[l.COERCEPLAIN]}(?:$|[^\\d])`),createToken("COERCEFULL",c[l.COERCEPLAIN]+`(?:${c[l.PRERELEASE]})?`+`(?:${c[l.BUILD]})?(?:$|[^\\d])`),createToken("COERCERTL",c[l.COERCE],!0),createToken("COERCERTLFULL",c[l.COERCEFULL],!0),createToken("LONETILDE","(?:~>?)"),createToken("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",createToken("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),createToken("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),createToken("LONECARET","(?:\\^)"),createToken("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",createToken("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),createToken("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),createToken("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),createToken("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),createToken("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",createToken("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),createToken("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),createToken("STAR","(<|>)?=?\\s*\\*"),createToken("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),createToken("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(l,l.exports);var h=l.exports;const d=Object.freeze({loose:!0}),f=Object.freeze({});var parseOptions_1=e=>e?"object"!=typeof e?d:e:f;const E=/^[0-9]+$/,compareIdentifiers$1=(e,r)=>{const t=E.test(e),n=E.test(r);return t&&n&&(e=+e,r=+r),e===r?0:t&&!n?-1:n&&!t?1:e<r?-1:1};var v={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers:(e,r)=>compareIdentifiers$1(r,e)};const m=p,{MAX_LENGTH:I,MAX_SAFE_INTEGER:g}=u,{safeRe:R,t:$}=h,L=parseOptions_1,{compareIdentifiers:S}=v;var N=class SemVer{constructor(e,r){if(r=L(r),e instanceof SemVer){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>I)throw new TypeError(`version is longer than ${I} characters`);m("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const t=e.trim().match(r.loose?R[$.LOOSE]:R[$.FULL]);if(!t)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>g||this.major<0)throw new TypeError("Invalid major version");if(this.minor>g||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>g||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const r=+e;if(r>=0&&r<g)return r}return e})):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(m("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),S(this.major,e.major)||S(this.minor,e.minor)||S(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const t=this.prerelease[r],n=e.prerelease[r];if(m("prerelease compare",r,t,n),void 0===t&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===t)return-1;if(t!==n)return S(t,n)}while(++r)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let r=0;do{const t=this.build[r],n=e.build[r];if(m("build compare",r,t,n),void 0===t&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===t)return-1;if(t!==n)return S(t,n)}while(++r)}inc(e,r,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,t),this.inc("pre",r,t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",r,t),this.inc("pre",r,t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(t)?1:0;if(!r&&!1===t)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(r===this.prerelease.join(".")&&!1===t)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(r){let n=[r,e];!1===t&&(n=[r]),0===S(this.prerelease[0],r)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const T=N;var parse_1=(e,r,t=!1)=>{if(e instanceof T)return e;try{return new T(e,r)}catch(e){if(!t)return null;throw e}};const O=parse_1;var valid_1=(e,r)=>{const t=O(e,r);return t?t.version:null};const w=parse_1;var clean_1=(e,r)=>{const t=w(e.trim().replace(/^[=v]+/,""),r);return t?t.version:null};const y=N;var inc_1=(e,r,t,n,o)=>{"string"==typeof t&&(o=n,n=t,t=void 0);try{return new y(e instanceof y?e.version:e,t).inc(r,n,o).version}catch(e){return null}};const A=parse_1;var diff_1=(e,r)=>{const t=A(e,null,!0),n=A(r,null,!0),o=t.compare(n);if(0===o)return null;const s=o>0,i=s?t:n,a=s?n:t,c=!!i.prerelease.length;if(!!a.prerelease.length&&!c)return a.patch||a.minor?i.patch?"patch":i.minor?"minor":"major":"major";const l=c?"pre":"";return t.major!==n.major?l+"major":t.minor!==n.minor?l+"minor":t.patch!==n.patch?l+"patch":"prerelease"};const b=N;var major_1=(e,r)=>new b(e,r).major;const P=N;var minor_1=(e,r)=>new P(e,r).minor;const D=N;var patch_1=(e,r)=>new D(e,r).patch;const C=parse_1;var prerelease_1=(e,r)=>{const t=C(e,r);return t&&t.prerelease.length?t.prerelease:null};const _=N;var compare_1=(e,r,t)=>new _(e,t).compare(new _(r,t));const U=compare_1;var rcompare_1=(e,r,t)=>U(r,e,t);const M=compare_1;var compareLoose_1=(e,r)=>M(e,r,!0);const F=N;var compareBuild_1=(e,r,t)=>{const n=new F(e,t),o=new F(r,t);return n.compare(o)||n.compareBuild(o)};const j=compareBuild_1;var sort_1=(e,r)=>e.sort(((e,t)=>j(e,t,r)));const G=compareBuild_1;var rsort_1=(e,r)=>e.sort(((e,t)=>G(t,e,r)));const x=compare_1;var gt_1=(e,r,t)=>x(e,r,t)>0;const B=compare_1;var lt_1=(e,r,t)=>B(e,r,t)<0;const X=compare_1;var eq_1=(e,r,t)=>0===X(e,r,t);const k=compare_1;var neq_1=(e,r,t)=>0!==k(e,r,t);const H=compare_1;var gte_1=(e,r,t)=>H(e,r,t)>=0;const V=compare_1;var lte_1=(e,r,t)=>V(e,r,t)<=0;const q=eq_1,W=neq_1,z=gt_1,Y=gte_1,K=lt_1,Z=lte_1;var cmp_1=(e,r,t,n)=>{switch(r){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof t&&(t=t.version),e===t;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof t&&(t=t.version),e!==t;case"":case"=":case"==":return q(e,t,n);case"!=":return W(e,t,n);case">":return z(e,t,n);case">=":return Y(e,t,n);case"<":return K(e,t,n);case"<=":return Z(e,t,n);default:throw new TypeError(`Invalid operator: ${r}`)}};const J=N,Q=parse_1,{safeRe:ee,t:re}=h;var coerce_1=(e,r)=>{if(e instanceof J)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let t=null;if((r=r||{}).rtl){const n=r.includePrerelease?ee[re.COERCERTLFULL]:ee[re.COERCERTL];let o;for(;(o=n.exec(e))&&(!t||t.index+t[0].length!==e.length);)t&&o.index+o[0].length===t.index+t[0].length||(t=o),n.lastIndex=o.index+o[1].length+o[2].length;n.lastIndex=-1}else t=e.match(r.includePrerelease?ee[re.COERCEFULL]:ee[re.COERCE]);if(null===t)return null;const n=t[2],o=t[3]||"0",s=t[4]||"0",i=r.includePrerelease&&t[5]?`-${t[5]}`:"",a=r.includePrerelease&&t[6]?`+${t[6]}`:"";return Q(`${n}.${o}.${s}${i}${a}`,r)};var te,ne,oe,se,ie=class{constructor(){this.max=1e3,this.map=new Map}get(e){const r=this.map.get(e);return void 0===r?void 0:(this.map.delete(e),this.map.set(e,r),r)}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&void 0!==r){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,r)}return this}};function requireRange(){if(ne)return te;ne=1;const e=/\s+/g;class Range{constructor(r,o){if(o=t(o),r instanceof Range)return r.loose===!!o.loose&&r.includePrerelease===!!o.includePrerelease?r:new Range(r.raw,o);if(r instanceof n)return this.raw=r.value,this.set=[[r]],this.formatted=void 0,this;if(this.options=o,this.loose=!!o.loose,this.includePrerelease=!!o.includePrerelease,this.raw=r.trim().replace(e," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!isNullSet(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&isAny(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const r=this.set[e];for(let e=0;e<r.length;e++)e>0&&(this.formatted+=" "),this.formatted+=r[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&f)|(this.options.loose&&E))+":"+e,s=r.get(t);if(s)return s;const u=this.options.loose,p=u?i[a.HYPHENRANGELOOSE]:i[a.HYPHENRANGE];e=e.replace(p,hyphenReplace(this.options.includePrerelease)),o("hyphen replace",e),e=e.replace(i[a.COMPARATORTRIM],c),o("comparator trim",e),e=e.replace(i[a.TILDETRIM],l),o("tilde trim",e),e=e.replace(i[a.CARETTRIM],d),o("caret trim",e);let h=e.split(" ").map((e=>parseComparator(e,this.options))).join(" ").split(/\s+/).map((e=>replaceGTE0(e,this.options)));u&&(h=h.filter((e=>(o("loose invalid filter",e,this.options),!!e.match(i[a.COMPARATORLOOSE]))))),o("range list",h);const v=new Map,m=h.map((e=>new n(e,this.options)));for(const e of m){if(isNullSet(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const I=[...v.values()];return r.set(t,I),I}intersects(e,r){if(!(e instanceof Range))throw new TypeError("a Range is required");return this.set.some((t=>isSatisfiable(t,r)&&e.set.some((e=>isSatisfiable(e,r)&&t.every((t=>e.every((e=>t.intersects(e,r)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new s(e,this.options)}catch(e){return!1}for(let r=0;r<this.set.length;r++)if(testSet(this.set[r],e,this.options))return!0;return!1}}te=Range;const r=new ie,t=parseOptions_1,n=requireComparator(),o=p,s=N,{safeRe:i,t:a,comparatorTrimReplace:c,tildeTrimReplace:l,caretTrimReplace:d}=h,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:E}=u,isNullSet=e=>"<0.0.0-0"===e.value,isAny=e=>""===e.value,isSatisfiable=(e,r)=>{let t=!0;const n=e.slice();let o=n.pop();for(;t&&n.length;)t=n.every((e=>o.intersects(e,r))),o=n.pop();return t},parseComparator=(e,r)=>(o("comp",e,r),e=replaceCarets(e,r),o("caret",e),e=replaceTildes(e,r),o("tildes",e),e=replaceXRanges(e,r),o("xrange",e),e=replaceStars(e,r),o("stars",e),e),isX=e=>!e||"x"===e.toLowerCase()||"*"===e,replaceTildes=(e,r)=>e.trim().split(/\s+/).map((e=>replaceTilde(e,r))).join(" "),replaceTilde=(e,r)=>{const t=r.loose?i[a.TILDELOOSE]:i[a.TILDE];return e.replace(t,((r,t,n,s,i)=>{let a;return o("tilde",e,r,t,n,s,i),isX(t)?a="":isX(n)?a=`>=${t}.0.0 <${+t+1}.0.0-0`:isX(s)?a=`>=${t}.${n}.0 <${t}.${+n+1}.0-0`:i?(o("replaceTilde pr",i),a=`>=${t}.${n}.${s}-${i} <${t}.${+n+1}.0-0`):a=`>=${t}.${n}.${s} <${t}.${+n+1}.0-0`,o("tilde return",a),a}))},replaceCarets=(e,r)=>e.trim().split(/\s+/).map((e=>replaceCaret(e,r))).join(" "),replaceCaret=(e,r)=>{o("caret",e,r);const t=r.loose?i[a.CARETLOOSE]:i[a.CARET],n=r.includePrerelease?"-0":"";return e.replace(t,((r,t,s,i,a)=>{let c;return o("caret",e,r,t,s,i,a),isX(t)?c="":isX(s)?c=`>=${t}.0.0${n} <${+t+1}.0.0-0`:isX(i)?c="0"===t?`>=${t}.${s}.0${n} <${t}.${+s+1}.0-0`:`>=${t}.${s}.0${n} <${+t+1}.0.0-0`:a?(o("replaceCaret pr",a),c="0"===t?"0"===s?`>=${t}.${s}.${i}-${a} <${t}.${s}.${+i+1}-0`:`>=${t}.${s}.${i}-${a} <${t}.${+s+1}.0-0`:`>=${t}.${s}.${i}-${a} <${+t+1}.0.0-0`):(o("no pr"),c="0"===t?"0"===s?`>=${t}.${s}.${i}${n} <${t}.${s}.${+i+1}-0`:`>=${t}.${s}.${i}${n} <${t}.${+s+1}.0-0`:`>=${t}.${s}.${i} <${+t+1}.0.0-0`),o("caret return",c),c}))},replaceXRanges=(e,r)=>(o("replaceXRanges",e,r),e.split(/\s+/).map((e=>replaceXRange(e,r))).join(" ")),replaceXRange=(e,r)=>{e=e.trim();const t=r.loose?i[a.XRANGELOOSE]:i[a.XRANGE];return e.replace(t,((t,n,s,i,a,c)=>{o("xRange",e,t,n,s,i,a,c);const l=isX(s),u=l||isX(i),p=u||isX(a),h=p;return"="===n&&h&&(n=""),c=r.includePrerelease?"-0":"",l?t=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(u&&(i=0),a=0,">"===n?(n=">=",u?(s=+s+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",u?s=+s+1:i=+i+1),"<"===n&&(c="-0"),t=`${n+s}.${i}.${a}${c}`):u?t=`>=${s}.0.0${c} <${+s+1}.0.0-0`:p&&(t=`>=${s}.${i}.0${c} <${s}.${+i+1}.0-0`),o("xRange return",t),t}))},replaceStars=(e,r)=>(o("replaceStars",e,r),e.trim().replace(i[a.STAR],"")),replaceGTE0=(e,r)=>(o("replaceGTE0",e,r),e.trim().replace(i[r.includePrerelease?a.GTE0PRE:a.GTE0],"")),hyphenReplace=e=>(r,t,n,o,s,i,a,c,l,u,p,h)=>`${t=isX(n)?"":isX(o)?`>=${n}.0.0${e?"-0":""}`:isX(s)?`>=${n}.${o}.0${e?"-0":""}`:i?`>=${t}`:`>=${t}${e?"-0":""}`} ${c=isX(l)?"":isX(u)?`<${+l+1}.0.0-0`:isX(p)?`<${l}.${+u+1}.0-0`:h?`<=${l}.${u}.${p}-${h}`:e?`<${l}.${u}.${+p+1}-0`:`<=${c}`}`.trim(),testSet=(e,r,t)=>{for(let t=0;t<e.length;t++)if(!e[t].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(let t=0;t<e.length;t++)if(o(e[t].semver),e[t].semver!==n.ANY&&e[t].semver.prerelease.length>0){const n=e[t].semver;if(n.major===r.major&&n.minor===r.minor&&n.patch===r.patch)return!0}return!1}return!0};return te}function requireComparator(){if(se)return oe;se=1;const e=Symbol("SemVer ANY");class Comparator{static get ANY(){return e}constructor(t,n){if(n=r(n),t instanceof Comparator){if(t.loose===!!n.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),s("comparator",t,n),this.options=n,this.loose=!!n.loose,this.parse(t),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(r){const o=this.options.loose?t[n.COMPARATORLOOSE]:t[n.COMPARATOR],s=r.match(o);if(!s)throw new TypeError(`Invalid comparator: ${r}`);this.operator=void 0!==s[1]?s[1]:"","="===this.operator&&(this.operator=""),s[2]?this.semver=new i(s[2],this.options.loose):this.semver=e}toString(){return this.value}test(r){if(s("Comparator.test",r,this.options.loose),this.semver===e||r===e)return!0;if("string"==typeof r)try{r=new i(r,this.options)}catch(e){return!1}return o(r,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Comparator))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new a(e.value,t).test(this.value):""===e.operator?""===e.value||new a(this.value,t).test(e.semver):(!(t=r(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(o(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(o(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}oe=Comparator;const r=parseOptions_1,{safeRe:t,t:n}=h,o=cmp_1,s=p,i=N,a=requireRange();return oe}const ae=requireRange();var satisfies_1=(e,r,t)=>{try{r=new ae(r,t)}catch(e){return!1}return r.test(e)};const ce=requireRange();var toComparators_1=(e,r)=>new ce(e,r).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));const le=N,ue=requireRange();var maxSatisfying_1=(e,r,t)=>{let n=null,o=null,s=null;try{s=new ue(r,t)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(n&&-1!==o.compare(e)||(n=e,o=new le(n,t)))})),n};const pe=N,he=requireRange();var minSatisfying_1=(e,r,t)=>{let n=null,o=null,s=null;try{s=new he(r,t)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(n&&1!==o.compare(e)||(n=e,o=new pe(n,t)))})),n};const de=N,fe=requireRange(),Ee=gt_1;var minVersion_1=(e,r)=>{e=new fe(e,r);let t=new de("0.0.0");if(e.test(t))return t;if(t=new de("0.0.0-0"),e.test(t))return t;t=null;for(let r=0;r<e.set.length;++r){const n=e.set[r];let o=null;n.forEach((e=>{const r=new de(e.semver.version);switch(e.operator){case">":0===r.prerelease.length?r.patch++:r.prerelease.push(0),r.raw=r.format();case"":case">=":o&&!Ee(r,o)||(o=r);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!o||t&&!Ee(t,o)||(t=o)}return t&&e.test(t)?t:null};const ve=requireRange();var valid$1=(e,r)=>{try{return new ve(e,r).range||"*"}catch(e){return null}};const me=N,Ie=requireComparator(),{ANY:ge}=Ie,Re=requireRange(),$e=satisfies_1,Le=gt_1,Se=lt_1,Ne=lte_1,Te=gte_1;var outside_1=(e,r,t,n)=>{let o,s,i,a,c;switch(e=new me(e,n),r=new Re(r,n),t){case">":o=Le,s=Ne,i=Se,a=">",c=">=";break;case"<":o=Se,s=Te,i=Le,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($e(e,r,n))return!1;for(let t=0;t<r.set.length;++t){const l=r.set[t];let u=null,p=null;if(l.forEach((e=>{e.semver===ge&&(e=new Ie(">=0.0.0")),u=u||e,p=p||e,o(e.semver,u.semver,n)?u=e:i(e.semver,p.semver,n)&&(p=e)})),u.operator===a||u.operator===c)return!1;if((!p.operator||p.operator===a)&&s(e,p.semver))return!1;if(p.operator===c&&i(e,p.semver))return!1}return!0};const Oe=outside_1;var gtr_1=(e,r,t)=>Oe(e,r,">",t);const we=outside_1;var ltr_1=(e,r,t)=>we(e,r,"<",t);const ye=requireRange();var intersects_1=(e,r,t)=>(e=new ye(e,t),r=new ye(r,t),e.intersects(r,t));const Ae=satisfies_1,be=compare_1;const Pe=requireRange(),De=requireComparator(),{ANY:Ce}=De,_e=satisfies_1,Ue=compare_1,Me=[new De(">=0.0.0-0")],Fe=[new De(">=0.0.0")],simpleSubset=(e,r,t)=>{if(e===r)return!0;if(1===e.length&&e[0].semver===Ce){if(1===r.length&&r[0].semver===Ce)return!0;e=t.includePrerelease?Me:Fe}if(1===r.length&&r[0].semver===Ce){if(t.includePrerelease)return!0;r=Fe}const n=new Set;let o,s,i,a,c,l,u;for(const r of e)">"===r.operator||">="===r.operator?o=higherGT(o,r,t):"<"===r.operator||"<="===r.operator?s=lowerLT(s,r,t):n.add(r.semver);if(n.size>1)return null;if(o&&s){if(i=Ue(o.semver,s.semver,t),i>0)return null;if(0===i&&(">="!==o.operator||"<="!==s.operator))return null}for(const e of n){if(o&&!_e(e,String(o),t))return null;if(s&&!_e(e,String(s),t))return null;for(const n of r)if(!_e(e,String(n),t))return!1;return!0}let p=!(!s||t.includePrerelease||!s.semver.prerelease.length)&&s.semver,h=!(!o||t.includePrerelease||!o.semver.prerelease.length)&&o.semver;p&&1===p.prerelease.length&&"<"===s.operator&&0===p.prerelease[0]&&(p=!1);for(const e of r){if(u=u||">"===e.operator||">="===e.operator,l=l||"<"===e.operator||"<="===e.operator,o)if(h&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===h.major&&e.semver.minor===h.minor&&e.semver.patch===h.patch&&(h=!1),">"===e.operator||">="===e.operator){if(a=higherGT(o,e,t),a===e&&a!==o)return!1}else if(">="===o.operator&&!_e(o.semver,String(e),t))return!1;if(s)if(p&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===p.major&&e.semver.minor===p.minor&&e.semver.patch===p.patch&&(p=!1),"<"===e.operator||"<="===e.operator){if(c=lowerLT(s,e,t),c===e&&c!==s)return!1}else if("<="===s.operator&&!_e(s.semver,String(e),t))return!1;if(!e.operator&&(s||o)&&0!==i)return!1}return!(o&&l&&!s&&0!==i)&&(!(s&&u&&!o&&0!==i)&&(!h&&!p))},higherGT=(e,r,t)=>{if(!e)return r;const n=Ue(e.semver,r.semver,t);return n>0?e:n<0||">"===r.operator&&">="===e.operator?r:e},lowerLT=(e,r,t)=>{if(!e)return r;const n=Ue(e.semver,r.semver,t);return n<0?e:n>0||"<"===r.operator&&"<="===e.operator?r:e};var subset_1=(e,r,t={})=>{if(e===r)return!0;e=new Pe(e,t),r=new Pe(r,t);let n=!1;e:for(const o of e.set){for(const e of r.set){const r=simpleSubset(o,e,t);if(n=n||null!==r,r)continue e}if(n)return!1}return!0};const je=h,Ge=u,xe=N,Be=v,simplifyRange=(e,r,t)=>{const n=[];let o=null,s=null;const i=e.sort(((e,r)=>be(e,r,t)));for(const e of i){Ae(e,r,t)?(s=e,o||(o=e)):(s&&n.push([o,s]),s=null,o=null)}o&&n.push([o,null]);const a=[];for(const[e,r]of n)e===r?a.push(e):r||e!==i[0]?r?e===i[0]?a.push(`<=${r}`):a.push(`${e} - ${r}`):a.push(`>=${e}`):a.push("*");const c=a.join(" || "),l="string"==typeof r.raw?r.raw:String(r);return c.length<l.length?c:r};var Xe={parse:parse_1,valid:valid_1,clean:clean_1,inc:inc_1,diff:diff_1,major:major_1,minor:minor_1,patch:patch_1,prerelease:prerelease_1,compare:compare_1,rcompare:rcompare_1,compareLoose:compareLoose_1,compareBuild:compareBuild_1,sort:sort_1,rsort:rsort_1,gt:gt_1,lt:lt_1,eq:eq_1,neq:neq_1,gte:gte_1,lte:lte_1,cmp:cmp_1,coerce:coerce_1,Comparator:requireComparator(),Range:requireRange(),satisfies:satisfies_1,toComparators:toComparators_1,maxSatisfying:maxSatisfying_1,minSatisfying:minSatisfying_1,minVersion:minVersion_1,validRange:valid$1,outside:outside_1,gtr:gtr_1,ltr:ltr_1,intersects:intersects_1,simplifyRange:simplifyRange,subset:subset_1,SemVer:xe,re:je.re,src:je.src,tokens:je.t,SEMVER_SPEC_VERSION:Ge.SEMVER_SPEC_VERSION,RELEASE_TYPES:Ge.RELEASE_TYPES,compareIdentifiers:Be.compareIdentifiers,rcompareIdentifiers:Be.rcompareIdentifiers};!function(e){var r,t=n&&n.__assign||function(){return t=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},t.apply(this,arguments)},o=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};e.__esModule=!0,e.getInfosForServiceUuid=e.getBluetoothServiceUuids=e.identifyProductName=e.identifyUSBProductId=e.identifyTargetId=e.getDeviceModel=e.ledgerUSBVendorId=e.DeviceModelId=e.IIWebUSB=e.IICCID=e.IIU2F=e.IIKeyboardHID=e.IIGenericHID=void 0;var s,i=o(Xe);e.IIGenericHID=1,e.IIKeyboardHID=2,e.IIU2F=4,e.IICCID=8,e.IIWebUSB=16,function(e){e.blue="blue",e.nanoS="nanoS",e.nanoSP="nanoSP",e.nanoX="nanoX",e.nanoFTS="nanoFTS"}(s=e.DeviceModelId||(e.DeviceModelId={}));var a=((r={})[s.blue]={id:s.blue,productName:"Ledger Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:491520,masks:[822083584,822149120],getBlockSize:function(e){return 4096}},r[s.nanoS]={id:s.nanoS,productName:"Ledger Nano S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:327680,masks:[823132160],getBlockSize:function(e){var r;return i.default.lt(null!==(r=i.default.coerce(e))&&void 0!==r?r:"","2.0.0")?4096:2048}},r[s.nanoSP]={id:s.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1572864,masks:[856686592],getBlockSize:function(e){return 32}},r[s.nanoX]={id:s.nanoX,productName:"Ledger Nano X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2097152,masks:[855638016],getBlockSize:function(e){return 4096},bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},r[s.nanoFTS]={id:s.nanoFTS,productName:"Ledger Nano FTS",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:2097152,masks:[857735168],getBlockSize:function(e){return 4096},bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},r),c={Blue:s.blue,"Nano S":s.nanoS,"Nano S Plus":s.nanoSP,"Nano X":s.nanoX,"Nano FTS":s.nanoFTS},l=Object.values(a);e.ledgerUSBVendorId=11415;e.getDeviceModel=function(e){var r=a[e];if(!r)throw new Error("device '"+e+"' does not exist");return r};e.identifyTargetId=function(e){var r=l.find((function(r){return r.masks.find((function(r){return(4294901760&e)===r}))}));return r};e.identifyUSBProductId=function(e){var r=l.find((function(r){return r.legacyUsbProductId===e}));if(r)return r;var t=e>>8;return l.find((function(e){return e.productIdMM===t}))};e.identifyProductName=function(e){return l.find((function(r){return r.id===c[e]}))};var u=[],p={};for(var h in a){var d=a[h],f=d.bluetoothSpec;if(f)for(var E=0;E<f.length;E++){var v=f[E];u.push(v.serviceUuid),p[v.serviceUuid]=p[v.serviceUuid.replace(/-/g,"")]=t({deviceModel:d},v)}}e.getBluetoothServiceUuids=function(){return u};e.getInfosForServiceUuid=function(e){return p[e.toLowerCase()]}}(c);var ke={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.listen=e.LocalTracer=e.trace=e.log=void 0;let r=0;const t=[];e.log=(e,t,n)=>{const o={type:e,id:String(++r),date:new Date};t&&(o.message=t),n&&(o.data=n),dispatch(o)};e.trace=({type:e,message:t,data:n,context:o})=>{const s={type:e,id:String(++r),date:new Date};t&&(s.message=t),n&&(s.data=n),o&&(s.context=o),dispatch(s)};class LocalTracer{constructor(e,r){this.type=e,this.context=r}trace(r,t){(0,e.trace)({type:this.type,message:r,data:t,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context=Object.assign(Object.assign({},this.context),e)}getType(){return this.type}setType(e){this.type=e}withType(e){return new LocalTracer(e,this.context)}withContext(e){return new LocalTracer(this.type,e)}withUpdatedContext(e){return new LocalTracer(this.type,Object.assign(Object.assign({},this.context),e))}}e.LocalTracer=LocalTracer;function dispatch(e){for(let r=0;r<t.length;r++)try{t[r](e)}catch(e){console.error(e)}}e.listen=e=>(t.push(e),()=>{const r=t.indexOf(e);-1!==r&&(t[r]=t[t.length-1],t.pop())})}(ke),function(r){var o,i=n&&n.__extends||(o=function(e,r){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])},o(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=e}o(e,r),e.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}),l=n&&n.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(o,s){function fulfilled(e){try{step(n.next(e))}catch(e){s(e)}}function rejected(e){try{step(n.throw(e))}catch(e){s(e)}}function step(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(fulfilled,rejected)}step((n=n.apply(e,r||[])).next())}))},u=n&&n.__generator||function(e,r){var t,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function verb(s){return function(a){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=r.call(e,i)}catch(e){s=[6,e],n=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},p=n&&n.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,s=t.call(e),i=[];try{for(;(void 0===r||r-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=s.return)&&t.call(s)}finally{if(o)throw o.error}}return i},h=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};r.__esModule=!0;var d=h(s),f=h(a),E=c,v=ke,m=t,I=[{vendorId:E.ledgerUSBVendorId}],isSupported=function(){return Promise.resolve(!(!window.navigator||!window.navigator.hid))},getHID=function(){var e=navigator.hid;if(!e)throw new m.TransportError("navigator.hid is not supported","HIDNotSupported");return e};function requestLedgerDevices(){return l(this,void 0,void 0,(function(){var e;return u(this,(function(r){switch(r.label){case 0:return[4,getHID().requestDevice({filters:I})];case 1:return e=r.sent(),Array.isArray(e)?[2,e]:[2,[e]]}}))}))}function getLedgerDevices(){return l(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,getHID().getDevices()];case 1:return[2,e.sent().filter((function(e){return e.vendorId===E.ledgerUSBVendorId}))]}}))}))}var g=function(r){function TransportWebHID(t){var n=r.call(this)||this;return n.channel=Math.floor(65535*Math.random()),n.packetSize=64,n.inputs=[],n.read=function(){return n.inputs.length?Promise.resolve(n.inputs.shift()):new Promise((function(e){n.inputCallback=e}))},n.onInputReport=function(r){var t=e.from(r.data.buffer);n.inputCallback?(n.inputCallback(t),n.inputCallback=null):n.inputs.push(t)},n._disconnectEmitted=!1,n._emitDisconnect=function(e){n._disconnectEmitted||(n._disconnectEmitted=!0,n.emit("disconnect",e))},n.exchange=function(e){return l(n,void 0,void 0,(function(){var r=this;return u(this,(function(t){switch(t.label){case 0:return[4,this.exchangeAtomicImpl((function(){return l(r,void 0,void 0,(function(){var r,t,n,o,s,i,a,c,l;return u(this,(function(u){switch(u.label){case 0:t=(r=this).channel,n=r.packetSize,(0,v.log)("apdu","=> "+e.toString("hex")),o=(0,f.default)(t,n),s=o.makeBlocks(e),i=0,u.label=1;case 1:return i<s.length?[4,this.device.sendReport(0,s[i])]:[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return(a=o.getReducedResult(c))?[3,6]:[4,this.read()];case 5:return l=u.sent(),c=o.reduceResponse(c,l),[3,4];case 6:return(0,v.log)("apdu","<= "+a.toString("hex")),[2,a]}}))}))})).catch((function(e){if(e&&e.message&&e.message.includes("write"))throw r._emitDisconnect(e),new m.DisconnectedDeviceDuringOperation(e.message);throw e}))];case 1:return[2,t.sent()]}}))}))},n.device=t,n.deviceModel="number"==typeof t.productId?(0,E.identifyUSBProductId)(t.productId):void 0,t.addEventListener("inputreport",n.onInputReport),n}return i(TransportWebHID,r),TransportWebHID.request=function(){return l(this,void 0,void 0,(function(){var e,r;return u(this,(function(t){switch(t.label){case 0:return[4,requestLedgerDevices()];case 1:return e=p.apply(void 0,[t.sent(),1]),r=e[0],[2,TransportWebHID.open(r)]}}))}))},TransportWebHID.openConnected=function(){return l(this,void 0,void 0,(function(){var e;return u(this,(function(r){switch(r.label){case 0:return[4,getLedgerDevices()];case 1:return 0===(e=r.sent()).length?[2,null]:[2,TransportWebHID.open(e[0])]}}))}))},TransportWebHID.open=function(e){return l(this,void 0,void 0,(function(){var r,t;return u(this,(function(n){switch(n.label){case 0:return[4,e.open()];case 1:return n.sent(),r=new TransportWebHID(e),t=function(n){e===n.device&&(getHID().removeEventListener("disconnect",t),r._emitDisconnect(new m.DisconnectedDevice))},getHID().addEventListener("disconnect",t),[2,r]}}))}))},TransportWebHID.prototype.close=function(){return l(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.exchangeBusyPromise];case 1:return e.sent(),this.device.removeEventListener("inputreport",this.onInputReport),[4,this.device.close()];case 2:return e.sent(),[2]}}))}))},TransportWebHID.prototype.setScrambleKey=function(){},TransportWebHID.isSupported=isSupported,TransportWebHID.list=getLedgerDevices,TransportWebHID.listen=function(e){var r=!1;return function(){return l(this,void 0,void 0,(function(){var e;return u(this,(function(r){switch(r.label){case 0:return[4,getLedgerDevices()];case 1:return(e=r.sent()).length>0?[2,e[0]]:[4,requestLedgerDevices()];case 2:return[2,r.sent()[0]]}}))}))}().then((function(t){if(t){if(!r){var n="number"==typeof t.productId?(0,E.identifyUSBProductId)(t.productId):void 0;e.next({type:"add",descriptor:t,deviceModel:n}),e.complete()}}else e.error(new m.TransportOpenUserCancelled("Access denied to use Ledger device"))}),(function(r){e.error(new m.TransportOpenUserCancelled(r.message))})),{unsubscribe:function(){r=!0}}},TransportWebHID}(d.default);r.default=g}(i);const He=o(i),Ve=Object.freeze(Object.defineProperty({__proto__:null,default:He},Symbol.toStringTag,{value:"Module"}));export{Ve as T};
//# sourceMappingURL=TransportWebHID.mjs.map
