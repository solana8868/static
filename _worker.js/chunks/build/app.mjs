import{b as e,p as l,d,a as v,e as S,f as B,i as T,j as k,n as x,c as U,g as O,r as F,h as P,s as D,t as W,B as j,k as z,o as Q,l as K,S as H,m as q,q as G,F as J,u as $,v as ee,w as te,x as re,y as ne,z as oe,A as ie,C as se,D as ae,E as ce,G as he,H as me,I as ge,J as be,K as Ee,L as ve}from"../runtime.mjs";const Te=Object.freeze(Object.defineProperty({__proto__:null,basename:e,default:l,delimiter:d,dirname:v,extname:S,format:B,isAbsolute:T,join:k,normalize:x,normalizeString:U,parse:O,relative:F,resolve:P,sep:D,toNamespacedPath:W},Symbol.toStringTag,{value:"Module"}));var ke="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getDefaultExportFromNamespaceIfNotNamed(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")&&1===Object.keys(e).length?e.default:e}var Ne={exports:{}},_e=Ne.exports;Object.defineProperty(_e,"__esModule",{value:!0});const fn$1=function(){};Ne.exports=function createMock(e,l={}){fn$1.prototype.name=e;const d={};return new Proxy(fn$1,{get:(v,S)=>"caller"===S?null:"__createMock__"===S?createMock:"__unenv__"===S||(S in l?l[S]:d[S]=d[S]||createMock(`${e}.${S.toString()}`)),apply:(l,d,v)=>createMock(`${e}()`),construct:(l,d,v)=>createMock(`[${e}]`),enumerate:()=>[]})}("mock");var Me=Ne.exports,Re={exports:{}};!function(e){var l=Object.prototype.hasOwnProperty,d="~";function Events(){}function EE(e,l,d){this.fn=e,this.context=l,this.once=d||!1}function addListener(e,l,v,S,B){if("function"!=typeof v)throw new TypeError("The listener must be a function");var T=new EE(v,S||e,B),k=d?d+l:l;return e._events[k]?e._events[k].fn?e._events[k]=[e._events[k],T]:e._events[k].push(T):(e._events[k]=T,e._eventsCount++),e}function clearEvent(e,l){0==--e._eventsCount?e._events=new Events:delete e._events[l]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(d=!1)),EventEmitter.prototype.eventNames=function(){var e,v,S=[];if(0===this._eventsCount)return S;for(v in e=this._events)l.call(e,v)&&S.push(d?v.slice(1):v);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(e)):S},EventEmitter.prototype.listeners=function(e){var l=d?d+e:e,v=this._events[l];if(!v)return[];if(v.fn)return[v.fn];for(var S=0,B=v.length,T=new Array(B);S<B;S++)T[S]=v[S].fn;return T},EventEmitter.prototype.listenerCount=function(e){var l=d?d+e:e,v=this._events[l];return v?v.fn?1:v.length:0},EventEmitter.prototype.emit=function(e,l,v,S,B,T){var k=d?d+e:e;if(!this._events[k])return!1;var x,U,O=this._events[k],F=arguments.length;if(O.fn){switch(O.once&&this.removeListener(e,O.fn,void 0,!0),F){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,l),!0;case 3:return O.fn.call(O.context,l,v),!0;case 4:return O.fn.call(O.context,l,v,S),!0;case 5:return O.fn.call(O.context,l,v,S,B),!0;case 6:return O.fn.call(O.context,l,v,S,B,T),!0}for(U=1,x=new Array(F-1);U<F;U++)x[U-1]=arguments[U];O.fn.apply(O.context,x)}else{var P,D=O.length;for(U=0;U<D;U++)switch(O[U].once&&this.removeListener(e,O[U].fn,void 0,!0),F){case 1:O[U].fn.call(O[U].context);break;case 2:O[U].fn.call(O[U].context,l);break;case 3:O[U].fn.call(O[U].context,l,v);break;case 4:O[U].fn.call(O[U].context,l,v,S);break;default:if(!x)for(P=1,x=new Array(F-1);P<F;P++)x[P-1]=arguments[P];O[U].fn.apply(O[U].context,x)}}return!0},EventEmitter.prototype.on=function(e,l,d){return addListener(this,e,l,d,!1)},EventEmitter.prototype.once=function(e,l,d){return addListener(this,e,l,d,!0)},EventEmitter.prototype.removeListener=function(e,l,v,S){var B=d?d+e:e;if(!this._events[B])return this;if(!l)return clearEvent(this,B),this;var T=this._events[B];if(T.fn)T.fn!==l||S&&!T.once||v&&T.context!==v||clearEvent(this,B);else{for(var k=0,x=[],U=T.length;k<U;k++)(T[k].fn!==l||S&&!T[k].once||v&&T[k].context!==v)&&x.push(T[k]);x.length?this._events[B]=1===x.length?x[0]:x:clearEvent(this,B)}return this},EventEmitter.prototype.removeAllListeners=function(e){var l;return e?(l=d?d+e:e,this._events[l]&&clearEvent(this,l)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=d,EventEmitter.EventEmitter=EventEmitter,e.exports=EventEmitter}(Re);const xe=getDefaultExportFromCjs(Re.exports);class WalletError extends Error{constructor(e,l){super(e),this.error=l}}class WalletNotReadyError extends WalletError{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class WalletLoadError extends WalletError{constructor(){super(...arguments),this.name="WalletLoadError"}}class WalletConfigError extends WalletError{constructor(){super(...arguments),this.name="WalletConfigError"}}class WalletConnectionError extends WalletError{constructor(){super(...arguments),this.name="WalletConnectionError"}}class WalletDisconnectedError extends WalletError{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class WalletDisconnectionError extends WalletError{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class WalletAccountError extends WalletError{constructor(){super(...arguments),this.name="WalletAccountError"}}class WalletPublicKeyError extends WalletError{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class WalletNotConnectedError extends WalletError{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class WalletSendTransactionError extends WalletError{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class WalletSignTransactionError extends WalletError{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class WalletSignMessageError extends WalletError{constructor(){super(...arguments),this.name="WalletSignMessageError"}}var Ue;!function(e){e.Installed="Installed",e.NotDetected="NotDetected",e.Loadable="Loadable",e.Unsupported="Unsupported"}(Ue||(Ue={}));class BaseWalletAdapter extends xe{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,l,d={}){const v=this.publicKey;if(!v)throw new WalletNotConnectedError;return e.feePayer=e.feePayer||v,e.recentBlockhash=e.recentBlockhash||(await l.getLatestBlockhash({commitment:d.preflightCommitment,minContextSlot:d.minContextSlot})).blockhash,e}}function isVersionedTransaction(e){return"version"in e}class BaseSignerWalletAdapter extends BaseWalletAdapter{async sendTransaction(e,l,d={}){let v=!0;try{if(isVersionedTransaction(e)){if(!this.supportedTransactionVersions)throw new WalletSendTransactionError("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new WalletSendTransactionError(`Sending transaction version ${e.version} isn't supported by this wallet`);try{const v=(e=await this.signTransaction(e)).serialize();return await l.sendRawTransaction(v,d)}catch(e){if(e instanceof WalletSignTransactionError)throw v=!1,e;throw new WalletSendTransactionError(e?.message,e)}}else try{const{signers:v,...S}=d;e=await this.prepareTransaction(e,l,S),v?.length&&e.partialSign(...v);const B=(e=await this.signTransaction(e)).serialize();return await l.sendRawTransaction(B,S)}catch(e){if(e instanceof WalletSignTransactionError)throw v=!1,e;throw new WalletSendTransactionError(e?.message,e)}}catch(e){throw v&&this.emit("error",e),e}}async signAllTransactions(e){for(const l of e)if(isVersionedTransaction(l)){if(!this.supportedTransactionVersions)throw new WalletSignTransactionError("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(l.version))throw new WalletSignTransactionError(`Signing transaction version ${l.version} isn't supported by this wallet`)}const l=[];for(const d of e)l.push(await this.signTransaction(d));return l}}class BaseMessageSignerWalletAdapter extends BaseSignerWalletAdapter{}var Oe={exports:{}},Ce={};function createNotImplementedError(e){throw new Error(`[unenv] ${e} is not implemented yet!`)}Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.createNotImplementedError=createNotImplementedError,Ce.mergeFns=function(...e){return function(...l){for(const d of e)d(...l)}},Ce.notImplemented=function(e){return Object.assign((()=>{throw createNotImplementedError(e)}),{__unenv__:!0})},Ce.notImplementedClass=function(e){return class{__unenv__=!0;constructor(){throw new Error(`[unenv] ${e} is not implemented yet!`)}}},Ce.rawHeaders=function(e){const l=[];for(const d in e)if(Array.isArray(e[d]))for(const v of e[d])l.push(d,v);else l.push(d,e[d]);return l};var Fe={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.byteLength=function(e){const l=getLens(e),d=l[0],v=l[1];return 3*(d+v)/4-v},Pe.fromByteArray=function(e){let l;const d=e.length,v=d%3,S=[],B=16383;for(let l=0,T=d-v;l<T;l+=B)S.push(encodeChunk(e,l,l+B>T?T:l+B));1===v?(l=e[d-1],S.push(We[l>>2]+We[l<<4&63]+"==")):2===v&&(l=(e[d-2]<<8)+e[d-1],S.push(We[l>>10]+We[l>>4&63]+We[l<<2&63]+"="));return S.join("")},Pe.toByteArray=function(e){let l;const d=getLens(e),v=d[0],S=d[1],B=new Qe(function(e,l,d){return 3*(l+d)/4-d}(0,v,S));let T=0;const k=S>0?v-4:v;let x;for(x=0;x<k;x+=4)l=ze[e.charCodeAt(x)]<<18|ze[e.charCodeAt(x+1)]<<12|ze[e.charCodeAt(x+2)]<<6|ze[e.charCodeAt(x+3)],B[T++]=l>>16&255,B[T++]=l>>8&255,B[T++]=255&l;2===S&&(l=ze[e.charCodeAt(x)]<<2|ze[e.charCodeAt(x+1)]>>4,B[T++]=255&l);1===S&&(l=ze[e.charCodeAt(x)]<<10|ze[e.charCodeAt(x+1)]<<4|ze[e.charCodeAt(x+2)]>>2,B[T++]=l>>8&255,B[T++]=255&l);return B};const We=[],ze=[],Qe="undefined"==typeof Uint8Array?Array:Uint8Array,qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let e=0,l=64;e<l;++e)We[e]=qe[e],ze[qe.charCodeAt(e)]=e;function getLens(e){const l=e.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");let d=e.indexOf("=");-1===d&&(d=l);return[d,d===l?0:4-d%4]}function tripletToBase64(e){return We[e>>18&63]+We[e>>12&63]+We[e>>6&63]+We[63&e]}function encodeChunk(e,l,d){let v;const S=[];for(let B=l;B<d;B+=3)v=(e[B]<<16&16711680)+(e[B+1]<<8&65280)+(255&e[B+2]),S.push(tripletToBase64(v));return S.join("")}ze["-".charCodeAt(0)]=62,ze["_".charCodeAt(0)]=63;var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.read=function(e,l,d,v,S){let B,T;const k=8*S-v-1,x=(1<<k)-1,U=x>>1;let O=-7,F=d?S-1:0;const P=d?-1:1;let D=e[l+F];F+=P,B=D&(1<<-O)-1,D>>=-O,O+=k;for(;O>0;)B=256*B+e[l+F],F+=P,O-=8;T=B&(1<<-O)-1,B>>=-O,O+=v;for(;O>0;)T=256*T+e[l+F],F+=P,O-=8;if(0===B)B=1-U;else{if(B===x)return T?Number.NaN:(D?-1:1)*Number.POSITIVE_INFINITY;T+=Math.pow(2,v),B-=U}return(D?-1:1)*T*Math.pow(2,B-v)},Ye.write=function(e,l,d,v,S,B){let T,k,x,U=8*B-S-1;const O=(1<<U)-1,F=O>>1,P=23===S?Math.pow(2,-24)-Math.pow(2,-77):0;let D=v?0:B-1;const W=v?1:-1,j=l<0||0===l&&1/l<0?1:0;l=Math.abs(l),Number.isNaN(l)||l===Number.POSITIVE_INFINITY?(k=Number.isNaN(l)?1:0,T=O):(T=Math.floor(Math.log2(l)),l*(x=Math.pow(2,-T))<1&&(T--,x*=2),(l+=T+F>=1?P/x:P*Math.pow(2,1-F))*x>=2&&(T++,x/=2),T+F>=O?(k=0,T=O):T+F>=1?(k=(l*x-1)*Math.pow(2,S),T+=F):(k=l*Math.pow(2,F-1)*Math.pow(2,S),T=0));for(;S>=8;)e[d+D]=255&k,D+=W,k/=256,S-=8;T=T<<S|k,U+=S;for(;U>0;)e[d+D]=255&T,D+=W,T/=256,U-=8;e[d+D-W]|=128*j},Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.Buffer=Buffer,Fe.INSPECT_MAX_BYTES=void 0,Fe.SlowBuffer=function(e){+e!=e&&(e=0);return Buffer.alloc(+e)},Fe.kMaxLength=void 0;var $e=_interopRequireWildcard(Pe),rt=_interopRequireWildcard(Ye);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var l=new WeakMap,d=new WeakMap;return(_getRequireWildcardCache=function(e){return e?d:l})(e)}function _interopRequireWildcard(e,l){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var d=_getRequireWildcardCache(l);if(d&&d.has(e))return d.get(e);var v={__proto__:null},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in e)if("default"!==B&&{}.hasOwnProperty.call(e,B)){var T=S?Object.getOwnPropertyDescriptor(e,B):null;T&&(T.get||T.set)?Object.defineProperty(v,B,T):v[B]=e[B]}return v.default=e,d&&d.set(e,v),v}const nt="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,ot=Fe.INSPECT_MAX_BYTES=50,it=2147483647;function createBuffer(e){if(e>it)throw new RangeError('The value "'+e+'" is invalid for option "size"');const l=new Uint8Array(e);return Object.setPrototypeOf(l,Buffer.prototype),l}function Buffer(e,l,d){if("number"==typeof e){if("string"==typeof l)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}return from(e,l,d)}function from(e,l,d){if("string"==typeof e)return function(e,l){"string"==typeof l&&""!==l||(l="utf8");if(!Buffer.isEncoding(l))throw new TypeError("Unknown encoding: "+l);const d=0|byteLength(e,l);let v=createBuffer(d);const S=v.write(e,l);S!==d&&(v=v.slice(0,S));return v}(e,l);if(ArrayBuffer.isView(e))return function(e){if(isInstance(e,Uint8Array)){const l=new Uint8Array(e);return fromArrayBuffer(l.buffer,l.byteOffset,l.byteLength)}return fromArrayLike(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer))return fromArrayBuffer(e,l,d);if("undefined"!=typeof SharedArrayBuffer&&(isInstance(e,SharedArrayBuffer)||e&&isInstance(e.buffer,SharedArrayBuffer)))return fromArrayBuffer(e,l,d);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const v=e.valueOf&&e.valueOf();if(null!=v&&v!==e)return Buffer.from(v,l,d);const S=function(e){if(Buffer.isBuffer(e)){const l=0|checked(e.length),d=createBuffer(l);return 0===d.length||e.copy(d,0,0,l),d}if(void 0!==e.length)return"number"!=typeof e.length||numberIsNaN(e.length)?createBuffer(0):fromArrayLike(e);if("Buffer"===e.type&&Array.isArray(e.data))return fromArrayLike(e.data)}(e);if(S)return S;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer.from(e[Symbol.toPrimitive]("string"),l,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromArrayLike(e){const l=e.length<0?0:0|checked(e.length),d=createBuffer(l);for(let v=0;v<l;v+=1)d[v]=255&e[v];return d}function fromArrayBuffer(e,l,d){if(l<0||e.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<l+(d||0))throw new RangeError('"length" is outside of buffer bounds');let v;return v=void 0===l&&void 0===d?new Uint8Array(e):void 0===d?new Uint8Array(e,l):new Uint8Array(e,l,d),Object.setPrototypeOf(v,Buffer.prototype),v}function checked(e){if(e>=it)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+it.toString(16)+" bytes");return 0|e}function byteLength(e,l){if(Buffer.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const d=e.length,v=arguments.length>2&&!0===arguments[2];if(!v&&0===d)return 0;let S=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return utf8ToBytes$2(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*d;case"hex":return d>>>1;case"base64":return base64ToBytes(e).length;default:if(S)return v?-1:utf8ToBytes$2(e).length;l=(""+l).toLowerCase(),S=!0}}function slowToString(e,l,d){let v=!1;if((void 0===l||l<0)&&(l=0),l>this.length)return"";if((void 0===d||d>this.length)&&(d=this.length),d<=0)return"";if((d>>>=0)<=(l>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,l,d);case"utf8":case"utf-8":return utf8Slice(this,l,d);case"ascii":return asciiSlice(this,l,d);case"latin1":case"binary":return latin1Slice(this,l,d);case"base64":return base64Slice(this,l,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,l,d);default:if(v)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),v=!0}}function swap(e,l,d){const v=e[l];e[l]=e[d],e[d]=v}function bidirectionalIndexOf(e,l,d,v,S){if(0===e.length)return-1;if("string"==typeof d?(v=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),numberIsNaN(d=+d)&&(d=S?0:e.length-1),d<0&&(d=e.length+d),d>=e.length){if(S)return-1;d=e.length-1}else if(d<0){if(!S)return-1;d=0}if("string"==typeof l&&(l=Buffer.from(l,v)),Buffer.isBuffer(l))return 0===l.length?-1:arrayIndexOf(e,l,d,v,S);if("number"==typeof l)return l&=255,"function"==typeof Uint8Array.prototype.indexOf?S?Uint8Array.prototype.indexOf.call(e,l,d):Uint8Array.prototype.lastIndexOf.call(e,l,d):arrayIndexOf(e,[l],d,v,S);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,l,d,v,S){let B,T=1,k=e.length,x=l.length;if(void 0!==v&&("ucs2"===(v=String(v).toLowerCase())||"ucs-2"===v||"utf16le"===v||"utf-16le"===v)){if(e.length<2||l.length<2)return-1;T=2,k/=2,x/=2,d/=2}function read(e,l){return 1===T?e[l]:e.readUInt16BE(l*T)}if(S){let v=-1;for(B=d;B<k;B++)if(read(e,B)===read(l,-1===v?0:B-v)){if(-1===v&&(v=B),B-v+1===x)return v*T}else-1!==v&&(B-=B-v),v=-1}else for(d+x>k&&(d=k-x),B=d;B>=0;B--){let d=!0;for(let v=0;v<x;v++)if(read(e,B+v)!==read(l,v)){d=!1;break}if(d)return B}return-1}function hexWrite(e,l,d,v){d=Number(d)||0;const S=e.length-d;v?(v=Number(v))>S&&(v=S):v=S;const B=l.length;let T;for(v>B/2&&(v=B/2),T=0;T<v;++T){const v=Number.parseInt(l.slice(2*T,2*T+2),16);if(numberIsNaN(v))return T;e[d+T]=v}return T}function utf8Write(e,l,d,v){return blitBuffer(utf8ToBytes$2(l,e.length-d),e,d,v)}function asciiWrite(e,l,d,v){return blitBuffer(function(e){const l=[];for(let d=0;d<e.length;++d)l.push(255&e.charCodeAt(d));return l}(l),e,d,v)}function base64Write(e,l,d,v){return blitBuffer(base64ToBytes(l),e,d,v)}function ucs2Write(e,l,d,v){return blitBuffer(function(e,l){let d,v,S;const B=[];for(let T=0;T<e.length&&!((l-=2)<0);++T)d=e.charCodeAt(T),v=d>>8,S=d%256,B.push(S,v);return B}(l,e.length-d),e,d,v)}function base64Slice(e,l,d){return 0===l&&d===e.length?$e.fromByteArray(e):$e.fromByteArray(e.slice(l,d))}function utf8Slice(e,l,d){d=Math.min(e.length,d);const v=[];let S=l;for(;S<d;){const l=e[S];let B=null,T=l>239?4:l>223?3:l>191?2:1;if(S+T<=d){let d,v,k,x;switch(T){case 1:l<128&&(B=l);break;case 2:d=e[S+1],128==(192&d)&&(x=(31&l)<<6|63&d,x>127&&(B=x));break;case 3:d=e[S+1],v=e[S+2],128==(192&d)&&128==(192&v)&&(x=(15&l)<<12|(63&d)<<6|63&v,x>2047&&(x<55296||x>57343)&&(B=x));break;case 4:d=e[S+1],v=e[S+2],k=e[S+3],128==(192&d)&&128==(192&v)&&128==(192&k)&&(x=(15&l)<<18|(63&d)<<12|(63&v)<<6|63&k,x>65535&&x<1114112&&(B=x))}}null===B?(B=65533,T=1):B>65535&&(B-=65536,v.push(B>>>10&1023|55296),B=56320|1023&B),v.push(B),S+=T}return function(e){const l=e.length;if(l<=st)return String.fromCharCode.apply(String,e);let d="",v=0;for(;v<l;)d+=String.fromCharCode.apply(String,e.slice(v,v+=st));return d}(v)}Fe.kMaxLength=it,Buffer.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(e,l),42===e.foo()}catch{return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This environment lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(e,l,d){return from(e,l,d)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(e,l,d){return function(e,l,d){return assertSize(e),e<=0?createBuffer(e):void 0!==l?"string"==typeof d?createBuffer(e).fill(l,d):createBuffer(e).fill(l):createBuffer(e)}(e,l,d)},Buffer.allocUnsafe=function(e){return allocUnsafe(e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Buffer.prototype},Buffer.compare=function(e,l){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),isInstance(l,Uint8Array)&&(l=Buffer.from(l,l.offset,l.byteLength)),!Buffer.isBuffer(e)||!Buffer.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===l)return 0;let d=e.length,v=l.length;for(let S=0,B=Math.min(d,v);S<B;++S)if(e[S]!==l[S]){d=e[S],v=l[S];break}return d<v?-1:v<d?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,l){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);let d;if(void 0===l)for(l=0,d=0;d<e.length;++d)l+=e[d].length;const v=Buffer.allocUnsafe(l);let S=0;for(d=0;d<e.length;++d){let l=e[d];if(isInstance(l,Uint8Array))S+l.length>v.length?(Buffer.isBuffer(l)||(l=Buffer.from(l.buffer,l.byteOffset,l.byteLength)),l.copy(v,S)):Uint8Array.prototype.set.call(v,l,S);else{if(!Buffer.isBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(v,S)}S+=l.length}return v},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<e;l+=2)swap(this,l,l+1);return this},Buffer.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<e;l+=4)swap(this,l,l+3),swap(this,l+1,l+2);return this},Buffer.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<e;l+=8)swap(this,l,l+7),swap(this,l+1,l+6),swap(this,l+2,l+5),swap(this,l+3,l+4);return this},Buffer.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):Reflect.apply(slowToString,this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){let e="";const l=ot;return e=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(e+=" ... "),"<Buffer "+e+">"},nt&&(Buffer.prototype[nt]=Buffer.prototype.inspect),Buffer.prototype.compare=function(e,l,d,v,S){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===l&&(l=0),void 0===d&&(d=e?e.length:0),void 0===v&&(v=0),void 0===S&&(S=this.length),l<0||d>e.length||v<0||S>this.length)throw new RangeError("out of range index");if(v>=S&&l>=d)return 0;if(v>=S)return-1;if(l>=d)return 1;if(this===e)return 0;let B=(S>>>=0)-(v>>>=0),T=(d>>>=0)-(l>>>=0);const k=Math.min(B,T),x=this.slice(v,S),U=e.slice(l,d);for(let e=0;e<k;++e)if(x[e]!==U[e]){B=x[e],T=U[e];break}return B<T?-1:T<B?1:0},Buffer.prototype.includes=function(e,l,d){return-1!==this.indexOf(e,l,d)},Buffer.prototype.indexOf=function(e,l,d){return bidirectionalIndexOf(this,e,l,d,!0)},Buffer.prototype.lastIndexOf=function(e,l,d){return bidirectionalIndexOf(this,e,l,d,!1)},Buffer.prototype.write=function(e,l,d,v){if(void 0===l)v="utf8",d=this.length,l=0;else if(void 0===d&&"string"==typeof l)v=l,d=this.length,l=0;else{if(!Number.isFinite(l))throw new TypeError("Buffer.write(string, encoding, offset[, length]) is no longer supported");l>>>=0,Number.isFinite(d)?(d>>>=0,void 0===v&&(v="utf8")):(v=d,d=void 0)}const S=this.length-l;if((void 0===d||d>S)&&(d=S),e.length>0&&(d<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let B=!1;for(;;)switch(v){case"hex":return hexWrite(this,e,l,d);case"utf8":case"utf-8":return utf8Write(this,e,l,d);case"ascii":case"latin1":case"binary":return asciiWrite(this,e,l,d);case"base64":return base64Write(this,e,l,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,l,d);default:if(B)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),B=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const st=4096;function asciiSlice(e,l,d){let v="";d=Math.min(e.length,d);for(let S=l;S<d;++S)v+=String.fromCharCode(127&e[S]);return v}function latin1Slice(e,l,d){let v="";d=Math.min(e.length,d);for(let S=l;S<d;++S)v+=String.fromCharCode(e[S]);return v}function hexSlice(e,l,d){const v=e.length;(!l||l<0)&&(l=0),(!d||d<0||d>v)&&(d=v);let S="";for(let v=l;v<d;++v)S+=lt[e[v]];return S}function utf16leSlice(e,l,d){const v=e.slice(l,d);let S="";for(let e=0;e<v.length-1;e+=2)S+=String.fromCharCode(v[e]+256*v[e+1]);return S}function checkOffset(e,l,d){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+l>d)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,l,d,v,S,B){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>S||l<B)throw new RangeError('"value" argument is out of bounds');if(d+v>e.length)throw new RangeError("Index out of range")}function wrtBigUInt64LE(e,l,d,v,S){checkIntBI(l,v,S,e,d,7);let B=Number(l&BigInt(4294967295));e[d++]=B,B>>=8,e[d++]=B,B>>=8,e[d++]=B,B>>=8,e[d++]=B;let T=Number(l>>BigInt(32)&BigInt(4294967295));return e[d++]=T,T>>=8,e[d++]=T,T>>=8,e[d++]=T,T>>=8,e[d++]=T,d}function wrtBigUInt64BE(e,l,d,v,S){checkIntBI(l,v,S,e,d,7);let B=Number(l&BigInt(4294967295));e[d+7]=B,B>>=8,e[d+6]=B,B>>=8,e[d+5]=B,B>>=8,e[d+4]=B;let T=Number(l>>BigInt(32)&BigInt(4294967295));return e[d+3]=T,T>>=8,e[d+2]=T,T>>=8,e[d+1]=T,T>>=8,e[d]=T,d+8}function checkIEEE754(e,l,d,v,S,B){if(d+v>e.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function writeFloat(e,l,d,v,S){return l=+l,d>>>=0,S||checkIEEE754(e,0,d,4),rt.write(e,l,d,v,23,4),d+4}function writeDouble(e,l,d,v,S){return l=+l,d>>>=0,S||checkIEEE754(e,0,d,8),rt.write(e,l,d,v,52,8),d+8}Buffer.prototype.slice=function(e,l){const d=this.length;(e=Math.trunc(e))<0?(e+=d)<0&&(e=0):e>d&&(e=d),(l=void 0===l?d:Math.trunc(l))<0?(l+=d)<0&&(l=0):l>d&&(l=d),l<e&&(l=e);const v=this.subarray(e,l);return Object.setPrototypeOf(v,Buffer.prototype),v},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(e,l,d){e>>>=0,l>>>=0,d||checkOffset(e,l,this.length);let v=this[e],S=1,B=0;for(;++B<l&&(S*=256);)v+=this[e+B]*S;return v},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(e,l,d){e>>>=0,l>>>=0,d||checkOffset(e,l,this.length);let v=this[e+--l],S=1;for(;l>0&&(S*=256);)v+=this[e+--l]*S;return v},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(e,l){return e>>>=0,l||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(e,l){return e>>>=0,l||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(e,l){return e>>>=0,l||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(e,l){return e>>>=0,l||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(e,l){return e>>>=0,l||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readBigUInt64LE=defineBigIntMethod((function(e){validateNumber(e>>>=0,"offset");const l=this[e],d=this[e+7];void 0!==l&&void 0!==d||boundsError(e,this.length-8);const v=l+256*this[++e]+65536*this[++e]+this[++e]*2**24,S=this[++e]+256*this[++e]+65536*this[++e]+d*2**24;return BigInt(v)+(BigInt(S)<<BigInt(32))})),Buffer.prototype.readBigUInt64BE=defineBigIntMethod((function(e){validateNumber(e>>>=0,"offset");const l=this[e],d=this[e+7];void 0!==l&&void 0!==d||boundsError(e,this.length-8);const v=l*2**24+65536*this[++e]+256*this[++e]+this[++e],S=this[++e]*2**24+65536*this[++e]+256*this[++e]+d;return(BigInt(v)<<BigInt(32))+BigInt(S)})),Buffer.prototype.readIntLE=function(e,l,d){e>>>=0,l>>>=0,d||checkOffset(e,l,this.length);let v=this[e],S=1,B=0;for(;++B<l&&(S*=256);)v+=this[e+B]*S;return S*=128,v>=S&&(v-=Math.pow(2,8*l)),v},Buffer.prototype.readIntBE=function(e,l,d){e>>>=0,l>>>=0,d||checkOffset(e,l,this.length);let v=l,S=1,B=this[e+--v];for(;v>0&&(S*=256);)B+=this[e+--v]*S;return S*=128,B>=S&&(B-=Math.pow(2,8*l)),B},Buffer.prototype.readInt8=function(e,l){return e>>>=0,l||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,l){e>>>=0,l||checkOffset(e,2,this.length);const d=this[e]|this[e+1]<<8;return 32768&d?4294901760|d:d},Buffer.prototype.readInt16BE=function(e,l){e>>>=0,l||checkOffset(e,2,this.length);const d=this[e+1]|this[e]<<8;return 32768&d?4294901760|d:d},Buffer.prototype.readInt32LE=function(e,l){return e>>>=0,l||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,l){return e>>>=0,l||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readBigInt64LE=defineBigIntMethod((function(e){validateNumber(e>>>=0,"offset");const l=this[e],d=this[e+7];void 0!==l&&void 0!==d||boundsError(e,this.length-8);const v=this[e+4]+256*this[e+5]+65536*this[e+6]+(d<<24);return(BigInt(v)<<BigInt(32))+BigInt(l+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),Buffer.prototype.readBigInt64BE=defineBigIntMethod((function(e){validateNumber(e>>>=0,"offset");const l=this[e],d=this[e+7];void 0!==l&&void 0!==d||boundsError(e,this.length-8);const v=(l<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(v)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+d)})),Buffer.prototype.readFloatLE=function(e,l){return e>>>=0,l||checkOffset(e,4,this.length),rt.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,l){return e>>>=0,l||checkOffset(e,4,this.length),rt.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,l){return e>>>=0,l||checkOffset(e,8,this.length),rt.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,l){return e>>>=0,l||checkOffset(e,8,this.length),rt.read(this,e,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(e,l,d,v){if(e=+e,l>>>=0,d>>>=0,!v){checkInt(this,e,l,d,Math.pow(2,8*d)-1,0)}let S=1,B=0;for(this[l]=255&e;++B<d&&(S*=256);)this[l+B]=e/S&255;return l+d},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(e,l,d,v){if(e=+e,l>>>=0,d>>>=0,!v){checkInt(this,e,l,d,Math.pow(2,8*d)-1,0)}let S=d-1,B=1;for(this[l+S]=255&e;--S>=0&&(B*=256);)this[l+S]=e/B&255;return l+d},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(e,l,d){return e=+e,l>>>=0,d||checkInt(this,e,l,1,255,0),this[l]=255&e,l+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(e,l,d){return e=+e,l>>>=0,d||checkInt(this,e,l,2,65535,0),this[l]=255&e,this[l+1]=e>>>8,l+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(e,l,d){return e=+e,l>>>=0,d||checkInt(this,e,l,2,65535,0),this[l]=e>>>8,this[l+1]=255&e,l+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(e,l,d){return e=+e,l>>>=0,d||checkInt(this,e,l,4,4294967295,0),this[l+3]=e>>>24,this[l+2]=e>>>16,this[l+1]=e>>>8,this[l]=255&e,l+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(e,l,d){return e=+e,l>>>=0,d||checkInt(this,e,l,4,4294967295,0),this[l]=e>>>24,this[l+1]=e>>>16,this[l+2]=e>>>8,this[l+3]=255&e,l+4},Buffer.prototype.writeBigUInt64LE=defineBigIntMethod((function(e,l=0){return wrtBigUInt64LE(this,e,l,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeBigUInt64BE=defineBigIntMethod((function(e,l=0){return wrtBigUInt64BE(this,e,l,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeIntLE=function(e,l,d,v){if(e=+e,l>>>=0,!v){const v=Math.pow(2,8*d-1);checkInt(this,e,l,d,v-1,-v)}let S=0,B=1,T=0;for(this[l]=255&e;++S<d&&(B*=256);)e<0&&0===T&&0!==this[l+S-1]&&(T=1),this[l+S]=Math.trunc(e/B)-T&255;return l+d},Buffer.prototype.writeIntBE=function(e,l,d,v){if(e=+e,l>>>=0,!v){const v=Math.pow(2,8*d-1);checkInt(this,e,l,d,v-1,-v)}let S=d-1,B=1,T=0;for(this[l+S]=255&e;--S>=0&&(B*=256);)e<0&&0===T&&0!==this[l+S+1]&&(T=1),this[l+S]=Math.trunc(e/B)-T&255;return l+d},Buffer.prototype.writeInt8=function(e,l,d){return e=+e,l>>>=0,d||checkInt(this,e,l,1,127,-128),e<0&&(e=255+e+1),this[l]=255&e,l+1},Buffer.prototype.writeInt16LE=function(e,l,d){return e=+e,l>>>=0,d||checkInt(this,e,l,2,32767,-32768),this[l]=255&e,this[l+1]=e>>>8,l+2},Buffer.prototype.writeInt16BE=function(e,l,d){return e=+e,l>>>=0,d||checkInt(this,e,l,2,32767,-32768),this[l]=e>>>8,this[l+1]=255&e,l+2},Buffer.prototype.writeInt32LE=function(e,l,d){return e=+e,l>>>=0,d||checkInt(this,e,l,4,2147483647,-2147483648),this[l]=255&e,this[l+1]=e>>>8,this[l+2]=e>>>16,this[l+3]=e>>>24,l+4},Buffer.prototype.writeInt32BE=function(e,l,d){return e=+e,l>>>=0,d||checkInt(this,e,l,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[l]=e>>>24,this[l+1]=e>>>16,this[l+2]=e>>>8,this[l+3]=255&e,l+4},Buffer.prototype.writeBigInt64LE=defineBigIntMethod((function(e,l=0){return wrtBigUInt64LE(this,e,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeBigInt64BE=defineBigIntMethod((function(e,l=0){return wrtBigUInt64BE(this,e,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeFloatLE=function(e,l,d){return writeFloat(this,e,l,!0,d)},Buffer.prototype.writeFloatBE=function(e,l,d){return writeFloat(this,e,l,!1,d)},Buffer.prototype.writeDoubleLE=function(e,l,d){return writeDouble(this,e,l,!0,d)},Buffer.prototype.writeDoubleBE=function(e,l,d){return writeDouble(this,e,l,!1,d)},Buffer.prototype.copy=function(e,l,d,v){if(!Buffer.isBuffer(e))throw new TypeError("argument should be a Buffer");if(d||(d=0),v||0===v||(v=this.length),l>=e.length&&(l=e.length),l||(l=0),v>0&&v<d&&(v=d),v===d)return 0;if(0===e.length||0===this.length)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),e.length-l<v-d&&(v=e.length-l+d);const S=v-d;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(l,d,v):Uint8Array.prototype.set.call(e,this.subarray(d,v),l),S},Buffer.prototype.fill=function(e,l,d,v){if("string"==typeof e){if("string"==typeof l?(v=l,l=0,d=this.length):"string"==typeof d&&(v=d,d=this.length),void 0!==v&&"string"!=typeof v)throw new TypeError("encoding must be a string");if("string"==typeof v&&!Buffer.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(1===e.length){const l=e.charCodeAt(0);("utf8"===v&&l<128||"latin1"===v)&&(e=l)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(l<0||this.length<l||this.length<d)throw new RangeError("Out of range index");if(d<=l)return this;let S;if(l>>>=0,d=void 0===d?this.length:d>>>0,e||(e=0),"number"==typeof e)for(S=l;S<d;++S)this[S]=e;else{const B=Buffer.isBuffer(e)?e:Buffer.from(e,v),T=B.length;if(0===T)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(S=0;S<d-l;++S)this[S+l]=B[S%T]}return this};const at={};function E(e,l,d){at[e]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:Reflect.apply(l,this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function addNumericalSeparator(e){let l="",d=e.length;const v="-"===e[0]?1:0;for(;d>=v+4;d-=3)l=`_${e.slice(d-3,d)}${l}`;return`${e.slice(0,d)}${l}`}function checkIntBI(e,l,d,v,S,B){if(e>d||e<l){const d="bigint"==typeof l?"n":"";let v;throw v=0===l||l===BigInt(0)?`>= 0${d} and < 2${d} ** ${8*(B+1)}${d}`:`>= -(2${d} ** ${8*(B+1)-1}${d}) and < 2 ** ${8*(B+1)-1}${d}`,new at.ERR_OUT_OF_RANGE("value",v,e)}!function(e,l,d){validateNumber(l,"offset"),void 0!==e[l]&&void 0!==e[l+d]||boundsError(l,e.length-(d+1))}(v,S,B)}function validateNumber(e,l){if("number"!=typeof e)throw new at.ERR_INVALID_ARG_TYPE(l,"number",e)}function boundsError(e,l,d){if(Math.floor(e)!==e)throw validateNumber(e,d),new at.ERR_OUT_OF_RANGE("offset","an integer",e);if(l<0)throw new at.ERR_BUFFER_OUT_OF_BOUNDS;throw new at.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${l}`,e)}E("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),E("ERR_INVALID_ARG_TYPE",(function(e,l){return`The "${e}" argument must be of type number. Received type ${typeof l}`}),TypeError),E("ERR_OUT_OF_RANGE",(function(e,l,d){let v=`The value of "${e}" is out of range.`,S=d;return Number.isInteger(d)&&Math.abs(d)>2**32?S=addNumericalSeparator(String(d)):"bigint"==typeof d&&(S=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(S=addNumericalSeparator(S)),S+="n"),v+=` It must be ${l}. Received ${S}`,v}),RangeError);const ct=/[^\w+/-]/g;function utf8ToBytes$2(e,l){let d;l=l||Number.POSITIVE_INFINITY;const v=e.length;let S=null;const B=[];for(let T=0;T<v;++T){if(d=e.charCodeAt(T),d>55295&&d<57344){if(!S){if(d>56319){(l-=3)>-1&&B.push(239,191,189);continue}if(T+1===v){(l-=3)>-1&&B.push(239,191,189);continue}S=d;continue}if(d<56320){(l-=3)>-1&&B.push(239,191,189),S=d;continue}d=65536+(S-55296<<10|d-56320)}else S&&(l-=3)>-1&&B.push(239,191,189);if(S=null,d<128){if((l-=1)<0)break;B.push(d)}else if(d<2048){if((l-=2)<0)break;B.push(d>>6|192,63&d|128)}else if(d<65536){if((l-=3)<0)break;B.push(d>>12|224,d>>6&63|128,63&d|128)}else{if(!(d<1114112))throw new Error("Invalid code point");if((l-=4)<0)break;B.push(d>>18|240,d>>12&63|128,d>>6&63|128,63&d|128)}}return B}function base64ToBytes(e){return $e.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(ct,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,l,d,v){let S;for(S=0;S<v&&!(S+d>=l.length||S>=e.length);++S)l[S+d]=e[S];return S}function isInstance(e,l){return e instanceof l||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===l.name}function numberIsNaN(e){return e!=e}const lt=function(){const e="0123456789abcdef",l=Array.from({length:256});for(let d=0;d<16;++d){const v=16*d;for(let S=0;S<16;++S)l[v+S]=e[d]+e[S]}return l}();function defineBigIntMethod(e){return"undefined"==typeof BigInt?BufferBigIntNotDefined:e}function BufferBigIntNotDefined(){throw new Error("BigInt not supported")}var ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.File=void 0;class File extends Blob{__unenv__=!0;size=0;type="";name="";lastModified=0;constructor(...e){throw super(...e),new Error("[unenv] buffer.File is not implemented")}arrayBuffer(){throw new Error("Not implemented")}slice(){throw new Error("Not implemented")}text(){throw new Error("Not implemented")}stream(){throw new Error("Not implemented")}}ht.File=File,function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.Blob=void 0,Object.defineProperty(l,"File",{enumerable:!0,get:function(){return S.File}}),Object.defineProperty(l,"INSPECT_MAX_BYTES",{enumerable:!0,get:function(){return v.INSPECT_MAX_BYTES}}),Object.defineProperty(l,"SlowBuffer",{enumerable:!0,get:function(){return v.SlowBuffer}}),l.isUtf8=l.isAscii=l.default=l.constants=l.btoa=l.atob=void 0,Object.defineProperty(l,"kMaxLength",{enumerable:!0,get:function(){return v.kMaxLength}}),l.transcode=l.resolveObjectURL=l.kStringMaxLength=void 0;var d=Ce,v=Fe,S=ht;const B=l.Buffer=globalThis.Buffer||v.Buffer,T=l.Blob=globalThis.Blob,k=l.resolveObjectURL=(0,d.notImplemented)("buffer.resolveObjectURL"),x=l.transcode=(0,d.notImplemented)("buffer.transcode"),U=l.isUtf8=(0,d.notImplemented)("buffer.isUtf8"),O=l.isAscii=(0,d.notImplemented)("buffer.isAscii"),F=l.btoa=ke.btoa,P=l.atob=globalThis.atob,D=l.kStringMaxLength=0,W=l.constants={MAX_LENGTH:v.kMaxLength,MAX_STRING_LENGTH:D};e.exports={Buffer:B,SlowBuffer:v.SlowBuffer,kMaxLength:v.kMaxLength,INSPECT_MAX_BYTES:v.INSPECT_MAX_BYTES,Blob:T,resolveObjectURL:k,transcode:x,btoa:F,atob:P,kStringMaxLength:D,constants:W,isUtf8:U,isAscii:O,File:S.File}}(Oe,Oe.exports);var pt=Oe.exports;function number(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function bytes(e,...l){if(!((d=e)instanceof Uint8Array||null!=d&&"object"==typeof d&&"Uint8Array"===d.constructor.name))throw new Error("Uint8Array expected");var d;if(l.length>0&&!l.includes(e.length))throw new Error(`Uint8Array expected of length ${l}, not of length=${e.length}`)}function exists(e,l=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(l&&e.finished)throw new Error("Hash#digest() has already been called")}function output(e,l){bytes(e);const d=l.outputLen;if(e.length<d)throw new Error(`digestInto() expects output buffer of length at least ${d}`)}const mt="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rotr=(e,l)=>e<<32-l|e>>>l,Bt=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function byteSwap32(e){for(let d=0;d<e.length;d++)e[d]=(l=e[d])<<24&4278190080|l<<8&16711680|l>>>8&65280|l>>>24&255;var l}function utf8ToBytes$1(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function toBytes(e){return"string"==typeof e&&(e=utf8ToBytes$1(e)),bytes(e),e}function concatBytes$1(...e){let l=0;for(let d=0;d<e.length;d++){const v=e[d];bytes(v),l+=v.length}const d=new Uint8Array(l);for(let l=0,v=0;l<e.length;l++){const S=e[l];d.set(S,v),v+=S.length}return d}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(e){const hashC=l=>e().update(toBytes(l)).digest(),l=e();return hashC.outputLen=l.outputLen,hashC.blockLen=l.blockLen,hashC.create=()=>e(),hashC}function randomBytes(e=32){if(mt&&"function"==typeof mt.getRandomValues)return mt.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const Maj=(e,l,d)=>e&l^e&d^l&d;class HashMD extends Hash{constructor(e,l,d,v){super(),this.blockLen=e,this.outputLen=l,this.padOffset=d,this.isLE=v,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){exists(this);const{view:l,buffer:d,blockLen:v}=this,S=(e=toBytes(e)).length;for(let B=0;B<S;){const T=Math.min(v-this.pos,S-B);if(T!==v)d.set(e.subarray(B,B+T),this.pos),this.pos+=T,B+=T,this.pos===v&&(this.process(l,0),this.pos=0);else{const l=createView(e);for(;v<=S-B;B+=v)this.process(l,B)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){exists(this),output(e,this),this.finished=!0;const{buffer:l,view:d,blockLen:v,isLE:S}=this;let{pos:B}=this;l[B++]=128,this.buffer.subarray(B).fill(0),this.padOffset>v-B&&(this.process(d,0),B=0);for(let e=B;e<v;e++)l[e]=0;!function(e,l,d,v){if("function"==typeof e.setBigUint64)return e.setBigUint64(l,d,v);const S=BigInt(32),B=BigInt(4294967295),T=Number(d>>S&B),k=Number(d&B),x=v?4:0,U=v?0:4;e.setUint32(l+x,T,v),e.setUint32(l+U,k,v)}(d,v-8,BigInt(8*this.length),S),this.process(d,0);const T=createView(e),k=this.outputLen;if(k%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const x=k/4,U=this.get();if(x>U.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<x;e++)T.setUint32(4*e,U[e],S)}digest(){const{buffer:e,outputLen:l}=this;this.digestInto(e);const d=e.slice(0,l);return this.destroy(),d}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:l,buffer:d,length:v,finished:S,destroyed:B,pos:T}=this;return e.length=v,e.pos=T,e.finished=S,e.destroyed=B,v%l&&e.buffer.set(d),e}}const kt=BigInt(2**32-1),It=BigInt(32);function fromBig(e,l=!1){return l?{h:Number(e&kt),l:Number(e>>It&kt)}:{h:0|Number(e>>It&kt),l:0|Number(e&kt)}}function split(e,l=!1){let d=new Uint32Array(e.length),v=new Uint32Array(e.length);for(let S=0;S<e.length;S++){const{h:B,l:T}=fromBig(e[S],l);[d[S],v[S]]=[B,T]}return[d,v]}const rotlSH=(e,l,d)=>e<<d|l>>>32-d,rotlSL=(e,l,d)=>l<<d|e>>>32-d,rotlBH=(e,l,d)=>l<<d-32|e>>>64-d,rotlBL=(e,l,d)=>e<<d-32|l>>>64-d;const _t={fromBig:fromBig,split:split,toBig:(e,l)=>BigInt(e>>>0)<<It|BigInt(l>>>0),shrSH:(e,l,d)=>e>>>d,shrSL:(e,l,d)=>e<<32-d|l>>>d,rotrSH:(e,l,d)=>e>>>d|l<<32-d,rotrSL:(e,l,d)=>e<<32-d|l>>>d,rotrBH:(e,l,d)=>e<<64-d|l>>>d-32,rotrBL:(e,l,d)=>e>>>d-32|l<<64-d,rotr32H:(e,l)=>l,rotr32L:(e,l)=>e,rotlSH:rotlSH,rotlSL:rotlSL,rotlBH:rotlBH,rotlBL:rotlBL,add:function(e,l,d,v){const S=(l>>>0)+(v>>>0);return{h:e+d+(S/2**32|0)|0,l:0|S}},add3L:(e,l,d)=>(e>>>0)+(l>>>0)+(d>>>0),add3H:(e,l,d,v)=>l+d+v+(e/2**32|0)|0,add4L:(e,l,d,v)=>(e>>>0)+(l>>>0)+(d>>>0)+(v>>>0),add4H:(e,l,d,v,S)=>l+d+v+S+(e/2**32|0)|0,add5H:(e,l,d,v,S,B)=>l+d+v+S+B+(e/2**32|0)|0,add5L:(e,l,d,v,S)=>(e>>>0)+(l>>>0)+(d>>>0)+(v>>>0)+(S>>>0)},[Mt,Rt]=(()=>_t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),xt=new Uint32Array(80),Ut=new Uint32Array(80);class SHA512 extends HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:l,Bh:d,Bl:v,Ch:S,Cl:B,Dh:T,Dl:k,Eh:x,El:U,Fh:O,Fl:F,Gh:P,Gl:D,Hh:W,Hl:j}=this;return[e,l,d,v,S,B,T,k,x,U,O,F,P,D,W,j]}set(e,l,d,v,S,B,T,k,x,U,O,F,P,D,W,j){this.Ah=0|e,this.Al=0|l,this.Bh=0|d,this.Bl=0|v,this.Ch=0|S,this.Cl=0|B,this.Dh=0|T,this.Dl=0|k,this.Eh=0|x,this.El=0|U,this.Fh=0|O,this.Fl=0|F,this.Gh=0|P,this.Gl=0|D,this.Hh=0|W,this.Hl=0|j}process(e,l){for(let d=0;d<16;d++,l+=4)xt[d]=e.getUint32(l),Ut[d]=e.getUint32(l+=4);for(let e=16;e<80;e++){const l=0|xt[e-15],d=0|Ut[e-15],v=_t.rotrSH(l,d,1)^_t.rotrSH(l,d,8)^_t.shrSH(l,d,7),S=_t.rotrSL(l,d,1)^_t.rotrSL(l,d,8)^_t.shrSL(l,d,7),B=0|xt[e-2],T=0|Ut[e-2],k=_t.rotrSH(B,T,19)^_t.rotrBH(B,T,61)^_t.shrSH(B,T,6),x=_t.rotrSL(B,T,19)^_t.rotrBL(B,T,61)^_t.shrSL(B,T,6),U=_t.add4L(S,x,Ut[e-7],Ut[e-16]),O=_t.add4H(U,v,k,xt[e-7],xt[e-16]);xt[e]=0|O,Ut[e]=0|U}let{Ah:d,Al:v,Bh:S,Bl:B,Ch:T,Cl:k,Dh:x,Dl:U,Eh:O,El:F,Fh:P,Fl:D,Gh:W,Gl:j,Hh:z,Hl:Q}=this;for(let e=0;e<80;e++){const l=_t.rotrSH(O,F,14)^_t.rotrSH(O,F,18)^_t.rotrBH(O,F,41),K=_t.rotrSL(O,F,14)^_t.rotrSL(O,F,18)^_t.rotrBL(O,F,41),H=O&P^~O&W,q=F&D^~F&j,G=_t.add5L(Q,K,q,Rt[e],Ut[e]),J=_t.add5H(G,z,l,H,Mt[e],xt[e]),$=0|G,ee=_t.rotrSH(d,v,28)^_t.rotrBH(d,v,34)^_t.rotrBH(d,v,39),te=_t.rotrSL(d,v,28)^_t.rotrBL(d,v,34)^_t.rotrBL(d,v,39),re=d&S^d&T^S&T,ne=v&B^v&k^B&k;z=0|W,Q=0|j,W=0|P,j=0|D,P=0|O,D=0|F,({h:O,l:F}=_t.add(0|x,0|U,0|J,0|$)),x=0|T,U=0|k,T=0|S,k=0|B,S=0|d,B=0|v;const oe=_t.add3L($,te,ne);d=_t.add3H(oe,J,ee,re),v=0|oe}({h:d,l:v}=_t.add(0|this.Ah,0|this.Al,0|d,0|v)),({h:S,l:B}=_t.add(0|this.Bh,0|this.Bl,0|S,0|B)),({h:T,l:k}=_t.add(0|this.Ch,0|this.Cl,0|T,0|k)),({h:x,l:U}=_t.add(0|this.Dh,0|this.Dl,0|x,0|U)),({h:O,l:F}=_t.add(0|this.Eh,0|this.El,0|O,0|F)),({h:P,l:D}=_t.add(0|this.Fh,0|this.Fl,0|P,0|D)),({h:W,l:j}=_t.add(0|this.Gh,0|this.Gl,0|W,0|j)),({h:z,l:Q}=_t.add(0|this.Hh,0|this.Hl,0|z,0|Q)),this.set(d,v,S,B,T,k,x,U,O,F,P,D,W,j,z,Q)}roundClean(){xt.fill(0),Ut.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const At=wrapConstructor((()=>new SHA512)),Ct=BigInt(0),Ft=BigInt(1),Pt=BigInt(2);function isBytes(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function abytes(e){if(!isBytes(e))throw new Error("Uint8Array expected")}function abool(e,l){if("boolean"!=typeof l)throw new Error(`${e} must be valid boolean, got "${l}".`)}const Dt=Array.from({length:256},((e,l)=>l.toString(16).padStart(2,"0")));function bytesToHex(e){abytes(e);let l="";for(let d=0;d<e.length;d++)l+=Dt[e[d]];return l}function numberToHexUnpadded(e){const l=e.toString(16);return 1&l.length?`0${l}`:l}function hexToNumber(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const Wt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16(e){return e>=Wt._0&&e<=Wt._9?e-Wt._0:e>=Wt._A&&e<=Wt._F?e-(Wt._A-10):e>=Wt._a&&e<=Wt._f?e-(Wt._a-10):void 0}function hexToBytes(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const l=e.length,d=l/2;if(l%2)throw new Error("padded hex string expected, got unpadded hex of length "+l);const v=new Uint8Array(d);for(let l=0,S=0;l<d;l++,S+=2){const d=asciiToBase16(e.charCodeAt(S)),B=asciiToBase16(e.charCodeAt(S+1));if(void 0===d||void 0===B){const l=e[S]+e[S+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+S)}v[l]=16*d+B}return v}function bytesToNumberBE(e){return hexToNumber(bytesToHex(e))}function bytesToNumberLE(e){return abytes(e),hexToNumber(bytesToHex(Uint8Array.from(e).reverse()))}function numberToBytesBE(e,l){return hexToBytes(e.toString(16).padStart(2*l,"0"))}function numberToBytesLE(e,l){return numberToBytesBE(e,l).reverse()}function ensureBytes(e,l,d){let v;if("string"==typeof l)try{v=hexToBytes(l)}catch(d){throw new Error(`${e} must be valid hex string, got "${l}". Cause: ${d}`)}else{if(!isBytes(l))throw new Error(`${e} must be hex string or Uint8Array`);v=Uint8Array.from(l)}const S=v.length;if("number"==typeof d&&S!==d)throw new Error(`${e} expected ${d} bytes, got ${S}`);return v}function concatBytes(...e){let l=0;for(let d=0;d<e.length;d++){const v=e[d];abytes(v),l+=v.length}const d=new Uint8Array(l);for(let l=0,v=0;l<e.length;l++){const S=e[l];d.set(S,v),v+=S.length}return d}function equalBytes(e,l){if(e.length!==l.length)return!1;let d=0;for(let v=0;v<e.length;v++)d|=e[v]^l[v];return 0===d}function utf8ToBytes(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}const isPosBig=e=>"bigint"==typeof e&&Ct<=e;function inRange$1(e,l,d){return isPosBig(e)&&isPosBig(l)&&isPosBig(d)&&l<=e&&e<d}function aInRange(e,l,d,v){if(!inRange$1(l,d,v))throw new Error(`expected valid ${e}: ${d} <= n < ${v}, got ${typeof l} ${l}`)}const bitMask=e=>(Pt<<BigInt(e-1))-Ft,u8n=e=>new Uint8Array(e),u8fr=e=>Uint8Array.from(e);function createHmacDrbg(e,l,d){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof l||l<2)throw new Error("qByteLen must be a number");if("function"!=typeof d)throw new Error("hmacFn must be a function");let v=u8n(e),S=u8n(e),B=0;const reset=()=>{v.fill(1),S.fill(0),B=0},h=(...e)=>d(S,v,...e),reseed=(e=u8n())=>{S=h(u8fr([0]),e),v=h(),0!==e.length&&(S=h(u8fr([1]),e),v=h())},gen=()=>{if(B++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const d=[];for(;e<l;){v=h();const l=v.slice();d.push(l),e+=v.length}return concatBytes(...d)};return(e,l)=>{let d;for(reset(),reseed(e);!(d=l(gen()));)reseed();return reset(),d}}const Vt={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||isBytes(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,l)=>l.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function validateObject(e,l,d={}){const checkField=(l,d,v)=>{const S=Vt[d];if("function"!=typeof S)throw new Error(`Invalid validator "${d}", expected function`);const B=e[l];if(!(v&&void 0===B||S(B,e)))throw new Error(`Invalid param ${String(l)}=${B} (${typeof B}), expected ${d}`)};for(const[e,d]of Object.entries(l))checkField(e,d,!1);for(const[e,l]of Object.entries(d))checkField(e,l,!0);return e}function memoized(e){const l=new WeakMap;return(d,...v)=>{const S=l.get(d);if(void 0!==S)return S;const B=e(d,...v);return l.set(d,B),B}}const jt=Object.freeze(Object.defineProperty({__proto__:null,aInRange:aInRange,abool:abool,abytes:abytes,bitGet:function(e,l){return e>>BigInt(l)&Ft},bitLen:function(e){let l;for(l=0;e>Ct;e>>=Ft,l+=1);return l},bitMask:bitMask,bitSet:function(e,l,d){return e|(d?Ft:Ct)<<BigInt(l)},bytesToHex:bytesToHex,bytesToNumberBE:bytesToNumberBE,bytesToNumberLE:bytesToNumberLE,concatBytes:concatBytes,createHmacDrbg:createHmacDrbg,ensureBytes:ensureBytes,equalBytes:equalBytes,hexToBytes:hexToBytes,hexToNumber:hexToNumber,inRange:inRange$1,isBytes:isBytes,memoized:memoized,notImplemented:()=>{throw new Error("not implemented")},numberToBytesBE:numberToBytesBE,numberToBytesLE:numberToBytesLE,numberToHexUnpadded:numberToHexUnpadded,numberToVarBytesBE:function(e){return hexToBytes(numberToHexUnpadded(e))},utf8ToBytes:utf8ToBytes,validateObject:validateObject},Symbol.toStringTag,{value:"Module"})),zt=BigInt(0),Zt=BigInt(1),Qt=BigInt(2),Kt=BigInt(3),Ht=BigInt(4),qt=BigInt(5),Gt=BigInt(8);function mod(e,l){const d=e%l;return d>=zt?d:l+d}function pow(e,l,d){if(d<=zt||l<zt)throw new Error("Expected power/modulo > 0");if(d===Zt)return zt;let v=Zt;for(;l>zt;)l&Zt&&(v=v*e%d),e=e*e%d,l>>=Zt;return v}function pow2(e,l,d){let v=e;for(;l-- >zt;)v*=v,v%=d;return v}function invert(e,l){if(e===zt||l<=zt)throw new Error(`invert: expected positive integers, got n=${e} mod=${l}`);let d=mod(e,l),v=l,S=zt,B=Zt;for(;d!==zt;){const e=v%d,l=S-B*(v/d);v=d,d=e,S=B,B=l}if(v!==Zt)throw new Error("invert: does not exist");return mod(S,l)}function FpSqrt(e){if(e%Ht===Kt){const l=(e+Zt)/Ht;return function(e,d){const v=e.pow(d,l);if(!e.eql(e.sqr(v),d))throw new Error("Cannot find square root");return v}}if(e%Gt===qt){const l=(e-qt)/Gt;return function(e,d){const v=e.mul(d,Qt),S=e.pow(v,l),B=e.mul(d,S),T=e.mul(e.mul(B,Qt),S),k=e.mul(B,e.sub(T,e.ONE));if(!e.eql(e.sqr(k),d))throw new Error("Cannot find square root");return k}}return function(e){const l=(e-Zt)/Qt;let d,v,S;for(d=e-Zt,v=0;d%Qt===zt;d/=Qt,v++);for(S=Qt;S<e&&pow(S,l,e)!==e-Zt;S++);if(1===v){const l=(e+Zt)/Ht;return function(e,d){const v=e.pow(d,l);if(!e.eql(e.sqr(v),d))throw new Error("Cannot find square root");return v}}const B=(d+Zt)/Qt;return function(e,T){if(e.pow(T,l)===e.neg(e.ONE))throw new Error("Cannot find square root");let k=v,x=e.pow(e.mul(e.ONE,S),d),U=e.pow(T,B),O=e.pow(T,d);for(;!e.eql(O,e.ONE);){if(e.eql(O,e.ZERO))return e.ZERO;let l=1;for(let d=e.sqr(O);l<k&&!e.eql(d,e.ONE);l++)d=e.sqr(d);const d=e.pow(x,Zt<<BigInt(k-l-1));x=e.sqr(d),U=e.mul(U,d),O=e.mul(O,x),k=l}return U}}(e)}BigInt(9),BigInt(16);const isNegativeLE=(e,l)=>(mod(e,l)&Zt)===Zt,Yt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(e){return validateObject(e,Yt.reduce(((e,l)=>(e[l]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function nLength(e,l){const d=void 0!==l?l:e.toString(2).length;return{nBitLength:d,nByteLength:Math.ceil(d/8)}}function Field(e,l,d=!1,v={}){if(e<=zt)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:S,nByteLength:B}=nLength(e,l);if(B>2048)throw new Error("Field lengths over 2048 bytes are not supported");const T=FpSqrt(e),k=Object.freeze({ORDER:e,BITS:S,BYTES:B,MASK:bitMask(S),ZERO:zt,ONE:Zt,create:l=>mod(l,e),isValid:l=>{if("bigint"!=typeof l)throw new Error("Invalid field element: expected bigint, got "+typeof l);return zt<=l&&l<e},is0:e=>e===zt,isOdd:e=>(e&Zt)===Zt,neg:l=>mod(-l,e),eql:(e,l)=>e===l,sqr:l=>mod(l*l,e),add:(l,d)=>mod(l+d,e),sub:(l,d)=>mod(l-d,e),mul:(l,d)=>mod(l*d,e),pow:(e,l)=>function(e,l,d){if(d<zt)throw new Error("Expected power > 0");if(d===zt)return e.ONE;if(d===Zt)return l;let v=e.ONE,S=l;for(;d>zt;)d&Zt&&(v=e.mul(v,S)),S=e.sqr(S),d>>=Zt;return v}(k,e,l),div:(l,d)=>mod(l*invert(d,e),e),sqrN:e=>e*e,addN:(e,l)=>e+l,subN:(e,l)=>e-l,mulN:(e,l)=>e*l,inv:l=>invert(l,e),sqrt:v.sqrt||(e=>T(k,e)),invertBatch:e=>function(e,l){const d=new Array(l.length),v=l.reduce(((l,v,S)=>e.is0(v)?l:(d[S]=l,e.mul(l,v))),e.ONE),S=e.inv(v);return l.reduceRight(((l,v,S)=>e.is0(v)?l:(d[S]=e.mul(l,d[S]),e.mul(l,v))),S),d}(k,e),cmov:(e,l,d)=>d?l:e,toBytes:e=>d?numberToBytesLE(e,B):numberToBytesBE(e,B),fromBytes:e=>{if(e.length!==B)throw new Error(`Fp.fromBytes: expected ${B}, got ${e.length}`);return d?bytesToNumberLE(e):bytesToNumberBE(e)}});return Object.freeze(k)}function getFieldBytesLength(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const l=e.toString(2).length;return Math.ceil(l/8)}function getMinHashLength(e){const l=getFieldBytesLength(e);return l+Math.ceil(l/2)}const Jt=BigInt(0),$t=BigInt(1),Xt=new WeakMap,tr=new WeakMap;function wNAF(e,l){const constTimeNegate=(e,l)=>{const d=l.negate();return e?d:l},validateW=e=>{if(!Number.isSafeInteger(e)||e<=0||e>l)throw new Error(`Wrong window size=${e}, should be [1..${l}]`)},opts=e=>{validateW(e);return{windows:Math.ceil(l/e)+1,windowSize:2**(e-1)}};return{constTimeNegate:constTimeNegate,unsafeLadder(l,d){let v=e.ZERO,S=l;for(;d>Jt;)d&$t&&(v=v.add(S)),S=S.double(),d>>=$t;return v},precomputeWindow(e,l){const{windows:d,windowSize:v}=opts(l),S=[];let B=e,T=B;for(let e=0;e<d;e++){T=B,S.push(T);for(let e=1;e<v;e++)T=T.add(B),S.push(T);B=T.double()}return S},wNAF(l,d,v){const{windows:S,windowSize:B}=opts(l);let T=e.ZERO,k=e.BASE;const x=BigInt(2**l-1),U=2**l,O=BigInt(l);for(let e=0;e<S;e++){const l=e*B;let S=Number(v&x);v>>=O,S>B&&(S-=U,v+=$t);const F=l,P=l+Math.abs(S)-1,D=e%2!=0,W=S<0;0===S?k=k.add(constTimeNegate(D,d[F])):T=T.add(constTimeNegate(W,d[P]))}return{p:T,f:k}},wNAFCached(e,l,d){const v=tr.get(e)||1;let S=Xt.get(e);return S||(S=this.precomputeWindow(e,v),1!==v&&Xt.set(e,d(S))),this.wNAF(v,S,l)},setWindowSize(e,l){validateW(l),tr.set(e,l),Xt.delete(e)}}}function validateBasic(e){return validateField(e.Fp),validateObject(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const rr=BigInt(0),nr=BigInt(1),hr=BigInt(2),fr=BigInt(8),pr={zip215:!0};function twistedEdwards(e){const l=function(e){const l=validateBasic(e);return validateObject(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...l})}(e),{Fp:d,n:v,prehash:S,hash:B,randomBytes:T,nByteLength:k,h:x}=l,U=hr<<BigInt(8*k)-nr,O=d.create,F=l.uvRatio||((e,l)=>{try{return{isValid:!0,value:d.sqrt(e*d.inv(l))}}catch(e){return{isValid:!1,value:rr}}}),P=l.adjustScalarBytes||(e=>e),D=l.domain||((e,l,d)=>{if(abool("phflag",d),l.length||d)throw new Error("Contexts/pre-hash are not supported");return e});function aCoordinate(e,l){aInRange("coordinate "+e,l,rr,U)}function assertPoint(e){if(!(e instanceof Point))throw new Error("ExtendedPoint expected")}const W=memoized(((e,l)=>{const{ex:v,ey:S,ez:B}=e,T=e.is0();null==l&&(l=T?fr:d.inv(B));const k=O(v*l),x=O(S*l),U=O(B*l);if(T)return{x:rr,y:nr};if(U!==nr)throw new Error("invZ was invalid");return{x:k,y:x}})),j=memoized((e=>{const{a:d,d:v}=l;if(e.is0())throw new Error("bad point: ZERO");const{ex:S,ey:B,ez:T,et:k}=e,x=O(S*S),U=O(B*B),F=O(T*T),P=O(F*F),D=O(x*d);if(O(F*O(D+U))!==O(P+O(v*O(x*U))))throw new Error("bad point: equation left != right (1)");if(O(S*B)!==O(T*k))throw new Error("bad point: equation left != right (2)");return!0}));class Point{constructor(e,l,d,v){this.ex=e,this.ey=l,this.ez=d,this.et=v,aCoordinate("x",e),aCoordinate("y",l),aCoordinate("z",d),aCoordinate("t",v),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof Point)throw new Error("extended point not allowed");const{x:l,y:d}=e||{};return aCoordinate("x",l),aCoordinate("y",d),new Point(l,d,nr,O(l*d))}static normalizeZ(e){const l=d.invertBatch(e.map((e=>e.ez)));return e.map(((e,d)=>e.toAffine(l[d]))).map(Point.fromAffine)}_setWindowSize(e){K.setWindowSize(this,e)}assertValidity(){j(this)}equals(e){assertPoint(e);const{ex:l,ey:d,ez:v}=this,{ex:S,ey:B,ez:T}=e,k=O(l*T),x=O(S*v),U=O(d*T),F=O(B*v);return k===x&&U===F}is0(){return this.equals(Point.ZERO)}negate(){return new Point(O(-this.ex),this.ey,this.ez,O(-this.et))}double(){const{a:e}=l,{ex:d,ey:v,ez:S}=this,B=O(d*d),T=O(v*v),k=O(hr*O(S*S)),x=O(e*B),U=d+v,F=O(O(U*U)-B-T),P=x+T,D=P-k,W=x-T,j=O(F*D),z=O(P*W),Q=O(F*W),K=O(D*P);return new Point(j,z,K,Q)}add(e){assertPoint(e);const{a:d,d:v}=l,{ex:S,ey:B,ez:T,et:k}=this,{ex:x,ey:U,ez:F,et:P}=e;if(d===BigInt(-1)){const e=O((B-S)*(U+x)),l=O((B+S)*(U-x)),d=O(l-e);if(d===rr)return this.double();const v=O(T*hr*P),D=O(k*hr*F),W=D+v,j=l+e,z=D-v,Q=O(W*d),K=O(j*z),H=O(W*z),q=O(d*j);return new Point(Q,K,q,H)}const D=O(S*x),W=O(B*U),j=O(k*v*P),z=O(T*F),Q=O((S+B)*(x+U)-D-W),K=z-j,H=z+j,q=O(W-d*D),G=O(Q*K),J=O(H*q),$=O(Q*q),ee=O(K*H);return new Point(G,J,ee,$)}subtract(e){return this.add(e.negate())}wNAF(e){return K.wNAFCached(this,e,Point.normalizeZ)}multiply(e){const l=e;aInRange("scalar",l,nr,v);const{p:d,f:S}=this.wNAF(l);return Point.normalizeZ([d,S])[0]}multiplyUnsafe(e){const l=e;return aInRange("scalar",l,rr,v),l===rr?Q:this.equals(Q)||l===nr?this:this.equals(z)?this.wNAF(l).p:K.unsafeLadder(this,l)}isSmallOrder(){return this.multiplyUnsafe(x).is0()}isTorsionFree(){return K.unsafeLadder(this,v).is0()}toAffine(e){return W(this,e)}clearCofactor(){const{h:e}=l;return e===nr?this:this.multiplyUnsafe(e)}static fromHex(e,v=!1){const{d:S,a:B}=l,T=d.BYTES;e=ensureBytes("pointHex",e,T),abool("zip215",v);const k=e.slice(),x=e[T-1];k[T-1]=-129&x;const P=bytesToNumberLE(k),D=v?U:d.ORDER;aInRange("pointHex.y",P,rr,D);const W=O(P*P),j=O(W-nr),z=O(S*W-B);let{isValid:Q,value:K}=F(j,z);if(!Q)throw new Error("Point.fromHex: invalid y coordinate");const H=(K&nr)===nr,q=!!(128&x);if(!v&&K===rr&&q)throw new Error("Point.fromHex: x=0 and x_0=1");return q!==H&&(K=O(-K)),Point.fromAffine({x:K,y:P})}static fromPrivateKey(e){return getExtendedPublicKey(e).point}toRawBytes(){const{x:e,y:l}=this.toAffine(),v=numberToBytesLE(l,d.BYTES);return v[v.length-1]|=e&nr?128:0,v}toHex(){return bytesToHex(this.toRawBytes())}}Point.BASE=new Point(l.Gx,l.Gy,nr,O(l.Gx*l.Gy)),Point.ZERO=new Point(rr,nr,nr,rr);const{BASE:z,ZERO:Q}=Point,K=wNAF(Point,8*k);function modN(e){return mod(e,v)}function modN_LE(e){return modN(bytesToNumberLE(e))}function getExtendedPublicKey(e){const l=k;e=ensureBytes("private key",e,l);const d=ensureBytes("hashed private key",B(e),2*l),v=P(d.slice(0,l)),S=d.slice(l,2*l),T=modN_LE(v),x=z.multiply(T),U=x.toRawBytes();return{head:v,prefix:S,scalar:T,point:x,pointBytes:U}}function hashDomainToScalar(e=new Uint8Array,...l){const d=concatBytes(...l);return modN_LE(B(D(d,ensureBytes("context",e),!!S)))}const H=pr;z._setWindowSize(8);return{CURVE:l,getPublicKey:function(e){return getExtendedPublicKey(e).pointBytes},sign:function(e,l,B={}){e=ensureBytes("message",e),S&&(e=S(e));const{prefix:T,scalar:x,pointBytes:U}=getExtendedPublicKey(l),O=hashDomainToScalar(B.context,T,e),F=z.multiply(O).toRawBytes(),P=modN(O+hashDomainToScalar(B.context,F,U,e)*x);return aInRange("signature.s",P,rr,v),ensureBytes("result",concatBytes(F,numberToBytesLE(P,d.BYTES)),2*k)},verify:function(e,l,v,B=H){const{context:T,zip215:k}=B,x=d.BYTES;e=ensureBytes("signature",e,2*x),l=ensureBytes("message",l),void 0!==k&&abool("zip215",k),S&&(l=S(l));const U=bytesToNumberLE(e.slice(x,2*x));let O,F,P;try{O=Point.fromHex(v,k),F=Point.fromHex(e.slice(0,x),k),P=z.multiplyUnsafe(U)}catch(e){return!1}if(!k&&O.isSmallOrder())return!1;const D=hashDomainToScalar(T,F.toRawBytes(),O.toRawBytes(),l);return F.add(O.multiplyUnsafe(D)).subtract(P).clearCofactor().equals(Point.ZERO)},ExtendedPoint:Point,utils:{getExtendedPublicKey:getExtendedPublicKey,randomPrivateKey:()=>T(d.BYTES),precompute:(e=8,l=Point.BASE)=>(l._setWindowSize(e),l.multiply(BigInt(3)),l)}}}const gr=bytesToNumberBE;function i2osp(e,l){if(e<0||e>=1<<8*l)throw new Error(`bad I2OSP call: value=${e} length=${l}`);const d=Array.from({length:l}).fill(0);for(let v=l-1;v>=0;v--)d[v]=255&e,e>>>=8;return new Uint8Array(d)}function strxor(e,l){const d=new Uint8Array(e.length);for(let v=0;v<e.length;v++)d[v]=e[v]^l[v];return d}function anum(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function expand_message_xmd(e,l,d,v){abytes(e),abytes(l),anum(d),l.length>255&&(l=v(concatBytes(utf8ToBytes("H2C-OVERSIZE-DST-"),l)));const{outputLen:S,blockLen:B}=v,T=Math.ceil(d/S);if(T>255)throw new Error("Invalid xmd length");const k=concatBytes(l,i2osp(l.length,1)),x=i2osp(0,B),U=i2osp(d,2),O=new Array(T),F=v(concatBytes(x,e,U,i2osp(0,1),k));O[0]=v(concatBytes(F,i2osp(1,1),k));for(let e=1;e<=T;e++){const l=[strxor(F,O[e-1]),i2osp(e+1,1),k];O[e]=v(concatBytes(...l))}return concatBytes(...O).slice(0,d)}function hash_to_field(e,l,d){validateObject(d,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:v,k:S,m:B,hash:T,expand:k,DST:x}=d;abytes(e),anum(l);const U="string"==typeof x?utf8ToBytes(x):x,O=v.toString(2).length,F=Math.ceil((O+S)/8),P=l*B*F;let D;if("xmd"===k)D=expand_message_xmd(e,U,P,T);else if("xof"===k)D=function(e,l,d,v,S){if(abytes(e),abytes(l),anum(d),l.length>255){const e=Math.ceil(2*v/8);l=S.create({dkLen:e}).update(utf8ToBytes("H2C-OVERSIZE-DST-")).update(l).digest()}if(d>65535||l.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return S.create({dkLen:d}).update(e).update(i2osp(d,2)).update(l).update(i2osp(l.length,1)).digest()}(e,U,P,S,T);else{if("_internal_pass"!==k)throw new Error('expand must be "xmd" or "xof"');D=e}const W=new Array(l);for(let e=0;e<l;e++){const l=new Array(B);for(let d=0;d<B;d++){const S=F*(d+e*B),T=D.subarray(S,S+F);l[d]=mod(gr(T),v)}W[e]=l}return W}function createHasher(e,l,d){if("function"!=typeof l)throw new Error("mapToCurve() must be defined");return{hashToCurve(v,S){const B=hash_to_field(v,2,{...d,DST:d.DST,...S}),T=e.fromAffine(l(B[0])),k=e.fromAffine(l(B[1])),x=T.add(k).clearCofactor();return x.assertValidity(),x},encodeToCurve(v,S){const B=hash_to_field(v,1,{...d,DST:d.encodeDST,...S}),T=e.fromAffine(l(B[0])).clearCofactor();return T.assertValidity(),T},mapToCurve(d){if(!Array.isArray(d))throw new Error("mapToCurve: expected array of bigints");for(const e of d)if("bigint"!=typeof e)throw new Error(`mapToCurve: expected array of bigints, got ${e} in array`);const v=e.fromAffine(l(d)).clearCofactor();return v.assertValidity(),v}}}const br=BigInt(0),wr=BigInt(1);function montgomery(e){const l=(validateObject(d=e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...d}));var d;const{P:v}=l,modP=e=>mod(e,v),S=l.montgomeryBits,B=Math.ceil(S/8),T=l.nByteLength,k=l.adjustScalarBytes||(e=>e),x=l.powPminus2||(e=>pow(e,v-BigInt(2),v));function cswap(e,l,d){const v=modP(e*(l-d));return[l=modP(l-v),d=modP(d+v)]}const U=(l.a-BigInt(2))/BigInt(4);function encodeUCoordinate(e){return numberToBytesLE(modP(e),B)}function scalarMult(e,l){const d=function(e){const l=ensureBytes("u coordinate",e,B);return 32===T&&(l[31]&=127),bytesToNumberLE(l)}(l),O=function(e){const l=ensureBytes("scalar",e),d=l.length;if(d!==B&&d!==T)throw new Error(`Expected ${B} or ${T} bytes, got ${d}`);return bytesToNumberLE(k(l))}(e),F=function(e,l){aInRange("u",e,br,v),aInRange("scalar",l,br,v);const d=l,B=e;let T,k=wr,O=br,F=e,P=wr,D=br;for(let e=BigInt(S-1);e>=br;e--){const l=d>>e&wr;D^=l,T=cswap(D,k,F),k=T[0],F=T[1],T=cswap(D,O,P),O=T[0],P=T[1],D=l;const v=k+O,S=modP(v*v),x=k-O,W=modP(x*x),j=S-W,z=F+P,Q=modP((F-P)*v),K=modP(z*x),H=Q+K,q=Q-K;F=modP(H*H),P=modP(B*modP(q*q)),k=modP(S*W),O=modP(j*(S+modP(U*j)))}T=cswap(D,k,F),k=T[0],F=T[1],T=cswap(D,O,P),O=T[0],P=T[1];const W=x(O);return modP(k*W)}(d,O);if(F===br)throw new Error("Invalid private or public key received");return encodeUCoordinate(F)}const O=encodeUCoordinate(l.Gu);function scalarMultBase(e){return scalarMult(e,O)}return{scalarMult:scalarMult,scalarMultBase:scalarMultBase,getSharedSecret:(e,l)=>scalarMult(e,l),getPublicKey:e=>scalarMultBase(e),utils:{randomPrivateKey:()=>l.randomBytes(l.nByteLength)},GuBytes:O}}const vr=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Sr=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Br=BigInt(0),Tr=BigInt(1),kr=BigInt(2),Ir=BigInt(3),Nr=BigInt(5),_r=BigInt(8);function ed25519_pow_2_252_3(e){const l=BigInt(10),d=BigInt(20),v=BigInt(40),S=BigInt(80),B=vr,T=e*e%B*e%B,k=pow2(T,kr,B)*T%B,x=pow2(k,Tr,B)*e%B,U=pow2(x,Nr,B)*x%B,O=pow2(U,l,B)*U%B,F=pow2(O,d,B)*O%B,P=pow2(F,v,B)*F%B,D=pow2(P,S,B)*P%B,W=pow2(D,S,B)*P%B,j=pow2(W,l,B)*U%B;return{pow_p_5_8:pow2(j,kr,B)*e%B,b2:T}}function adjustScalarBytes(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function uvRatio(e,l){const d=vr,v=mod(l*l*l,d),S=mod(v*v*l,d);let B=mod(e*v*ed25519_pow_2_252_3(e*S).pow_p_5_8,d);const T=mod(l*B*B,d),k=B,x=mod(B*Sr,d),U=T===e,O=T===mod(-e,d),F=T===mod(-e*Sr,d);return U&&(B=k),(O||F)&&(B=x),isNegativeLE(B,d)&&(B=mod(-B,d)),{isValid:U||O,value:B}}const Mr=(()=>Field(vr,void 0,!0))(),Rr=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Mr,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:_r,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:At,randomBytes:randomBytes,adjustScalarBytes:adjustScalarBytes,uvRatio:uvRatio}))(),Ur=(()=>twistedEdwards(Rr))();function ed25519_domain(e,l,d){if(l.length>255)throw new Error("Context is too big");return concatBytes$1(utf8ToBytes$1("SigEd25519 no Ed25519 collisions"),new Uint8Array([d?1:0,l.length]),l,e)}const Ar=(()=>twistedEdwards({...Rr,domain:ed25519_domain}))(),Or=(()=>twistedEdwards(Object.assign({},Rr,{domain:ed25519_domain,prehash:At})))(),Cr=(()=>montgomery({P:vr,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const l=vr,{pow_p_5_8:d,b2:v}=ed25519_pow_2_252_3(e);return mod(pow2(d,Ir,l)*v,l)},adjustScalarBytes:adjustScalarBytes,randomBytes:randomBytes}))();function edwardsToMontgomeryPub(e){const{y:l}=Ur.ExtendedPoint.fromHex(e),d=BigInt(1);return Mr.toBytes(Mr.create((d+l)*Mr.inv(d-l)))}const Fr=edwardsToMontgomeryPub;const Lr=(()=>(Mr.ORDER+Ir)/_r)(),Dr=(()=>Mr.pow(kr,Lr))(),Wr=(()=>Mr.sqrt(Mr.neg(Mr.ONE)))();const Vr=(()=>function(e,l){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const d=e.sqrt(l);return e.isOdd(d)?e.neg(d):d}(Mr,Mr.neg(BigInt(486664))))();function map_to_curve_elligator2_edwards25519(e){const{xMn:l,xMd:d,yMn:v,yMd:S}=function(e){const l=(Mr.ORDER-Nr)/_r,d=BigInt(486662);let v=Mr.sqr(e);v=Mr.mul(v,kr);let S=Mr.add(v,Mr.ONE),B=Mr.neg(d),T=Mr.sqr(S),k=Mr.mul(T,S),x=Mr.mul(v,d);x=Mr.mul(x,B),x=Mr.add(x,T),x=Mr.mul(x,B);let U=Mr.sqr(k);T=Mr.sqr(U),U=Mr.mul(U,k),U=Mr.mul(U,x),T=Mr.mul(T,U);let O=Mr.pow(T,l);O=Mr.mul(O,U);let F=Mr.mul(O,Wr);T=Mr.sqr(O),T=Mr.mul(T,k);let P=Mr.eql(T,x),D=Mr.cmov(F,O,P),W=Mr.mul(B,v),j=Mr.mul(O,e);j=Mr.mul(j,Dr);let z=Mr.mul(j,Wr),Q=Mr.mul(x,v);T=Mr.sqr(j),T=Mr.mul(T,k);let K=Mr.eql(T,Q),H=Mr.cmov(z,j,K);T=Mr.sqr(D),T=Mr.mul(T,k);let q=Mr.eql(T,x),G=Mr.cmov(W,B,q),J=Mr.cmov(H,D,q),$=Mr.isOdd(J);return J=Mr.cmov(J,Mr.neg(J),q!==$),{xMn:G,xMd:S,yMn:J,yMd:Tr}}(e);let B=Mr.mul(l,S);B=Mr.mul(B,Vr);let T=Mr.mul(d,v),k=Mr.sub(l,d),x=Mr.add(l,d),U=Mr.mul(T,x),O=Mr.eql(U,Mr.ZERO);B=Mr.cmov(B,Mr.ZERO,O),T=Mr.cmov(T,Mr.ONE,O),k=Mr.cmov(k,Mr.ONE,O),x=Mr.cmov(x,Mr.ONE,O);const F=Mr.invertBatch([T,x]);return{x:Mr.mul(B,F[0]),y:Mr.mul(k,F[1])}}const jr=(()=>createHasher(Ur.ExtendedPoint,(e=>map_to_curve_elligator2_edwards25519(e[0])),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:Mr.ORDER,m:1,k:128,expand:"xmd",hash:At}))(),zr=(()=>jr.hashToCurve)(),Zr=(()=>jr.encodeToCurve)();function assertRstPoint(e){if(!(e instanceof RistPoint))throw new Error("RistrettoPoint expected")}const Qr=Sr,qr=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Gr=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Yr=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),$r=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),invertSqrt=e=>uvRatio(Tr,e),en=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),bytes255ToNumberLE=e=>Ur.CURVE.Fp.create(bytesToNumberLE(e)&en);function calcElligatorRistrettoMap(e){const{d:l}=Ur.CURVE,d=Ur.CURVE.Fp.ORDER,v=Ur.CURVE.Fp.create,S=v(Qr*e*e),B=v((S+Tr)*Yr);let T=BigInt(-1);const k=v((T-l*S)*v(S+l));let{isValid:x,value:U}=uvRatio(B,k),O=v(U*e);isNegativeLE(O,d)||(O=v(-O)),x||(U=O),x||(T=S);const F=v(T*(S-Tr)*$r-k),P=U*U,D=v((U+U)*k),W=v(F*qr),j=v(Tr-P),z=v(Tr+P);return new Ur.ExtendedPoint(v(D*z),v(j*W),v(W*z),v(D*j))}class RistPoint{constructor(e){this.ep=e}static fromAffine(e){return new RistPoint(Ur.ExtendedPoint.fromAffine(e))}static hashToCurve(e){e=ensureBytes("ristrettoHash",e,64);const l=calcElligatorRistrettoMap(bytes255ToNumberLE(e.slice(0,32))),d=calcElligatorRistrettoMap(bytes255ToNumberLE(e.slice(32,64)));return new RistPoint(l.add(d))}static fromHex(e){e=ensureBytes("ristrettoHex",e,32);const{a:l,d:d}=Ur.CURVE,v=Ur.CURVE.Fp.ORDER,S=Ur.CURVE.Fp.create,B="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",T=bytes255ToNumberLE(e);if(!equalBytes(numberToBytesLE(T,32),e)||isNegativeLE(T,v))throw new Error(B);const k=S(T*T),x=S(Tr+l*k),U=S(Tr-l*k),O=S(x*x),F=S(U*U),P=S(l*d*O-F),{isValid:D,value:W}=invertSqrt(S(P*F)),j=S(W*U),z=S(W*j*P);let Q=S((T+T)*j);isNegativeLE(Q,v)&&(Q=S(-Q));const K=S(x*z),H=S(Q*K);if(!D||isNegativeLE(H,v)||K===Br)throw new Error(B);return new RistPoint(new Ur.ExtendedPoint(Q,K,Tr,H))}toRawBytes(){let{ex:e,ey:l,ez:d,et:v}=this.ep;const S=Ur.CURVE.Fp.ORDER,B=Ur.CURVE.Fp.create,T=B(B(d+l)*B(d-l)),k=B(e*l),x=B(k*k),{value:U}=invertSqrt(B(T*x)),O=B(U*T),F=B(U*k),P=B(O*F*v);let D;if(isNegativeLE(v*P,S)){let d=B(l*Qr),v=B(e*Qr);e=d,l=v,D=B(O*Gr)}else D=F;isNegativeLE(e*P,S)&&(l=B(-l));let W=B((d-l)*D);return isNegativeLE(W,S)&&(W=B(-W)),numberToBytesLE(W,32)}toHex(){return bytesToHex(this.toRawBytes())}toString(){return this.toHex()}equals(e){assertRstPoint(e);const{ex:l,ey:d}=this.ep,{ex:v,ey:S}=e.ep,B=Ur.CURVE.Fp.create,T=B(l*S)===B(d*v),k=B(d*S)===B(l*v);return T||k}add(e){return assertRstPoint(e),new RistPoint(this.ep.add(e.ep))}subtract(e){return assertRstPoint(e),new RistPoint(this.ep.subtract(e.ep))}multiply(e){return new RistPoint(this.ep.multiply(e))}multiplyUnsafe(e){return new RistPoint(this.ep.multiplyUnsafe(e))}double(){return new RistPoint(this.ep.double())}negate(){return new RistPoint(this.ep.negate())}}const tn=(()=>(RistPoint.BASE||(RistPoint.BASE=new RistPoint(Ur.ExtendedPoint.BASE)),RistPoint.ZERO||(RistPoint.ZERO=new RistPoint(Ur.ExtendedPoint.ZERO)),RistPoint))(),hashToRistretto255=(e,l)=>{const d=l.DST,v=expand_message_xmd(e,"string"==typeof d?utf8ToBytes$1(d):d,64,At);return RistPoint.hashToCurve(v)},rn=hashToRistretto255,nn=Object.freeze(Object.defineProperty({__proto__:null,ED25519_TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],RistrettoPoint:tn,ed25519:Ur,ed25519ctx:Ar,ed25519ph:Or,edwardsToMontgomery:Fr,edwardsToMontgomeryPriv:function(e){const l=Rr.hash(e.subarray(0,32));return Rr.adjustScalarBytes(l).subarray(0,32)},edwardsToMontgomeryPub:edwardsToMontgomeryPub,encodeToCurve:Zr,hashToCurve:zr,hashToRistretto255:hashToRistretto255,hash_to_ristretto255:rn,x25519:Cr},Symbol.toStringTag,{value:"Module"}));var cn={exports:{}};!function(e,l){function assert(e,l){if(!e)throw new Error(l||"Assertion failed")}function inherits(e,l){e.super_=l;var TempCtor=function(){};TempCtor.prototype=l.prototype,e.prototype=new TempCtor,e.prototype.constructor=e}function BN(e,l,d){if(BN.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==l&&"be"!==l||(d=l,l=10),this._init(e||0,l||10,d||"be"))}var d;"object"==typeof e?e.exports=BN:l.BN=BN,BN.BN=BN,BN.wordSize=26;try{d=pt.Buffer}catch(e){}function parseHex4Bits(e,l){var d=e.charCodeAt(l);return d>=48&&d<=57?d-48:d>=65&&d<=70?d-55:d>=97&&d<=102?d-87:void assert(!1,"Invalid character in "+e)}function parseHexByte(e,l,d){var v=parseHex4Bits(e,d);return d-1>=l&&(v|=parseHex4Bits(e,d-1)<<4),v}function parseBase(e,l,d,v){for(var S=0,B=0,T=Math.min(e.length,d),k=l;k<T;k++){var x=e.charCodeAt(k)-48;S*=v,B=x>=49?x-49+10:x>=17?x-17+10:x,assert(x>=0&&B<v,"Invalid character"),S+=B}return S}function move(e,l){e.words=l.words,e.length=l.length,e.negative=l.negative,e.red=l.red}if(BN.isBN=function(e){return e instanceof BN||null!==e&&"object"==typeof e&&e.constructor.wordSize===BN.wordSize&&Array.isArray(e.words)},BN.max=function(e,l){return e.cmp(l)>0?e:l},BN.min=function(e,l){return e.cmp(l)<0?e:l},BN.prototype._init=function(e,l,d){if("number"==typeof e)return this._initNumber(e,l,d);if("object"==typeof e)return this._initArray(e,l,d);"hex"===l&&(l=16),assert(l===(0|l)&&l>=2&&l<=36);var v=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(v++,this.negative=1),v<e.length&&(16===l?this._parseHex(e,v,d):(this._parseBase(e,l,v),"le"===d&&this._initArray(this.toArray(),l,d)))},BN.prototype._initNumber=function(e,l,d){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(assert(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===d&&this._initArray(this.toArray(),l,d)},BN.prototype._initArray=function(e,l,d){if(assert("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var S,B,T=0;if("be"===d)for(v=e.length-1,S=0;v>=0;v-=3)B=e[v]|e[v-1]<<8|e[v-2]<<16,this.words[S]|=B<<T&67108863,this.words[S+1]=B>>>26-T&67108863,(T+=24)>=26&&(T-=26,S++);else if("le"===d)for(v=0,S=0;v<e.length;v+=3)B=e[v]|e[v+1]<<8|e[v+2]<<16,this.words[S]|=B<<T&67108863,this.words[S+1]=B>>>26-T&67108863,(T+=24)>=26&&(T-=26,S++);return this._strip()},BN.prototype._parseHex=function(e,l,d){this.length=Math.ceil((e.length-l)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var S,B=0,T=0;if("be"===d)for(v=e.length-1;v>=l;v-=2)S=parseHexByte(e,l,v)<<B,this.words[T]|=67108863&S,B>=18?(B-=18,T+=1,this.words[T]|=S>>>26):B+=8;else for(v=(e.length-l)%2==0?l+1:l;v<e.length;v+=2)S=parseHexByte(e,l,v)<<B,this.words[T]|=67108863&S,B>=18?(B-=18,T+=1,this.words[T]|=S>>>26):B+=8;this._strip()},BN.prototype._parseBase=function(e,l,d){this.words=[0],this.length=1;for(var v=0,S=1;S<=67108863;S*=l)v++;v--,S=S/l|0;for(var B=e.length-d,T=B%v,k=Math.min(B,B-T)+d,x=0,U=d;U<k;U+=v)x=parseBase(e,U,U+v,l),this.imuln(S),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x);if(0!==T){var O=1;for(x=parseBase(e,U,e.length,l),U=0;U<T;U++)O*=l;this.imuln(O),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x)}this._strip()},BN.prototype.copy=function(e){e.words=new Array(this.length);for(var l=0;l<this.length;l++)e.words[l]=this.words[l];e.length=this.length,e.negative=this.negative,e.red=this.red},BN.prototype._move=function(e){move(e,this)},BN.prototype.clone=function(){var e=new BN(null);return this.copy(e),e},BN.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},BN.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{BN.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspect}catch(e){BN.prototype.inspect=inspect}else BN.prototype.inspect=inspect;function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(e,l,d){d.negative=l.negative^e.negative;var v=e.length+l.length|0;d.length=v,v=v-1|0;var S=0|e.words[0],B=0|l.words[0],T=S*B,k=67108863&T,x=T/67108864|0;d.words[0]=k;for(var U=1;U<v;U++){for(var O=x>>>26,F=67108863&x,P=Math.min(U,l.length-1),D=Math.max(0,U-e.length+1);D<=P;D++){var W=U-D|0;O+=(T=(S=0|e.words[W])*(B=0|l.words[D])+F)/67108864|0,F=67108863&T}d.words[U]=0|F,x=0|O}return 0!==x?d.words[U]=0|x:d.length--,d._strip()}BN.prototype.toString=function(e,l){var d;if(l=0|l||1,16===(e=e||10)||"hex"===e){d="";for(var T=0,k=0,x=0;x<this.length;x++){var U=this.words[x],O=(16777215&(U<<T|k)).toString(16);k=U>>>24-T&16777215,(T+=2)>=26&&(T-=26,x--),d=0!==k||x!==this.length-1?v[6-O.length]+O+d:O+d}for(0!==k&&(d=k.toString(16)+d);d.length%l!=0;)d="0"+d;return 0!==this.negative&&(d="-"+d),d}if(e===(0|e)&&e>=2&&e<=36){var F=S[e],P=B[e];d="";var D=this.clone();for(D.negative=0;!D.isZero();){var W=D.modrn(P).toString(e);d=(D=D.idivn(P)).isZero()?W+d:v[F-W.length]+W+d}for(this.isZero()&&(d="0"+d);d.length%l!=0;)d="0"+d;return 0!==this.negative&&(d="-"+d),d}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},BN.prototype.toJSON=function(){return this.toString(16,2)},d&&(BN.prototype.toBuffer=function(e,l){return this.toArrayLike(d,e,l)}),BN.prototype.toArray=function(e,l){return this.toArrayLike(Array,e,l)},BN.prototype.toArrayLike=function(e,l,d){this._strip();var v=this.byteLength(),S=d||Math.max(1,v);assert(v<=S,"byte array longer than desired length"),assert(S>0,"Requested array length <= 0");var B=function(e,l){return e.allocUnsafe?e.allocUnsafe(l):new e(l)}(e,S);return this["_toArrayLike"+("le"===l?"LE":"BE")](B,v),B},BN.prototype._toArrayLikeLE=function(e,l){for(var d=0,v=0,S=0,B=0;S<this.length;S++){var T=this.words[S]<<B|v;e[d++]=255&T,d<e.length&&(e[d++]=T>>8&255),d<e.length&&(e[d++]=T>>16&255),6===B?(d<e.length&&(e[d++]=T>>24&255),v=0,B=0):(v=T>>>24,B+=2)}if(d<e.length)for(e[d++]=v;d<e.length;)e[d++]=0},BN.prototype._toArrayLikeBE=function(e,l){for(var d=e.length-1,v=0,S=0,B=0;S<this.length;S++){var T=this.words[S]<<B|v;e[d--]=255&T,d>=0&&(e[d--]=T>>8&255),d>=0&&(e[d--]=T>>16&255),6===B?(d>=0&&(e[d--]=T>>24&255),v=0,B=0):(v=T>>>24,B+=2)}if(d>=0)for(e[d--]=v;d>=0;)e[d--]=0},Math.clz32?BN.prototype._countBits=function(e){return 32-Math.clz32(e)}:BN.prototype._countBits=function(e){var l=e,d=0;return l>=4096&&(d+=13,l>>>=13),l>=64&&(d+=7,l>>>=7),l>=8&&(d+=4,l>>>=4),l>=2&&(d+=2,l>>>=2),d+l},BN.prototype._zeroBits=function(e){if(0===e)return 26;var l=e,d=0;return 8191&l||(d+=13,l>>>=13),127&l||(d+=7,l>>>=7),15&l||(d+=4,l>>>=4),3&l||(d+=2,l>>>=2),1&l||d++,d},BN.prototype.bitLength=function(){var e=this.words[this.length-1],l=this._countBits(e);return 26*(this.length-1)+l},BN.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,l=0;l<this.length;l++){var d=this._zeroBits(this.words[l]);if(e+=d,26!==d)break}return e},BN.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},BN.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function(){return 0!==this.negative},BN.prototype.neg=function(){return this.clone().ineg()},BN.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var l=0;l<e.length;l++)this.words[l]=this.words[l]|e.words[l];return this._strip()},BN.prototype.ior=function(e){return assert(!(this.negative|e.negative)),this.iuor(e)},BN.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},BN.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},BN.prototype.iuand=function(e){var l;l=this.length>e.length?e:this;for(var d=0;d<l.length;d++)this.words[d]=this.words[d]&e.words[d];return this.length=l.length,this._strip()},BN.prototype.iand=function(e){return assert(!(this.negative|e.negative)),this.iuand(e)},BN.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},BN.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},BN.prototype.iuxor=function(e){var l,d;this.length>e.length?(l=this,d=e):(l=e,d=this);for(var v=0;v<d.length;v++)this.words[v]=l.words[v]^d.words[v];if(this!==l)for(;v<l.length;v++)this.words[v]=l.words[v];return this.length=l.length,this._strip()},BN.prototype.ixor=function(e){return assert(!(this.negative|e.negative)),this.iuxor(e)},BN.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},BN.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},BN.prototype.inotn=function(e){assert("number"==typeof e&&e>=0);var l=0|Math.ceil(e/26),d=e%26;this._expand(l),d>0&&l--;for(var v=0;v<l;v++)this.words[v]=67108863&~this.words[v];return d>0&&(this.words[v]=~this.words[v]&67108863>>26-d),this._strip()},BN.prototype.notn=function(e){return this.clone().inotn(e)},BN.prototype.setn=function(e,l){assert("number"==typeof e&&e>=0);var d=e/26|0,v=e%26;return this._expand(d+1),this.words[d]=l?this.words[d]|1<<v:this.words[d]&~(1<<v),this._strip()},BN.prototype.iadd=function(e){var l,d,v;if(0!==this.negative&&0===e.negative)return this.negative=0,l=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,l=this.isub(e),e.negative=1,l._normSign();this.length>e.length?(d=this,v=e):(d=e,v=this);for(var S=0,B=0;B<v.length;B++)l=(0|d.words[B])+(0|v.words[B])+S,this.words[B]=67108863&l,S=l>>>26;for(;0!==S&&B<d.length;B++)l=(0|d.words[B])+S,this.words[B]=67108863&l,S=l>>>26;if(this.length=d.length,0!==S)this.words[this.length]=S,this.length++;else if(d!==this)for(;B<d.length;B++)this.words[B]=d.words[B];return this},BN.prototype.add=function(e){var l;return 0!==e.negative&&0===this.negative?(e.negative=0,l=this.sub(e),e.negative^=1,l):0===e.negative&&0!==this.negative?(this.negative=0,l=e.sub(this),this.negative=1,l):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},BN.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var l=this.iadd(e);return e.negative=1,l._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var d,v,S=this.cmp(e);if(0===S)return this.negative=0,this.length=1,this.words[0]=0,this;S>0?(d=this,v=e):(d=e,v=this);for(var B=0,T=0;T<v.length;T++)B=(l=(0|d.words[T])-(0|v.words[T])+B)>>26,this.words[T]=67108863&l;for(;0!==B&&T<d.length;T++)B=(l=(0|d.words[T])+B)>>26,this.words[T]=67108863&l;if(0===B&&T<d.length&&d!==this)for(;T<d.length;T++)this.words[T]=d.words[T];return this.length=Math.max(this.length,T),d!==this&&(this.negative=1),this._strip()},BN.prototype.sub=function(e){return this.clone().isub(e)};var comb10MulTo=function(e,l,d){var v,S,B,T=e.words,k=l.words,x=d.words,U=0,O=0|T[0],F=8191&O,P=O>>>13,D=0|T[1],W=8191&D,j=D>>>13,z=0|T[2],Q=8191&z,K=z>>>13,H=0|T[3],q=8191&H,G=H>>>13,J=0|T[4],$=8191&J,ee=J>>>13,te=0|T[5],re=8191&te,ne=te>>>13,oe=0|T[6],ie=8191&oe,se=oe>>>13,ae=0|T[7],ce=8191&ae,he=ae>>>13,me=0|T[8],ge=8191&me,be=me>>>13,Ee=0|T[9],ve=8191&Ee,Te=Ee>>>13,ke=0|k[0],Ne=8191&ke,_e=ke>>>13,Me=0|k[1],Re=8191&Me,xe=Me>>>13,Ue=0|k[2],Oe=8191&Ue,Ce=Ue>>>13,Fe=0|k[3],Pe=8191&Fe,We=Fe>>>13,ze=0|k[4],Qe=8191&ze,qe=ze>>>13,Ye=0|k[5],$e=8191&Ye,rt=Ye>>>13,nt=0|k[6],ot=8191&nt,it=nt>>>13,st=0|k[7],at=8191&st,ct=st>>>13,lt=0|k[8],ht=8191&lt,pt=lt>>>13,mt=0|k[9],Bt=8191&mt,kt=mt>>>13;d.negative=e.negative^l.negative,d.length=19;var It=(U+(v=Math.imul(F,Ne))|0)+((8191&(S=(S=Math.imul(F,_e))+Math.imul(P,Ne)|0))<<13)|0;U=((B=Math.imul(P,_e))+(S>>>13)|0)+(It>>>26)|0,It&=67108863,v=Math.imul(W,Ne),S=(S=Math.imul(W,_e))+Math.imul(j,Ne)|0,B=Math.imul(j,_e);var _t=(U+(v=v+Math.imul(F,Re)|0)|0)+((8191&(S=(S=S+Math.imul(F,xe)|0)+Math.imul(P,Re)|0))<<13)|0;U=((B=B+Math.imul(P,xe)|0)+(S>>>13)|0)+(_t>>>26)|0,_t&=67108863,v=Math.imul(Q,Ne),S=(S=Math.imul(Q,_e))+Math.imul(K,Ne)|0,B=Math.imul(K,_e),v=v+Math.imul(W,Re)|0,S=(S=S+Math.imul(W,xe)|0)+Math.imul(j,Re)|0,B=B+Math.imul(j,xe)|0;var Mt=(U+(v=v+Math.imul(F,Oe)|0)|0)+((8191&(S=(S=S+Math.imul(F,Ce)|0)+Math.imul(P,Oe)|0))<<13)|0;U=((B=B+Math.imul(P,Ce)|0)+(S>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,v=Math.imul(q,Ne),S=(S=Math.imul(q,_e))+Math.imul(G,Ne)|0,B=Math.imul(G,_e),v=v+Math.imul(Q,Re)|0,S=(S=S+Math.imul(Q,xe)|0)+Math.imul(K,Re)|0,B=B+Math.imul(K,xe)|0,v=v+Math.imul(W,Oe)|0,S=(S=S+Math.imul(W,Ce)|0)+Math.imul(j,Oe)|0,B=B+Math.imul(j,Ce)|0;var Rt=(U+(v=v+Math.imul(F,Pe)|0)|0)+((8191&(S=(S=S+Math.imul(F,We)|0)+Math.imul(P,Pe)|0))<<13)|0;U=((B=B+Math.imul(P,We)|0)+(S>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,v=Math.imul($,Ne),S=(S=Math.imul($,_e))+Math.imul(ee,Ne)|0,B=Math.imul(ee,_e),v=v+Math.imul(q,Re)|0,S=(S=S+Math.imul(q,xe)|0)+Math.imul(G,Re)|0,B=B+Math.imul(G,xe)|0,v=v+Math.imul(Q,Oe)|0,S=(S=S+Math.imul(Q,Ce)|0)+Math.imul(K,Oe)|0,B=B+Math.imul(K,Ce)|0,v=v+Math.imul(W,Pe)|0,S=(S=S+Math.imul(W,We)|0)+Math.imul(j,Pe)|0,B=B+Math.imul(j,We)|0;var xt=(U+(v=v+Math.imul(F,Qe)|0)|0)+((8191&(S=(S=S+Math.imul(F,qe)|0)+Math.imul(P,Qe)|0))<<13)|0;U=((B=B+Math.imul(P,qe)|0)+(S>>>13)|0)+(xt>>>26)|0,xt&=67108863,v=Math.imul(re,Ne),S=(S=Math.imul(re,_e))+Math.imul(ne,Ne)|0,B=Math.imul(ne,_e),v=v+Math.imul($,Re)|0,S=(S=S+Math.imul($,xe)|0)+Math.imul(ee,Re)|0,B=B+Math.imul(ee,xe)|0,v=v+Math.imul(q,Oe)|0,S=(S=S+Math.imul(q,Ce)|0)+Math.imul(G,Oe)|0,B=B+Math.imul(G,Ce)|0,v=v+Math.imul(Q,Pe)|0,S=(S=S+Math.imul(Q,We)|0)+Math.imul(K,Pe)|0,B=B+Math.imul(K,We)|0,v=v+Math.imul(W,Qe)|0,S=(S=S+Math.imul(W,qe)|0)+Math.imul(j,Qe)|0,B=B+Math.imul(j,qe)|0;var Ut=(U+(v=v+Math.imul(F,$e)|0)|0)+((8191&(S=(S=S+Math.imul(F,rt)|0)+Math.imul(P,$e)|0))<<13)|0;U=((B=B+Math.imul(P,rt)|0)+(S>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,v=Math.imul(ie,Ne),S=(S=Math.imul(ie,_e))+Math.imul(se,Ne)|0,B=Math.imul(se,_e),v=v+Math.imul(re,Re)|0,S=(S=S+Math.imul(re,xe)|0)+Math.imul(ne,Re)|0,B=B+Math.imul(ne,xe)|0,v=v+Math.imul($,Oe)|0,S=(S=S+Math.imul($,Ce)|0)+Math.imul(ee,Oe)|0,B=B+Math.imul(ee,Ce)|0,v=v+Math.imul(q,Pe)|0,S=(S=S+Math.imul(q,We)|0)+Math.imul(G,Pe)|0,B=B+Math.imul(G,We)|0,v=v+Math.imul(Q,Qe)|0,S=(S=S+Math.imul(Q,qe)|0)+Math.imul(K,Qe)|0,B=B+Math.imul(K,qe)|0,v=v+Math.imul(W,$e)|0,S=(S=S+Math.imul(W,rt)|0)+Math.imul(j,$e)|0,B=B+Math.imul(j,rt)|0;var At=(U+(v=v+Math.imul(F,ot)|0)|0)+((8191&(S=(S=S+Math.imul(F,it)|0)+Math.imul(P,ot)|0))<<13)|0;U=((B=B+Math.imul(P,it)|0)+(S>>>13)|0)+(At>>>26)|0,At&=67108863,v=Math.imul(ce,Ne),S=(S=Math.imul(ce,_e))+Math.imul(he,Ne)|0,B=Math.imul(he,_e),v=v+Math.imul(ie,Re)|0,S=(S=S+Math.imul(ie,xe)|0)+Math.imul(se,Re)|0,B=B+Math.imul(se,xe)|0,v=v+Math.imul(re,Oe)|0,S=(S=S+Math.imul(re,Ce)|0)+Math.imul(ne,Oe)|0,B=B+Math.imul(ne,Ce)|0,v=v+Math.imul($,Pe)|0,S=(S=S+Math.imul($,We)|0)+Math.imul(ee,Pe)|0,B=B+Math.imul(ee,We)|0,v=v+Math.imul(q,Qe)|0,S=(S=S+Math.imul(q,qe)|0)+Math.imul(G,Qe)|0,B=B+Math.imul(G,qe)|0,v=v+Math.imul(Q,$e)|0,S=(S=S+Math.imul(Q,rt)|0)+Math.imul(K,$e)|0,B=B+Math.imul(K,rt)|0,v=v+Math.imul(W,ot)|0,S=(S=S+Math.imul(W,it)|0)+Math.imul(j,ot)|0,B=B+Math.imul(j,it)|0;var Ct=(U+(v=v+Math.imul(F,at)|0)|0)+((8191&(S=(S=S+Math.imul(F,ct)|0)+Math.imul(P,at)|0))<<13)|0;U=((B=B+Math.imul(P,ct)|0)+(S>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,v=Math.imul(ge,Ne),S=(S=Math.imul(ge,_e))+Math.imul(be,Ne)|0,B=Math.imul(be,_e),v=v+Math.imul(ce,Re)|0,S=(S=S+Math.imul(ce,xe)|0)+Math.imul(he,Re)|0,B=B+Math.imul(he,xe)|0,v=v+Math.imul(ie,Oe)|0,S=(S=S+Math.imul(ie,Ce)|0)+Math.imul(se,Oe)|0,B=B+Math.imul(se,Ce)|0,v=v+Math.imul(re,Pe)|0,S=(S=S+Math.imul(re,We)|0)+Math.imul(ne,Pe)|0,B=B+Math.imul(ne,We)|0,v=v+Math.imul($,Qe)|0,S=(S=S+Math.imul($,qe)|0)+Math.imul(ee,Qe)|0,B=B+Math.imul(ee,qe)|0,v=v+Math.imul(q,$e)|0,S=(S=S+Math.imul(q,rt)|0)+Math.imul(G,$e)|0,B=B+Math.imul(G,rt)|0,v=v+Math.imul(Q,ot)|0,S=(S=S+Math.imul(Q,it)|0)+Math.imul(K,ot)|0,B=B+Math.imul(K,it)|0,v=v+Math.imul(W,at)|0,S=(S=S+Math.imul(W,ct)|0)+Math.imul(j,at)|0,B=B+Math.imul(j,ct)|0;var Ft=(U+(v=v+Math.imul(F,ht)|0)|0)+((8191&(S=(S=S+Math.imul(F,pt)|0)+Math.imul(P,ht)|0))<<13)|0;U=((B=B+Math.imul(P,pt)|0)+(S>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,v=Math.imul(ve,Ne),S=(S=Math.imul(ve,_e))+Math.imul(Te,Ne)|0,B=Math.imul(Te,_e),v=v+Math.imul(ge,Re)|0,S=(S=S+Math.imul(ge,xe)|0)+Math.imul(be,Re)|0,B=B+Math.imul(be,xe)|0,v=v+Math.imul(ce,Oe)|0,S=(S=S+Math.imul(ce,Ce)|0)+Math.imul(he,Oe)|0,B=B+Math.imul(he,Ce)|0,v=v+Math.imul(ie,Pe)|0,S=(S=S+Math.imul(ie,We)|0)+Math.imul(se,Pe)|0,B=B+Math.imul(se,We)|0,v=v+Math.imul(re,Qe)|0,S=(S=S+Math.imul(re,qe)|0)+Math.imul(ne,Qe)|0,B=B+Math.imul(ne,qe)|0,v=v+Math.imul($,$e)|0,S=(S=S+Math.imul($,rt)|0)+Math.imul(ee,$e)|0,B=B+Math.imul(ee,rt)|0,v=v+Math.imul(q,ot)|0,S=(S=S+Math.imul(q,it)|0)+Math.imul(G,ot)|0,B=B+Math.imul(G,it)|0,v=v+Math.imul(Q,at)|0,S=(S=S+Math.imul(Q,ct)|0)+Math.imul(K,at)|0,B=B+Math.imul(K,ct)|0,v=v+Math.imul(W,ht)|0,S=(S=S+Math.imul(W,pt)|0)+Math.imul(j,ht)|0,B=B+Math.imul(j,pt)|0;var Pt=(U+(v=v+Math.imul(F,Bt)|0)|0)+((8191&(S=(S=S+Math.imul(F,kt)|0)+Math.imul(P,Bt)|0))<<13)|0;U=((B=B+Math.imul(P,kt)|0)+(S>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,v=Math.imul(ve,Re),S=(S=Math.imul(ve,xe))+Math.imul(Te,Re)|0,B=Math.imul(Te,xe),v=v+Math.imul(ge,Oe)|0,S=(S=S+Math.imul(ge,Ce)|0)+Math.imul(be,Oe)|0,B=B+Math.imul(be,Ce)|0,v=v+Math.imul(ce,Pe)|0,S=(S=S+Math.imul(ce,We)|0)+Math.imul(he,Pe)|0,B=B+Math.imul(he,We)|0,v=v+Math.imul(ie,Qe)|0,S=(S=S+Math.imul(ie,qe)|0)+Math.imul(se,Qe)|0,B=B+Math.imul(se,qe)|0,v=v+Math.imul(re,$e)|0,S=(S=S+Math.imul(re,rt)|0)+Math.imul(ne,$e)|0,B=B+Math.imul(ne,rt)|0,v=v+Math.imul($,ot)|0,S=(S=S+Math.imul($,it)|0)+Math.imul(ee,ot)|0,B=B+Math.imul(ee,it)|0,v=v+Math.imul(q,at)|0,S=(S=S+Math.imul(q,ct)|0)+Math.imul(G,at)|0,B=B+Math.imul(G,ct)|0,v=v+Math.imul(Q,ht)|0,S=(S=S+Math.imul(Q,pt)|0)+Math.imul(K,ht)|0,B=B+Math.imul(K,pt)|0;var Dt=(U+(v=v+Math.imul(W,Bt)|0)|0)+((8191&(S=(S=S+Math.imul(W,kt)|0)+Math.imul(j,Bt)|0))<<13)|0;U=((B=B+Math.imul(j,kt)|0)+(S>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,v=Math.imul(ve,Oe),S=(S=Math.imul(ve,Ce))+Math.imul(Te,Oe)|0,B=Math.imul(Te,Ce),v=v+Math.imul(ge,Pe)|0,S=(S=S+Math.imul(ge,We)|0)+Math.imul(be,Pe)|0,B=B+Math.imul(be,We)|0,v=v+Math.imul(ce,Qe)|0,S=(S=S+Math.imul(ce,qe)|0)+Math.imul(he,Qe)|0,B=B+Math.imul(he,qe)|0,v=v+Math.imul(ie,$e)|0,S=(S=S+Math.imul(ie,rt)|0)+Math.imul(se,$e)|0,B=B+Math.imul(se,rt)|0,v=v+Math.imul(re,ot)|0,S=(S=S+Math.imul(re,it)|0)+Math.imul(ne,ot)|0,B=B+Math.imul(ne,it)|0,v=v+Math.imul($,at)|0,S=(S=S+Math.imul($,ct)|0)+Math.imul(ee,at)|0,B=B+Math.imul(ee,ct)|0,v=v+Math.imul(q,ht)|0,S=(S=S+Math.imul(q,pt)|0)+Math.imul(G,ht)|0,B=B+Math.imul(G,pt)|0;var Wt=(U+(v=v+Math.imul(Q,Bt)|0)|0)+((8191&(S=(S=S+Math.imul(Q,kt)|0)+Math.imul(K,Bt)|0))<<13)|0;U=((B=B+Math.imul(K,kt)|0)+(S>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,v=Math.imul(ve,Pe),S=(S=Math.imul(ve,We))+Math.imul(Te,Pe)|0,B=Math.imul(Te,We),v=v+Math.imul(ge,Qe)|0,S=(S=S+Math.imul(ge,qe)|0)+Math.imul(be,Qe)|0,B=B+Math.imul(be,qe)|0,v=v+Math.imul(ce,$e)|0,S=(S=S+Math.imul(ce,rt)|0)+Math.imul(he,$e)|0,B=B+Math.imul(he,rt)|0,v=v+Math.imul(ie,ot)|0,S=(S=S+Math.imul(ie,it)|0)+Math.imul(se,ot)|0,B=B+Math.imul(se,it)|0,v=v+Math.imul(re,at)|0,S=(S=S+Math.imul(re,ct)|0)+Math.imul(ne,at)|0,B=B+Math.imul(ne,ct)|0,v=v+Math.imul($,ht)|0,S=(S=S+Math.imul($,pt)|0)+Math.imul(ee,ht)|0,B=B+Math.imul(ee,pt)|0;var Vt=(U+(v=v+Math.imul(q,Bt)|0)|0)+((8191&(S=(S=S+Math.imul(q,kt)|0)+Math.imul(G,Bt)|0))<<13)|0;U=((B=B+Math.imul(G,kt)|0)+(S>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,v=Math.imul(ve,Qe),S=(S=Math.imul(ve,qe))+Math.imul(Te,Qe)|0,B=Math.imul(Te,qe),v=v+Math.imul(ge,$e)|0,S=(S=S+Math.imul(ge,rt)|0)+Math.imul(be,$e)|0,B=B+Math.imul(be,rt)|0,v=v+Math.imul(ce,ot)|0,S=(S=S+Math.imul(ce,it)|0)+Math.imul(he,ot)|0,B=B+Math.imul(he,it)|0,v=v+Math.imul(ie,at)|0,S=(S=S+Math.imul(ie,ct)|0)+Math.imul(se,at)|0,B=B+Math.imul(se,ct)|0,v=v+Math.imul(re,ht)|0,S=(S=S+Math.imul(re,pt)|0)+Math.imul(ne,ht)|0,B=B+Math.imul(ne,pt)|0;var jt=(U+(v=v+Math.imul($,Bt)|0)|0)+((8191&(S=(S=S+Math.imul($,kt)|0)+Math.imul(ee,Bt)|0))<<13)|0;U=((B=B+Math.imul(ee,kt)|0)+(S>>>13)|0)+(jt>>>26)|0,jt&=67108863,v=Math.imul(ve,$e),S=(S=Math.imul(ve,rt))+Math.imul(Te,$e)|0,B=Math.imul(Te,rt),v=v+Math.imul(ge,ot)|0,S=(S=S+Math.imul(ge,it)|0)+Math.imul(be,ot)|0,B=B+Math.imul(be,it)|0,v=v+Math.imul(ce,at)|0,S=(S=S+Math.imul(ce,ct)|0)+Math.imul(he,at)|0,B=B+Math.imul(he,ct)|0,v=v+Math.imul(ie,ht)|0,S=(S=S+Math.imul(ie,pt)|0)+Math.imul(se,ht)|0,B=B+Math.imul(se,pt)|0;var zt=(U+(v=v+Math.imul(re,Bt)|0)|0)+((8191&(S=(S=S+Math.imul(re,kt)|0)+Math.imul(ne,Bt)|0))<<13)|0;U=((B=B+Math.imul(ne,kt)|0)+(S>>>13)|0)+(zt>>>26)|0,zt&=67108863,v=Math.imul(ve,ot),S=(S=Math.imul(ve,it))+Math.imul(Te,ot)|0,B=Math.imul(Te,it),v=v+Math.imul(ge,at)|0,S=(S=S+Math.imul(ge,ct)|0)+Math.imul(be,at)|0,B=B+Math.imul(be,ct)|0,v=v+Math.imul(ce,ht)|0,S=(S=S+Math.imul(ce,pt)|0)+Math.imul(he,ht)|0,B=B+Math.imul(he,pt)|0;var Zt=(U+(v=v+Math.imul(ie,Bt)|0)|0)+((8191&(S=(S=S+Math.imul(ie,kt)|0)+Math.imul(se,Bt)|0))<<13)|0;U=((B=B+Math.imul(se,kt)|0)+(S>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,v=Math.imul(ve,at),S=(S=Math.imul(ve,ct))+Math.imul(Te,at)|0,B=Math.imul(Te,ct),v=v+Math.imul(ge,ht)|0,S=(S=S+Math.imul(ge,pt)|0)+Math.imul(be,ht)|0,B=B+Math.imul(be,pt)|0;var Qt=(U+(v=v+Math.imul(ce,Bt)|0)|0)+((8191&(S=(S=S+Math.imul(ce,kt)|0)+Math.imul(he,Bt)|0))<<13)|0;U=((B=B+Math.imul(he,kt)|0)+(S>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,v=Math.imul(ve,ht),S=(S=Math.imul(ve,pt))+Math.imul(Te,ht)|0,B=Math.imul(Te,pt);var Kt=(U+(v=v+Math.imul(ge,Bt)|0)|0)+((8191&(S=(S=S+Math.imul(ge,kt)|0)+Math.imul(be,Bt)|0))<<13)|0;U=((B=B+Math.imul(be,kt)|0)+(S>>>13)|0)+(Kt>>>26)|0,Kt&=67108863;var Ht=(U+(v=Math.imul(ve,Bt))|0)+((8191&(S=(S=Math.imul(ve,kt))+Math.imul(Te,Bt)|0))<<13)|0;return U=((B=Math.imul(Te,kt))+(S>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,x[0]=It,x[1]=_t,x[2]=Mt,x[3]=Rt,x[4]=xt,x[5]=Ut,x[6]=At,x[7]=Ct,x[8]=Ft,x[9]=Pt,x[10]=Dt,x[11]=Wt,x[12]=Vt,x[13]=jt,x[14]=zt,x[15]=Zt,x[16]=Qt,x[17]=Kt,x[18]=Ht,0!==U&&(x[19]=U,d.length++),d};function bigMulTo(e,l,d){d.negative=l.negative^e.negative,d.length=e.length+l.length;for(var v=0,S=0,B=0;B<d.length-1;B++){var T=S;S=0;for(var k=67108863&v,x=Math.min(B,l.length-1),U=Math.max(0,B-e.length+1);U<=x;U++){var O=B-U,F=(0|e.words[O])*(0|l.words[U]),P=67108863&F;k=67108863&(P=P+k|0),S+=(T=(T=T+(F/67108864|0)|0)+(P>>>26)|0)>>>26,T&=67108863}d.words[B]=k,v=T,T=S}return 0!==v?d.words[B]=v:d.length--,d._strip()}function jumboMulTo(e,l,d){return bigMulTo(e,l,d)}Math.imul||(comb10MulTo=smallMulTo),BN.prototype.mulTo=function(e,l){var d=this.length+e.length;return 10===this.length&&10===e.length?comb10MulTo(this,e,l):d<63?smallMulTo(this,e,l):d<1024?bigMulTo(this,e,l):jumboMulTo(this,e,l)},BN.prototype.mul=function(e){var l=new BN(null);return l.words=new Array(this.length+e.length),this.mulTo(e,l)},BN.prototype.mulf=function(e){var l=new BN(null);return l.words=new Array(this.length+e.length),jumboMulTo(this,e,l)},BN.prototype.imul=function(e){return this.clone().mulTo(e,this)},BN.prototype.imuln=function(e){var l=e<0;l&&(e=-e),assert("number"==typeof e),assert(e<67108864);for(var d=0,v=0;v<this.length;v++){var S=(0|this.words[v])*e,B=(67108863&S)+(67108863&d);d>>=26,d+=S/67108864|0,d+=B>>>26,this.words[v]=67108863&B}return 0!==d&&(this.words[v]=d,this.length++),l?this.ineg():this},BN.prototype.muln=function(e){return this.clone().imuln(e)},BN.prototype.sqr=function(){return this.mul(this)},BN.prototype.isqr=function(){return this.imul(this.clone())},BN.prototype.pow=function(e){var l=function(e){for(var l=new Array(e.bitLength()),d=0;d<l.length;d++){var v=d/26|0,S=d%26;l[d]=e.words[v]>>>S&1}return l}(e);if(0===l.length)return new BN(1);for(var d=this,v=0;v<l.length&&0===l[v];v++,d=d.sqr());if(++v<l.length)for(var S=d.sqr();v<l.length;v++,S=S.sqr())0!==l[v]&&(d=d.mul(S));return d},BN.prototype.iushln=function(e){assert("number"==typeof e&&e>=0);var l,d=e%26,v=(e-d)/26,S=67108863>>>26-d<<26-d;if(0!==d){var B=0;for(l=0;l<this.length;l++){var T=this.words[l]&S,k=(0|this.words[l])-T<<d;this.words[l]=k|B,B=T>>>26-d}B&&(this.words[l]=B,this.length++)}if(0!==v){for(l=this.length-1;l>=0;l--)this.words[l+v]=this.words[l];for(l=0;l<v;l++)this.words[l]=0;this.length+=v}return this._strip()},BN.prototype.ishln=function(e){return assert(0===this.negative),this.iushln(e)},BN.prototype.iushrn=function(e,l,d){var v;assert("number"==typeof e&&e>=0),v=l?(l-l%26)/26:0;var S=e%26,B=Math.min((e-S)/26,this.length),T=67108863^67108863>>>S<<S,k=d;if(v-=B,v=Math.max(0,v),k){for(var x=0;x<B;x++)k.words[x]=this.words[x];k.length=B}if(0===B);else if(this.length>B)for(this.length-=B,x=0;x<this.length;x++)this.words[x]=this.words[x+B];else this.words[0]=0,this.length=1;var U=0;for(x=this.length-1;x>=0&&(0!==U||x>=v);x--){var O=0|this.words[x];this.words[x]=U<<26-S|O>>>S,U=O&T}return k&&0!==U&&(k.words[k.length++]=U),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},BN.prototype.ishrn=function(e,l,d){return assert(0===this.negative),this.iushrn(e,l,d)},BN.prototype.shln=function(e){return this.clone().ishln(e)},BN.prototype.ushln=function(e){return this.clone().iushln(e)},BN.prototype.shrn=function(e){return this.clone().ishrn(e)},BN.prototype.ushrn=function(e){return this.clone().iushrn(e)},BN.prototype.testn=function(e){assert("number"==typeof e&&e>=0);var l=e%26,d=(e-l)/26,v=1<<l;return!(this.length<=d||!(this.words[d]&v))},BN.prototype.imaskn=function(e){assert("number"==typeof e&&e>=0);var l=e%26,d=(e-l)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=d)return this;if(0!==l&&d++,this.length=Math.min(d,this.length),0!==l){var v=67108863^67108863>>>l<<l;this.words[this.length-1]&=v}return this._strip()},BN.prototype.maskn=function(e){return this.clone().imaskn(e)},BN.prototype.iaddn=function(e){return assert("number"==typeof e),assert(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},BN.prototype._iaddn=function(e){this.words[0]+=e;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},BN.prototype.isubn=function(e){if(assert("number"==typeof e),assert(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},BN.prototype.addn=function(e){return this.clone().iaddn(e)},BN.prototype.subn=function(e){return this.clone().isubn(e)},BN.prototype.iabs=function(){return this.negative=0,this},BN.prototype.abs=function(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function(e,l,d){var v,S,B=e.length+d;this._expand(B);var T=0;for(v=0;v<e.length;v++){S=(0|this.words[v+d])+T;var k=(0|e.words[v])*l;T=((S-=67108863&k)>>26)-(k/67108864|0),this.words[v+d]=67108863&S}for(;v<this.length-d;v++)T=(S=(0|this.words[v+d])+T)>>26,this.words[v+d]=67108863&S;if(0===T)return this._strip();for(assert(-1===T),T=0,v=0;v<this.length;v++)T=(S=-(0|this.words[v])+T)>>26,this.words[v]=67108863&S;return this.negative=1,this._strip()},BN.prototype._wordDiv=function(e,l){var d=(this.length,e.length),v=this.clone(),S=e,B=0|S.words[S.length-1];0!=(d=26-this._countBits(B))&&(S=S.ushln(d),v.iushln(d),B=0|S.words[S.length-1]);var T,k=v.length-S.length;if("mod"!==l){(T=new BN(null)).length=k+1,T.words=new Array(T.length);for(var x=0;x<T.length;x++)T.words[x]=0}var U=v.clone()._ishlnsubmul(S,1,k);0===U.negative&&(v=U,T&&(T.words[k]=1));for(var O=k-1;O>=0;O--){var F=67108864*(0|v.words[S.length+O])+(0|v.words[S.length+O-1]);for(F=Math.min(F/B|0,67108863),v._ishlnsubmul(S,F,O);0!==v.negative;)F--,v.negative=0,v._ishlnsubmul(S,1,O),v.isZero()||(v.negative^=1);T&&(T.words[O]=F)}return T&&T._strip(),v._strip(),"div"!==l&&0!==d&&v.iushrn(d),{div:T||null,mod:v}},BN.prototype.divmod=function(e,l,d){return assert(!e.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===e.negative?(B=this.neg().divmod(e,l),"mod"!==l&&(v=B.div.neg()),"div"!==l&&(S=B.mod.neg(),d&&0!==S.negative&&S.iadd(e)),{div:v,mod:S}):0===this.negative&&0!==e.negative?(B=this.divmod(e.neg(),l),"mod"!==l&&(v=B.div.neg()),{div:v,mod:B.mod}):this.negative&e.negative?(B=this.neg().divmod(e.neg(),l),"div"!==l&&(S=B.mod.neg(),d&&0!==S.negative&&S.isub(e)),{div:B.div,mod:S}):e.length>this.length||this.cmp(e)<0?{div:new BN(0),mod:this}:1===e.length?"div"===l?{div:this.divn(e.words[0]),mod:null}:"mod"===l?{div:null,mod:new BN(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new BN(this.modrn(e.words[0]))}:this._wordDiv(e,l);var v,S,B},BN.prototype.div=function(e){return this.divmod(e,"div",!1).div},BN.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},BN.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},BN.prototype.divRound=function(e){var l=this.divmod(e);if(l.mod.isZero())return l.div;var d=0!==l.div.negative?l.mod.isub(e):l.mod,v=e.ushrn(1),S=e.andln(1),B=d.cmp(v);return B<0||1===S&&0===B?l.div:0!==l.div.negative?l.div.isubn(1):l.div.iaddn(1)},BN.prototype.modrn=function(e){var l=e<0;l&&(e=-e),assert(e<=67108863);for(var d=(1<<26)%e,v=0,S=this.length-1;S>=0;S--)v=(d*v+(0|this.words[S]))%e;return l?-v:v},BN.prototype.modn=function(e){return this.modrn(e)},BN.prototype.idivn=function(e){var l=e<0;l&&(e=-e),assert(e<=67108863);for(var d=0,v=this.length-1;v>=0;v--){var S=(0|this.words[v])+67108864*d;this.words[v]=S/e|0,d=S%e}return this._strip(),l?this.ineg():this},BN.prototype.divn=function(e){return this.clone().idivn(e)},BN.prototype.egcd=function(e){assert(0===e.negative),assert(!e.isZero());var l=this,d=e.clone();l=0!==l.negative?l.umod(e):l.clone();for(var v=new BN(1),S=new BN(0),B=new BN(0),T=new BN(1),k=0;l.isEven()&&d.isEven();)l.iushrn(1),d.iushrn(1),++k;for(var x=d.clone(),U=l.clone();!l.isZero();){for(var O=0,F=1;!(l.words[0]&F)&&O<26;++O,F<<=1);if(O>0)for(l.iushrn(O);O-- >0;)(v.isOdd()||S.isOdd())&&(v.iadd(x),S.isub(U)),v.iushrn(1),S.iushrn(1);for(var P=0,D=1;!(d.words[0]&D)&&P<26;++P,D<<=1);if(P>0)for(d.iushrn(P);P-- >0;)(B.isOdd()||T.isOdd())&&(B.iadd(x),T.isub(U)),B.iushrn(1),T.iushrn(1);l.cmp(d)>=0?(l.isub(d),v.isub(B),S.isub(T)):(d.isub(l),B.isub(v),T.isub(S))}return{a:B,b:T,gcd:d.iushln(k)}},BN.prototype._invmp=function(e){assert(0===e.negative),assert(!e.isZero());var l=this,d=e.clone();l=0!==l.negative?l.umod(e):l.clone();for(var v,S=new BN(1),B=new BN(0),T=d.clone();l.cmpn(1)>0&&d.cmpn(1)>0;){for(var k=0,x=1;!(l.words[0]&x)&&k<26;++k,x<<=1);if(k>0)for(l.iushrn(k);k-- >0;)S.isOdd()&&S.iadd(T),S.iushrn(1);for(var U=0,O=1;!(d.words[0]&O)&&U<26;++U,O<<=1);if(U>0)for(d.iushrn(U);U-- >0;)B.isOdd()&&B.iadd(T),B.iushrn(1);l.cmp(d)>=0?(l.isub(d),S.isub(B)):(d.isub(l),B.isub(S))}return(v=0===l.cmpn(1)?S:B).cmpn(0)<0&&v.iadd(e),v},BN.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var l=this.clone(),d=e.clone();l.negative=0,d.negative=0;for(var v=0;l.isEven()&&d.isEven();v++)l.iushrn(1),d.iushrn(1);for(;;){for(;l.isEven();)l.iushrn(1);for(;d.isEven();)d.iushrn(1);var S=l.cmp(d);if(S<0){var B=l;l=d,d=B}else if(0===S||0===d.cmpn(1))break;l.isub(d)}return d.iushln(v)},BN.prototype.invm=function(e){return this.egcd(e).a.umod(e)},BN.prototype.isEven=function(){return!(1&this.words[0])},BN.prototype.isOdd=function(){return!(1&~this.words[0])},BN.prototype.andln=function(e){return this.words[0]&e},BN.prototype.bincn=function(e){assert("number"==typeof e);var l=e%26,d=(e-l)/26,v=1<<l;if(this.length<=d)return this._expand(d+1),this.words[d]|=v,this;for(var S=v,B=d;0!==S&&B<this.length;B++){var T=0|this.words[B];S=(T+=S)>>>26,T&=67108863,this.words[B]=T}return 0!==S&&(this.words[B]=S,this.length++),this},BN.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function(e){var l,d=e<0;if(0!==this.negative&&!d)return-1;if(0===this.negative&&d)return 1;if(this._strip(),this.length>1)l=1;else{d&&(e=-e),assert(e<=67108863,"Number is too big");var v=0|this.words[0];l=v===e?0:v<e?-1:1}return 0!==this.negative?0|-l:l},BN.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var l=this.ucmp(e);return 0!==this.negative?0|-l:l},BN.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var l=0,d=this.length-1;d>=0;d--){var v=0|this.words[d],S=0|e.words[d];if(v!==S){v<S?l=-1:v>S&&(l=1);break}}return l},BN.prototype.gtn=function(e){return 1===this.cmpn(e)},BN.prototype.gt=function(e){return 1===this.cmp(e)},BN.prototype.gten=function(e){return this.cmpn(e)>=0},BN.prototype.gte=function(e){return this.cmp(e)>=0},BN.prototype.ltn=function(e){return-1===this.cmpn(e)},BN.prototype.lt=function(e){return-1===this.cmp(e)},BN.prototype.lten=function(e){return this.cmpn(e)<=0},BN.prototype.lte=function(e){return this.cmp(e)<=0},BN.prototype.eqn=function(e){return 0===this.cmpn(e)},BN.prototype.eq=function(e){return 0===this.cmp(e)},BN.red=function(e){return new Red(e)},BN.prototype.toRed=function(e){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},BN.prototype.fromRed=function(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function(e){return this.red=e,this},BN.prototype.forceRed=function(e){return assert(!this.red,"Already a number in reduction context"),this._forceRed(e)},BN.prototype.redAdd=function(e){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},BN.prototype.redIAdd=function(e){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},BN.prototype.redSub=function(e){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},BN.prototype.redISub=function(e){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},BN.prototype.redShl=function(e){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},BN.prototype.redMul=function(e){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},BN.prototype.redIMul=function(e){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},BN.prototype.redSqr=function(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function(e){return assert(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var T={k256:null,p224:null,p192:null,p25519:null};function MPrime(e,l){this.name=e,this.p=new BN(l,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(e){if("string"==typeof e){var l=BN._prime(e);this.m=l.p,this.prime=l}else assert(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function Mont(e){Red.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function(){var e=new BN(null);return e.words=new Array(Math.ceil(this.n/13)),e},MPrime.prototype.ireduce=function(e){var l,d=e;do{this.split(d,this.tmp),l=(d=(d=this.imulK(d)).iadd(this.tmp)).bitLength()}while(l>this.n);var v=l<this.n?-1:d.ucmp(this.p);return 0===v?(d.words[0]=0,d.length=1):v>0?d.isub(this.p):void 0!==d.strip?d.strip():d._strip(),d},MPrime.prototype.split=function(e,l){e.iushrn(this.n,0,l)},MPrime.prototype.imulK=function(e){return e.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function(e,l){for(var d=4194303,v=Math.min(e.length,9),S=0;S<v;S++)l.words[S]=e.words[S];if(l.length=v,e.length<=9)return e.words[0]=0,void(e.length=1);var B=e.words[9];for(l.words[l.length++]=B&d,S=10;S<e.length;S++){var T=0|e.words[S];e.words[S-10]=(T&d)<<4|B>>>22,B=T}B>>>=22,e.words[S-10]=B,0===B&&e.length>10?e.length-=10:e.length-=9},K256.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var l=0,d=0;d<e.length;d++){var v=0|e.words[d];l+=977*v,e.words[d]=67108863&l,l=64*v+(l/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function(e){for(var l=0,d=0;d<e.length;d++){var v=19*(0|e.words[d])+l,S=67108863&v;v>>>=26,e.words[d]=S,l=v}return 0!==l&&(e.words[e.length++]=l),e},BN._prime=function(e){if(T[e])return T[e];var l;if("k256"===e)l=new K256;else if("p224"===e)l=new P224;else if("p192"===e)l=new P192;else{if("p25519"!==e)throw new Error("Unknown prime "+e);l=new P25519}return T[e]=l,l},Red.prototype._verify1=function(e){assert(0===e.negative,"red works only with positives"),assert(e.red,"red works only with red numbers")},Red.prototype._verify2=function(e,l){assert(!(e.negative|l.negative),"red works only with positives"),assert(e.red&&e.red===l.red,"red works only with red numbers")},Red.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(move(e,e.umod(this.m)._forceRed(this)),e)},Red.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},Red.prototype.add=function(e,l){this._verify2(e,l);var d=e.add(l);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},Red.prototype.iadd=function(e,l){this._verify2(e,l);var d=e.iadd(l);return d.cmp(this.m)>=0&&d.isub(this.m),d},Red.prototype.sub=function(e,l){this._verify2(e,l);var d=e.sub(l);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},Red.prototype.isub=function(e,l){this._verify2(e,l);var d=e.isub(l);return d.cmpn(0)<0&&d.iadd(this.m),d},Red.prototype.shl=function(e,l){return this._verify1(e),this.imod(e.ushln(l))},Red.prototype.imul=function(e,l){return this._verify2(e,l),this.imod(e.imul(l))},Red.prototype.mul=function(e,l){return this._verify2(e,l),this.imod(e.mul(l))},Red.prototype.isqr=function(e){return this.imul(e,e.clone())},Red.prototype.sqr=function(e){return this.mul(e,e)},Red.prototype.sqrt=function(e){if(e.isZero())return e.clone();var l=this.m.andln(3);if(assert(l%2==1),3===l){var d=this.m.add(new BN(1)).iushrn(2);return this.pow(e,d)}for(var v=this.m.subn(1),S=0;!v.isZero()&&0===v.andln(1);)S++,v.iushrn(1);assert(!v.isZero());var B=new BN(1).toRed(this),T=B.redNeg(),k=this.m.subn(1).iushrn(1),x=this.m.bitLength();for(x=new BN(2*x*x).toRed(this);0!==this.pow(x,k).cmp(T);)x.redIAdd(T);for(var U=this.pow(x,v),O=this.pow(e,v.addn(1).iushrn(1)),F=this.pow(e,v),P=S;0!==F.cmp(B);){for(var D=F,W=0;0!==D.cmp(B);W++)D=D.redSqr();assert(W<P);var j=this.pow(U,new BN(1).iushln(P-W-1));O=O.redMul(j),U=j.redSqr(),F=F.redMul(U),P=W}return O},Red.prototype.invm=function(e){var l=e._invmp(this.m);return 0!==l.negative?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},Red.prototype.pow=function(e,l){if(l.isZero())return new BN(1).toRed(this);if(0===l.cmpn(1))return e.clone();var d=new Array(16);d[0]=new BN(1).toRed(this),d[1]=e;for(var v=2;v<d.length;v++)d[v]=this.mul(d[v-1],e);var S=d[0],B=0,T=0,k=l.bitLength()%26;for(0===k&&(k=26),v=l.length-1;v>=0;v--){for(var x=l.words[v],U=k-1;U>=0;U--){var O=x>>U&1;S!==d[0]&&(S=this.sqr(S)),0!==O||0!==B?(B<<=1,B|=O,(4==++T||0===v&&0===U)&&(S=this.mul(S,d[B]),T=0,B=0)):T=0}k=26}return S},Red.prototype.convertTo=function(e){var l=e.umod(this.m);return l===e?l.clone():l},Red.prototype.convertFrom=function(e){var l=e.clone();return l.red=null,l},BN.mont=function(e){return new Mont(e)},inherits(Mont,Red),Mont.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},Mont.prototype.convertFrom=function(e){var l=this.imod(e.mul(this.rinv));return l.red=null,l},Mont.prototype.imul=function(e,l){if(e.isZero()||l.isZero())return e.words[0]=0,e.length=1,e;var d=e.imul(l),v=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=d.isub(v).iushrn(this.shift),B=S;return S.cmp(this.m)>=0?B=S.isub(this.m):S.cmpn(0)<0&&(B=S.iadd(this.m)),B._forceRed(this)},Mont.prototype.mul=function(e,l){if(e.isZero()||l.isZero())return new BN(0)._forceRed(this);var d=e.mul(l),v=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=d.isub(v).iushrn(this.shift),B=S;return S.cmp(this.m)>=0?B=S.isub(this.m):S.cmpn(0)<0&&(B=S.iadd(this.m)),B._forceRed(this)},Mont.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(cn,ke);var ln=cn.exports,hn={exports:{}};!function(e,l){var d=pt,v=d.Buffer;function copyProps(e,l){for(var d in e)l[d]=e[d]}function SafeBuffer(e,l,d){return v(e,l,d)}v.from&&v.alloc&&v.allocUnsafe&&v.allocUnsafeSlow?e.exports=d:(copyProps(d,l),l.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(v.prototype),copyProps(v,SafeBuffer),SafeBuffer.from=function(e,l,d){if("number"==typeof e)throw new TypeError("Argument must not be a number");return v(e,l,d)},SafeBuffer.alloc=function(e,l,d){if("number"!=typeof e)throw new TypeError("Argument must be a number");var S=v(e);return void 0!==l?"string"==typeof d?S.fill(l,d):S.fill(l):S.fill(0),S},SafeBuffer.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return v(e)},SafeBuffer.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return d.SlowBuffer(e)}}(hn,hn.exports);var mn=hn.exports.Buffer;var src$1=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var l=new Uint8Array(256),d=0;d<l.length;d++)l[d]=255;for(var v=0;v<e.length;v++){var S=e.charAt(v),B=S.charCodeAt(0);if(255!==l[B])throw new TypeError(S+" is ambiguous");l[B]=v}var T=e.length,k=e.charAt(0),x=Math.log(T)/Math.log(256),U=Math.log(256)/Math.log(T);function decodeUnsafe(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return mn.alloc(0);for(var d=0,v=0,S=0;e[d]===k;)v++,d++;for(var B=(e.length-d)*x+1>>>0,U=new Uint8Array(B);d<e.length;){var O=l[e.charCodeAt(d)];if(255===O)return;for(var F=0,P=B-1;(0!==O||F<S)&&-1!==P;P--,F++)O+=T*U[P]>>>0,U[P]=O%256>>>0,O=O/256>>>0;if(0!==O)throw new Error("Non-zero carry");S=F,d++}for(var D=B-S;D!==B&&0===U[D];)D++;var W=mn.allocUnsafe(v+(B-D));W.fill(0,0,v);for(var j=v;D!==B;)W[j++]=U[D++];return W}return{encode:function(l){if((Array.isArray(l)||l instanceof Uint8Array)&&(l=mn.from(l)),!mn.isBuffer(l))throw new TypeError("Expected Buffer");if(0===l.length)return"";for(var d=0,v=0,S=0,B=l.length;S!==B&&0===l[S];)S++,d++;for(var x=(B-S)*U+1>>>0,O=new Uint8Array(x);S!==B;){for(var F=l[S],P=0,D=x-1;(0!==F||P<v)&&-1!==D;D--,P++)F+=256*O[D]>>>0,O[D]=F%T>>>0,F=F/T>>>0;if(0!==F)throw new Error("Non-zero carry");v=P,S++}for(var W=x-v;W!==x&&0===O[W];)W++;for(var j=k.repeat(d);W<x;++W)j+=e.charAt(O[W]);return j},decodeUnsafe:decodeUnsafe,decode:function(e){var l=decodeUnsafe(e);if(l)return l;throw new Error("Non-base"+T+" character")}}},bn=src$1("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const En=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Sn=new Uint32Array(64);class SHA256 extends HashMD{constructor(){super(64,32,8,!1),this.A=0|vn[0],this.B=0|vn[1],this.C=0|vn[2],this.D=0|vn[3],this.E=0|vn[4],this.F=0|vn[5],this.G=0|vn[6],this.H=0|vn[7]}get(){const{A:e,B:l,C:d,D:v,E:S,F:B,G:T,H:k}=this;return[e,l,d,v,S,B,T,k]}set(e,l,d,v,S,B,T,k){this.A=0|e,this.B=0|l,this.C=0|d,this.D=0|v,this.E=0|S,this.F=0|B,this.G=0|T,this.H=0|k}process(e,l){for(let d=0;d<16;d++,l+=4)Sn[d]=e.getUint32(l,!1);for(let e=16;e<64;e++){const l=Sn[e-15],d=Sn[e-2],v=rotr(l,7)^rotr(l,18)^l>>>3,S=rotr(d,17)^rotr(d,19)^d>>>10;Sn[e]=S+Sn[e-7]+v+Sn[e-16]|0}let{A:d,B:v,C:S,D:B,E:T,F:k,G:x,H:U}=this;for(let e=0;e<64;e++){const l=U+(rotr(T,6)^rotr(T,11)^rotr(T,25))+((O=T)&k^~O&x)+En[e]+Sn[e]|0,F=(rotr(d,2)^rotr(d,13)^rotr(d,22))+Maj(d,v,S)|0;U=x,x=k,k=T,T=B+l|0,B=S,S=v,v=d,d=l+F|0}var O;d=d+this.A|0,v=v+this.B|0,S=S+this.C|0,B=B+this.D|0,T=T+this.E|0,k=k+this.F|0,x=x+this.G|0,U=U+this.H|0,this.set(d,v,S,B,T,k,x,U)}roundClean(){Sn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class SHA224 extends SHA256{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const kn=wrapConstructor((()=>new SHA256)),In=wrapConstructor((()=>new SHA224)),Nn=Object.freeze(Object.defineProperty({__proto__:null,sha224:In,sha256:kn},Symbol.toStringTag,{value:"Module"}));var _n={};function inRange(e,l,d){return l<=e&&e<=d}function ToDictionary(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function Stream(e){this.tokens=[].slice.call(e)}Stream.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var l=e;l.length;)this.tokens.unshift(l.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var l=e;l.length;)this.tokens.push(l.shift());else this.tokens.push(e)}};var Mn=-1;function decoderError(e,l){if(e)throw TypeError("Decoder error");return l||65533}var Rn="utf-8";function TextDecoder$1(e,l){if(!(this instanceof TextDecoder$1))return new TextDecoder$1(e,l);if((e=void 0!==e?String(e).toLowerCase():Rn)!==Rn)throw new Error("Encoding not supported. Only utf-8 is supported");l=ToDictionary(l),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(l.fatal),this._ignoreBOM=Boolean(l.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function TextEncoder$1(e,l){if(!(this instanceof TextEncoder$1))return new TextEncoder$1(e,l);if((e=void 0!==e?String(e).toLowerCase():Rn)!==Rn)throw new Error("Encoding not supported. Only utf-8 is supported");l=ToDictionary(l),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(l.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function UTF8Decoder(e){var l=e.fatal,d=0,v=0,S=0,B=128,T=191;this.handler=function(e,k){if(-1===k&&0!==S)return S=0,decoderError(l);if(-1===k)return Mn;if(0===S){if(inRange(k,0,127))return k;if(inRange(k,194,223))S=1,d=k-192;else if(inRange(k,224,239))224===k&&(B=160),237===k&&(T=159),S=2,d=k-224;else{if(!inRange(k,240,244))return decoderError(l);240===k&&(B=144),244===k&&(T=143),S=3,d=k-240}return d<<=6*S,null}if(!inRange(k,B,T))return d=S=v=0,B=128,T=191,e.prepend(k),decoderError(l);if(B=128,T=191,d+=k-128<<6*(S-(v+=1)),v!==S)return null;var x=d;return d=S=v=0,x}}function UTF8Encoder(e){e.fatal,this.handler=function(e,l){if(-1===l)return Mn;if(inRange(l,0,127))return l;var d,v;inRange(l,128,2047)?(d=1,v=192):inRange(l,2048,65535)?(d=2,v=224):inRange(l,65536,1114111)&&(d=3,v=240);for(var S=[(l>>6*d)+v];d>0;){var B=l>>6*(d-1);S.push(128|63&B),d-=1}return S}}TextDecoder$1.prototype={decode:function(e,l){var d;d="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),l=ToDictionary(l),this._streaming||(this._decoder=new UTF8Decoder({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(l.stream);for(var v,S=new Stream(d),B=[];!S.endOfStream()&&(v=this._decoder.handler(S,S.read()))!==Mn;)null!==v&&(Array.isArray(v)?B.push.apply(B,v):B.push(v));if(!this._streaming){do{if((v=this._decoder.handler(S,S.read()))===Mn)break;null!==v&&(Array.isArray(v)?B.push.apply(B,v):B.push(v))}while(!S.endOfStream());this._decoder=null}return B.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===B[0]?(this._BOMseen=!0,B.shift()):this._BOMseen=!0)),function(e){for(var l="",d=0;d<e.length;++d){var v=e[d];v<=65535?l+=String.fromCharCode(v):(v-=65536,l+=String.fromCharCode(55296+(v>>10),56320+(1023&v)))}return l}(B)}},TextEncoder$1.prototype={encode:function(e,l){e=e?String(e):"",l=ToDictionary(l),this._streaming||(this._encoder=new UTF8Encoder(this._options)),this._streaming=Boolean(l.stream);for(var d,v=[],S=new Stream(function(e){for(var l=String(e),d=l.length,v=0,S=[];v<d;){var B=l.charCodeAt(v);if(B<55296||B>57343)S.push(B);else if(56320<=B&&B<=57343)S.push(65533);else if(55296<=B&&B<=56319)if(v===d-1)S.push(65533);else{var T=e.charCodeAt(v+1);if(56320<=T&&T<=57343){var k=1023&B,x=1023&T;S.push(65536+(k<<10)+x),v+=1}else S.push(65533)}v+=1}return S}(e));!S.endOfStream()&&(d=this._encoder.handler(S,S.read()))!==Mn;)Array.isArray(d)?v.push.apply(v,d):v.push(d);if(!this._streaming){for(;(d=this._encoder.handler(S,S.read()))!==Mn;)Array.isArray(d)?v.push.apply(v,d):v.push(d);this._encoder=null}return new Uint8Array(v)}};const xn=getDefaultExportFromNamespaceIfNotNamed(Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:TextDecoder$1,TextEncoder:TextEncoder$1},Symbol.toStringTag,{value:"Module"})));var Un=ke&&ke.__createBinding||(Object.create?function(e,l,d,v){void 0===v&&(v=d),Object.defineProperty(e,v,{enumerable:!0,get:function(){return l[d]}})}:function(e,l,d,v){void 0===v&&(v=d),e[v]=l[d]}),An=ke&&ke.__setModuleDefault||(Object.create?function(e,l){Object.defineProperty(e,"default",{enumerable:!0,value:l})}:function(e,l){e.default=l}),On=ke&&ke.__decorate||function(e,l,d,v){var S,B=arguments.length,T=B<3?l:null===v?v=Object.getOwnPropertyDescriptor(l,d):v;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)T=Reflect.decorate(e,l,d,v);else for(var k=e.length-1;k>=0;k--)(S=e[k])&&(T=(B<3?S(T):B>3?S(l,d,T):S(l,d))||T);return B>3&&T&&Object.defineProperty(l,d,T),T},Cn=ke&&ke.__importStar||function(e){if(e&&e.__esModule)return e;var l={};if(null!=e)for(var d in e)"default"!==d&&Object.hasOwnProperty.call(e,d)&&Un(l,e,d);return An(l,e),l},Pn=ke&&ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_n,"__esModule",{value:!0}),_n.deserializeUnchecked=_n.deserialize=_n.serialize=_n.BinaryReader=_n.BinaryWriter=_n.BorshError=_n.baseDecode=_n.baseEncode=void 0;const Dn=Pn(ln),Wn=Pn(bn),jn=Cn(xn),zn=new("function"!=typeof TextDecoder?jn.TextDecoder:TextDecoder)("utf-8",{fatal:!0});_n.baseEncode=function(e){return"string"==typeof e&&(e=j.from(e,"utf8")),Wn.default.encode(j.from(e))},_n.baseDecode=function(e){return j.from(Wn.default.decode(e))};const Qn=1024;class BorshError extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}_n.BorshError=BorshError;class BinaryWriter{constructor(){this.buf=j.alloc(Qn),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=j.concat([this.buf,j.alloc(Qn)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(j.from(new Dn.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(j.from(new Dn.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(j.from(new Dn.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(j.from(new Dn.default(e).toArray("le",64)))}writeBuffer(e){this.buf=j.concat([j.from(this.buf.subarray(0,this.length)),e,j.alloc(Qn)]),this.length+=e.length}writeString(e){this.maybeResize();const l=j.from(e,"utf8");this.writeU32(l.length),this.writeBuffer(l)}writeFixedArray(e){this.writeBuffer(j.from(e))}writeArray(e,l){this.maybeResize(),this.writeU32(e.length);for(const d of e)this.maybeResize(),l(d)}toArray(){return this.buf.subarray(0,this.length)}}function handlingRangeError(e,l,d){const v=d.value;d.value=function(...e){try{return v.apply(this,e)}catch(e){if(e instanceof RangeError){const l=e.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(l)>=0)throw new BorshError("Reached the end of buffer when deserializing")}throw e}}}_n.BinaryWriter=BinaryWriter;class BinaryReader{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Dn.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Dn.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Dn.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Dn.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new BorshError(`Expected buffer length ${e} isn't within bounds`);const l=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,l}readString(){const e=this.readU32(),l=this.readBuffer(e);try{return zn.decode(l)}catch(e){throw new BorshError(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const l=this.readU32(),d=Array();for(let v=0;v<l;++v)d.push(e());return d}}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function serializeField(e,l,d,v,S){try{if("string"==typeof v)S[`write${capitalizeFirstLetter(v)}`](d);else if(v instanceof Array)if("number"==typeof v[0]){if(d.length!==v[0])throw new BorshError(`Expecting byte array of length ${v[0]}, but got ${d.length} bytes`);S.writeFixedArray(d)}else if(2===v.length&&"number"==typeof v[1]){if(d.length!==v[1])throw new BorshError(`Expecting byte array of length ${v[1]}, but got ${d.length} bytes`);for(let l=0;l<v[1];l++)serializeField(e,null,d[l],v[0],S)}else S.writeArray(d,(d=>{serializeField(e,l,d,v[0],S)}));else if(void 0!==v.kind)switch(v.kind){case"option":null==d?S.writeU8(0):(S.writeU8(1),serializeField(e,l,d,v.type,S));break;case"map":S.writeU32(d.size),d.forEach(((d,B)=>{serializeField(e,l,B,v.key,S),serializeField(e,l,d,v.value,S)}));break;default:throw new BorshError(`FieldType ${v} unrecognized`)}else serializeStruct(e,d,S)}catch(e){throw e instanceof BorshError&&e.addToFieldPath(l),e}}function serializeStruct(e,l,d){if("function"==typeof l.borshSerialize)return void l.borshSerialize(d);const v=e.get(l.constructor);if(!v)throw new BorshError(`Class ${l.constructor.name} is missing in schema`);if("struct"===v.kind)v.fields.map((([v,S])=>{serializeField(e,v,l[v],S,d)}));else{if("enum"!==v.kind)throw new BorshError(`Unexpected schema kind: ${v.kind} for ${l.constructor.name}`);{const S=l[v.field];for(let B=0;B<v.values.length;++B){const[T,k]=v.values[B];if(T===S){d.writeU8(B),serializeField(e,T,l[T],k,d);break}}}}}function deserializeField(e,l,d,v){try{if("string"==typeof d)return v[`read${capitalizeFirstLetter(d)}`]();if(d instanceof Array){if("number"==typeof d[0])return v.readFixedArray(d[0]);if("number"==typeof d[1]){const l=[];for(let S=0;S<d[1];S++)l.push(deserializeField(e,null,d[0],v));return l}return v.readArray((()=>deserializeField(e,l,d[0],v)))}if("option"===d.kind){return v.readU8()?deserializeField(e,l,d.type,v):void 0}if("map"===d.kind){let S=new Map;const B=v.readU32();for(let T=0;T<B;T++){const B=deserializeField(e,l,d.key,v),T=deserializeField(e,l,d.value,v);S.set(B,T)}return S}return deserializeStruct(e,d,v)}catch(e){throw e instanceof BorshError&&e.addToFieldPath(l),e}}function deserializeStruct(e,l,d){if("function"==typeof l.borshDeserialize)return l.borshDeserialize(d);const v=e.get(l);if(!v)throw new BorshError(`Class ${l.name} is missing in schema`);if("struct"===v.kind){const v={};for(const[S,B]of e.get(l).fields)v[S]=deserializeField(e,S,B,d);return new l(v)}if("enum"===v.kind){const S=d.readU8();if(S>=v.values.length)throw new BorshError(`Enum index: ${S} is out of range`);const[B,T]=v.values[S],k=deserializeField(e,B,T,d);return new l({[B]:k})}throw new BorshError(`Unexpected schema kind: ${v.kind} for ${l.constructor.name}`)}On([handlingRangeError],BinaryReader.prototype,"readU8",null),On([handlingRangeError],BinaryReader.prototype,"readU16",null),On([handlingRangeError],BinaryReader.prototype,"readU32",null),On([handlingRangeError],BinaryReader.prototype,"readU64",null),On([handlingRangeError],BinaryReader.prototype,"readU128",null),On([handlingRangeError],BinaryReader.prototype,"readU256",null),On([handlingRangeError],BinaryReader.prototype,"readU512",null),On([handlingRangeError],BinaryReader.prototype,"readString",null),On([handlingRangeError],BinaryReader.prototype,"readFixedArray",null),On([handlingRangeError],BinaryReader.prototype,"readArray",null),_n.BinaryReader=BinaryReader,_n.serialize=function(e,l,d=BinaryWriter){const v=new d;return serializeStruct(e,l,v),v.toArray()},_n.deserialize=function(e,l,d,v=BinaryReader){const S=new v(d),B=deserializeStruct(e,l,S);if(S.offset<d.length)throw new BorshError(`Unexpected ${d.length-S.offset} bytes after deserialized data`);return B},_n.deserializeUnchecked=function(e,l,d,v=BinaryReader){return deserializeStruct(e,l,new v(d))};var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.s16=Kn.s8=Kn.nu64be=Kn.u48be=Kn.u40be=Kn.u32be=Kn.u24be=Kn.u16be=Kn.nu64=Kn.u48=Kn.u40=Kn.u32=Kn.u24=Kn.u16=Kn.u8=Kn.offset=Kn.greedy=Kn.Constant=Kn.UTF8=Kn.CString=Kn.Blob=Kn.Boolean=Kn.BitField=Kn.BitStructure=Kn.VariantLayout=Kn.Union=Kn.UnionLayoutDiscriminator=Kn.UnionDiscriminator=Kn.Structure=Kn.Sequence=Kn.DoubleBE=Kn.Double=Kn.FloatBE=Kn.Float=Kn.NearInt64BE=Kn.NearInt64=Kn.NearUInt64BE=Kn.NearUInt64=Kn.IntBE=Kn.Int=Kn.UIntBE=Kn.UInt=Kn.OffsetLayout=Kn.GreedyCount=Kn.ExternalLayout=Kn.bindConstructorLayout=Kn.nameWithProperty=Kn.Layout=Kn.uint8ArrayToBuffer=Kn.checkUint8Array=void 0,Kn.constant=Kn.utf8=Kn.cstr=Kn.blob=Kn.unionLayoutDiscriminator=Kn.union=Kn.seq=Kn.bits=Kn.struct=Kn.f64be=Kn.f64=Kn.f32be=Kn.f32=Kn.ns64be=Kn.s48be=Kn.s40be=Kn.s32be=Kn.s24be=Kn.s16be=Kn.ns64=Kn.s48=Kn.s40=Kn.s32=Kn.s24=void 0;const Hn=pt;function checkUint8Array(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function uint8ArrayToBuffer(e){return checkUint8Array(e),Hn.Buffer.from(e.buffer,e.byteOffset,e.length)}Kn.checkUint8Array=checkUint8Array,Kn.uint8ArrayToBuffer=uint8ArrayToBuffer;class Layout{constructor(e,l){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=l}makeDestinationObject(){return{}}getSpan(e,l){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const l=Object.create(this.constructor.prototype);return Object.assign(l,this),l.property=e,l}fromArray(e){}}function nameWithProperty(e,l){return l.property?e+"["+l.property+"]":e}Kn.Layout=Layout,Kn.nameWithProperty=nameWithProperty,Kn.bindConstructorLayout=function(e,l){if("function"!=typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(l&&l instanceof Layout))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(l,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=l,l.boundConstructor_=e,l.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,d){return l.encode(this,e,d)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,d)=>l.decode(e,d),writable:!0})};class ExternalLayout extends Layout{isCount(){throw new Error("ExternalLayout is abstract")}}Kn.ExternalLayout=ExternalLayout;class GreedyCount extends ExternalLayout{constructor(e=1,l){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,l),this.elementSpan=e}isCount(){return!0}decode(e,l=0){checkUint8Array(e);const d=e.length-l;return Math.floor(d/this.elementSpan)}encode(e,l,d){return 0}}Kn.GreedyCount=GreedyCount;class OffsetLayout extends ExternalLayout{constructor(e,l=0,d){if(!(e instanceof Layout))throw new TypeError("layout must be a Layout");if(!Number.isInteger(l))throw new TypeError("offset must be integer or undefined");super(e.span,d||e.property),this.layout=e,this.offset=l}isCount(){return this.layout instanceof UInt||this.layout instanceof UIntBE}decode(e,l=0){return this.layout.decode(e,l+this.offset)}encode(e,l,d=0){return this.layout.encode(e,l,d+this.offset)}}Kn.OffsetLayout=OffsetLayout;class UInt extends Layout{constructor(e,l){if(super(e,l),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,l=0){return uint8ArrayToBuffer(e).readUIntLE(l,this.span)}encode(e,l,d=0){return uint8ArrayToBuffer(l).writeUIntLE(e,d,this.span),this.span}}Kn.UInt=UInt;class UIntBE extends Layout{constructor(e,l){if(super(e,l),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,l=0){return uint8ArrayToBuffer(e).readUIntBE(l,this.span)}encode(e,l,d=0){return uint8ArrayToBuffer(l).writeUIntBE(e,d,this.span),this.span}}Kn.UIntBE=UIntBE;class Int extends Layout{constructor(e,l){if(super(e,l),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,l=0){return uint8ArrayToBuffer(e).readIntLE(l,this.span)}encode(e,l,d=0){return uint8ArrayToBuffer(l).writeIntLE(e,d,this.span),this.span}}Kn.Int=Int;class IntBE extends Layout{constructor(e,l){if(super(e,l),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,l=0){return uint8ArrayToBuffer(e).readIntBE(l,this.span)}encode(e,l,d=0){return uint8ArrayToBuffer(l).writeIntBE(e,d,this.span),this.span}}Kn.IntBE=IntBE;const qn=Math.pow(2,32);function divmodInt64(e){const l=Math.floor(e/qn);return{hi32:l,lo32:e-l*qn}}function roundedInt64(e,l){return e*qn+l}class NearUInt64 extends Layout{constructor(e){super(8,e)}decode(e,l=0){const d=uint8ArrayToBuffer(e),v=d.readUInt32LE(l);return roundedInt64(d.readUInt32LE(l+4),v)}encode(e,l,d=0){const v=divmodInt64(e),S=uint8ArrayToBuffer(l);return S.writeUInt32LE(v.lo32,d),S.writeUInt32LE(v.hi32,d+4),8}}Kn.NearUInt64=NearUInt64;class NearUInt64BE extends Layout{constructor(e){super(8,e)}decode(e,l=0){const d=uint8ArrayToBuffer(e);return roundedInt64(d.readUInt32BE(l),d.readUInt32BE(l+4))}encode(e,l,d=0){const v=divmodInt64(e),S=uint8ArrayToBuffer(l);return S.writeUInt32BE(v.hi32,d),S.writeUInt32BE(v.lo32,d+4),8}}Kn.NearUInt64BE=NearUInt64BE;class NearInt64 extends Layout{constructor(e){super(8,e)}decode(e,l=0){const d=uint8ArrayToBuffer(e),v=d.readUInt32LE(l);return roundedInt64(d.readInt32LE(l+4),v)}encode(e,l,d=0){const v=divmodInt64(e),S=uint8ArrayToBuffer(l);return S.writeUInt32LE(v.lo32,d),S.writeInt32LE(v.hi32,d+4),8}}Kn.NearInt64=NearInt64;class NearInt64BE extends Layout{constructor(e){super(8,e)}decode(e,l=0){const d=uint8ArrayToBuffer(e);return roundedInt64(d.readInt32BE(l),d.readUInt32BE(l+4))}encode(e,l,d=0){const v=divmodInt64(e),S=uint8ArrayToBuffer(l);return S.writeInt32BE(v.hi32,d),S.writeUInt32BE(v.lo32,d+4),8}}Kn.NearInt64BE=NearInt64BE;class Float extends Layout{constructor(e){super(4,e)}decode(e,l=0){return uint8ArrayToBuffer(e).readFloatLE(l)}encode(e,l,d=0){return uint8ArrayToBuffer(l).writeFloatLE(e,d),4}}Kn.Float=Float;class FloatBE extends Layout{constructor(e){super(4,e)}decode(e,l=0){return uint8ArrayToBuffer(e).readFloatBE(l)}encode(e,l,d=0){return uint8ArrayToBuffer(l).writeFloatBE(e,d),4}}Kn.FloatBE=FloatBE;class Double extends Layout{constructor(e){super(8,e)}decode(e,l=0){return uint8ArrayToBuffer(e).readDoubleLE(l)}encode(e,l,d=0){return uint8ArrayToBuffer(l).writeDoubleLE(e,d),8}}Kn.Double=Double;class DoubleBE extends Layout{constructor(e){super(8,e)}decode(e,l=0){return uint8ArrayToBuffer(e).readDoubleBE(l)}encode(e,l,d=0){return uint8ArrayToBuffer(l).writeDoubleBE(e,d),8}}Kn.DoubleBE=DoubleBE;class Sequence extends Layout{constructor(e,l,d){if(!(e instanceof Layout))throw new TypeError("elementLayout must be a Layout");if(!(l instanceof ExternalLayout&&l.isCount()||Number.isInteger(l)&&0<=l))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let v=-1;!(l instanceof ExternalLayout)&&0<e.span&&(v=l*e.span),super(v,d),this.elementLayout=e,this.count=l}getSpan(e,l=0){if(0<=this.span)return this.span;let d=0,v=this.count;if(v instanceof ExternalLayout&&(v=v.decode(e,l)),0<this.elementLayout.span)d=v*this.elementLayout.span;else{let S=0;for(;S<v;)d+=this.elementLayout.getSpan(e,l+d),++S}return d}decode(e,l=0){const d=[];let v=0,S=this.count;for(S instanceof ExternalLayout&&(S=S.decode(e,l));v<S;)d.push(this.elementLayout.decode(e,l)),l+=this.elementLayout.getSpan(e,l),v+=1;return d}encode(e,l,d=0){const v=this.elementLayout,S=e.reduce(((e,S)=>e+v.encode(S,l,d+e)),0);return this.count instanceof ExternalLayout&&this.count.encode(e.length,l,d),S}}Kn.Sequence=Sequence;class Structure extends Layout{constructor(e,l,d){if(!Array.isArray(e)||!e.reduce(((e,l)=>e&&l instanceof Layout),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof l&&void 0===d&&(d=l,l=void 0);for(const l of e)if(0>l.span&&void 0===l.property)throw new Error("fields cannot contain unnamed variable-length layout");let v=-1;try{v=e.reduce(((e,l)=>e+l.getSpan()),0)}catch(e){}super(v,l),this.fields=e,this.decodePrefixes=!!d}getSpan(e,l=0){if(0<=this.span)return this.span;let d=0;try{d=this.fields.reduce(((d,v)=>{const S=v.getSpan(e,l);return l+=S,d+S}),0)}catch(e){throw new RangeError("indeterminate span")}return d}decode(e,l=0){checkUint8Array(e);const d=this.makeDestinationObject();for(const v of this.fields)if(void 0!==v.property&&(d[v.property]=v.decode(e,l)),l+=v.getSpan(e,l),this.decodePrefixes&&e.length===l)break;return d}encode(e,l,d=0){const v=d;let S=0,B=0;for(const v of this.fields){let T=v.span;if(B=0<T?T:0,void 0!==v.property){const S=e[v.property];void 0!==S&&(B=v.encode(S,l,d),0>T&&(T=v.getSpan(l,d)))}S=d,d+=T}return S+B-v}fromArray(e){const l=this.makeDestinationObject();for(const d of this.fields)void 0!==d.property&&0<e.length&&(l[d.property]=e.shift());return l}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const l of this.fields)if(l.property===e)return l}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let l=0;for(const d of this.fields){if(d.property===e)return l;0>d.span?l=-1:0<=l&&(l+=d.span)}}}Kn.Structure=Structure;class UnionDiscriminator{constructor(e){this.property=e}decode(e,l){throw new Error("UnionDiscriminator is abstract")}encode(e,l,d){throw new Error("UnionDiscriminator is abstract")}}Kn.UnionDiscriminator=UnionDiscriminator;class UnionLayoutDiscriminator extends UnionDiscriminator{constructor(e,l){if(!(e instanceof ExternalLayout&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(l||e.property||"variant"),this.layout=e}decode(e,l){return this.layout.decode(e,l)}encode(e,l,d){return this.layout.encode(e,l,d)}}Kn.UnionLayoutDiscriminator=UnionLayoutDiscriminator;class Union extends Layout{constructor(e,l,d){let v;if(e instanceof UInt||e instanceof UIntBE)v=new UnionLayoutDiscriminator(new OffsetLayout(e));else if(e instanceof ExternalLayout&&e.isCount())v=new UnionLayoutDiscriminator(e);else{if(!(e instanceof UnionDiscriminator))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");v=e}if(void 0===l&&(l=null),!(null===l||l instanceof Layout))throw new TypeError("defaultLayout must be null or a Layout");if(null!==l){if(0>l.span)throw new Error("defaultLayout must have constant span");void 0===l.property&&(l=l.replicate("content"))}let S=-1;l&&(S=l.span,0<=S&&(e instanceof UInt||e instanceof UIntBE)&&(S+=v.layout.span)),super(S,d),this.discriminator=v,this.usesPrefixDiscriminator=e instanceof UInt||e instanceof UIntBE,this.defaultLayout=l,this.registry={};let B=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return B(e)},this.configGetSourceVariant=function(e){B=e.bind(this)}}getSpan(e,l=0){if(0<=this.span)return this.span;const d=this.getVariant(e,l);if(!d)throw new Error("unable to determine span for unrecognized variant");return d.getSpan(e,l)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const l=this.registry[e[this.discriminator.property]];if(l&&(!l.layout||l.property&&Object.prototype.hasOwnProperty.call(e,l.property)))return l}else for(const l in this.registry){const d=this.registry[l];if(d.property&&Object.prototype.hasOwnProperty.call(e,d.property))return d}throw new Error("unable to infer src variant")}decode(e,l=0){let d;const v=this.discriminator,S=v.decode(e,l),B=this.registry[S];if(void 0===B){const B=this.defaultLayout;let T=0;this.usesPrefixDiscriminator&&(T=v.layout.span),d=this.makeDestinationObject(),d[v.property]=S,d[B.property]=B.decode(e,l+T)}else d=B.decode(e,l);return d}encode(e,l,d=0){const v=this.getSourceVariant(e);if(void 0===v){const v=this.discriminator,S=this.defaultLayout;let B=0;return this.usesPrefixDiscriminator&&(B=v.layout.span),v.encode(e[v.property],l,d),B+S.encode(e[S.property],l,d+B)}return v.encode(e,l,d)}addVariant(e,l,d){const v=new VariantLayout(this,e,l,d);return this.registry[e]=v,v}getVariant(e,l=0){let d;return d=e instanceof Uint8Array?this.discriminator.decode(e,l):e,this.registry[d]}}Kn.Union=Union;class VariantLayout extends Layout{constructor(e,l,d,v){if(!(e instanceof Union))throw new TypeError("union must be a Union");if(!Number.isInteger(l)||0>l)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof d&&void 0===v&&(v=d,d=null),d){if(!(d instanceof Layout))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=d.span&&d.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof v)throw new TypeError("variant must have a String property")}let S=e.span;0>e.span&&(S=d?d.span:0,0<=S&&e.usesPrefixDiscriminator&&(S+=e.discriminator.layout.span)),super(S,v),this.union=e,this.variant=l,this.layout=d||null}getSpan(e,l=0){if(0<=this.span)return this.span;let d=0;this.union.usesPrefixDiscriminator&&(d=this.union.discriminator.layout.span);let v=0;return this.layout&&(v=this.layout.getSpan(e,l+d)),d+v}decode(e,l=0){const d=this.makeDestinationObject();if(this!==this.union.getVariant(e,l))throw new Error("variant mismatch");let v=0;return this.union.usesPrefixDiscriminator&&(v=this.union.discriminator.layout.span),this.layout?d[this.property]=this.layout.decode(e,l+v):this.property?d[this.property]=!0:this.union.usesPrefixDiscriminator&&(d[this.union.discriminator.property]=this.variant),d}encode(e,l,d=0){let v=0;if(this.union.usesPrefixDiscriminator&&(v=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,l,d);let S=v;if(this.layout&&(this.layout.encode(e[this.property],l,d+v),S+=this.layout.getSpan(l,d+v),0<=this.union.span&&S>this.union.span))throw new Error("encoded variant overruns containing union");return S}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function fixBitwiseResult(e){return 0>e&&(e+=4294967296),e}Kn.VariantLayout=VariantLayout;class BitStructure extends Layout{constructor(e,l,d){if(!(e instanceof UInt||e instanceof UIntBE))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof l&&void 0===d&&(d=l,l=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,d),this.word=e,this.msb=!!l,this.fields=[];let v=0;this._packedSetValue=function(e){return v=fixBitwiseResult(e),this},this._packedGetValue=function(){return v}}decode(e,l=0){const d=this.makeDestinationObject(),v=this.word.decode(e,l);this._packedSetValue(v);for(const l of this.fields)void 0!==l.property&&(d[l.property]=l.decode(e));return d}encode(e,l,d=0){const v=this.word.decode(l,d);this._packedSetValue(v);for(const l of this.fields)if(void 0!==l.property){const d=e[l.property];void 0!==d&&l.encode(d)}return this.word.encode(this._packedGetValue(),l,d)}addField(e,l){const d=new BitField(this,e,l);return this.fields.push(d),d}addBoolean(e){const l=new Gn(this,e);return this.fields.push(l),l}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const l of this.fields)if(l.property===e)return l}}Kn.BitStructure=BitStructure;class BitField{constructor(e,l,d){if(!(e instanceof BitStructure))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(l)||0>=l)throw new TypeError("bits must be positive integer");const v=8*e.span,S=e.fields.reduce(((e,l)=>e+l.bits),0);if(l+S>v)throw new Error("bits too long for span remainder ("+(v-S)+" of "+v+" remain)");this.container=e,this.bits=l,this.valueMask=(1<<l)-1,32===l&&(this.valueMask=4294967295),this.start=S,this.container.msb&&(this.start=v-S-l),this.wordMask=fixBitwiseResult(this.valueMask<<this.start),this.property=d}decode(e,l){return fixBitwiseResult(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==fixBitwiseResult(e&this.valueMask))throw new TypeError(nameWithProperty("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const l=this.container._packedGetValue(),d=fixBitwiseResult(e<<this.start);this.container._packedSetValue(fixBitwiseResult(l&~this.wordMask)|d)}}Kn.BitField=BitField;let Gn=class extends BitField{constructor(e,l){super(e,1,l)}decode(e,l){return!!super.decode(e,l)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}};Kn.Boolean=Gn;let Jn=class extends Layout{constructor(e,l){if(!(e instanceof ExternalLayout&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let d=-1;e instanceof ExternalLayout||(d=e),super(d,l),this.length=e}getSpan(e,l){let d=this.span;return 0>d&&(d=this.length.decode(e,l)),d}decode(e,l=0){let d=this.span;return 0>d&&(d=this.length.decode(e,l)),uint8ArrayToBuffer(e).slice(l,l+d)}encode(e,l,d){let v=this.length;if(this.length instanceof ExternalLayout&&(v=e.length),!(e instanceof Uint8Array&&v===e.length))throw new TypeError(nameWithProperty("Blob.encode",this)+" requires (length "+v+") Uint8Array as src");if(d+v>l.length)throw new RangeError("encoding overruns Uint8Array");const S=uint8ArrayToBuffer(e);return uint8ArrayToBuffer(l).write(S.toString("hex"),d,v,"hex"),this.length instanceof ExternalLayout&&this.length.encode(v,l,d),v}};Kn.Blob=Jn;class CString extends Layout{constructor(e){super(-1,e)}getSpan(e,l=0){checkUint8Array(e);let d=l;for(;d<e.length&&0!==e[d];)d+=1;return 1+d-l}decode(e,l=0){const d=this.getSpan(e,l);return uint8ArrayToBuffer(e).slice(l,l+d-1).toString("utf-8")}encode(e,l,d=0){"string"!=typeof e&&(e=String(e));const v=Hn.Buffer.from(e,"utf8"),S=v.length;if(d+S>l.length)throw new RangeError("encoding overruns Buffer");const B=uint8ArrayToBuffer(l);return v.copy(B,d),B[d+S]=0,S+1}}Kn.CString=CString;class UTF8 extends Layout{constructor(e,l){if("string"==typeof e&&void 0===l&&(l=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,l),this.maxSpan=e}getSpan(e,l=0){return checkUint8Array(e),e.length-l}decode(e,l=0){const d=this.getSpan(e,l);if(0<=this.maxSpan&&this.maxSpan<d)throw new RangeError("text length exceeds maxSpan");return uint8ArrayToBuffer(e).slice(l,l+d).toString("utf-8")}encode(e,l,d=0){"string"!=typeof e&&(e=String(e));const v=Hn.Buffer.from(e,"utf8"),S=v.length;if(0<=this.maxSpan&&this.maxSpan<S)throw new RangeError("text length exceeds maxSpan");if(d+S>l.length)throw new RangeError("encoding overruns Buffer");return v.copy(uint8ArrayToBuffer(l),d),S}}Kn.UTF8=UTF8;class Constant extends Layout{constructor(e,l){super(0,l),this.value=e}decode(e,l){return this.value}encode(e,l,d){return 0}}Kn.Constant=Constant,Kn.greedy=(e,l)=>new GreedyCount(e,l),Kn.offset=(e,l,d)=>new OffsetLayout(e,l,d),Kn.u8=e=>new UInt(1,e),Kn.u16=e=>new UInt(2,e),Kn.u24=e=>new UInt(3,e),Kn.u32=e=>new UInt(4,e),Kn.u40=e=>new UInt(5,e),Kn.u48=e=>new UInt(6,e),Kn.nu64=e=>new NearUInt64(e),Kn.u16be=e=>new UIntBE(2,e),Kn.u24be=e=>new UIntBE(3,e),Kn.u32be=e=>new UIntBE(4,e),Kn.u40be=e=>new UIntBE(5,e),Kn.u48be=e=>new UIntBE(6,e),Kn.nu64be=e=>new NearUInt64BE(e),Kn.s8=e=>new Int(1,e),Kn.s16=e=>new Int(2,e),Kn.s24=e=>new Int(3,e),Kn.s32=e=>new Int(4,e),Kn.s40=e=>new Int(5,e),Kn.s48=e=>new Int(6,e),Kn.ns64=e=>new NearInt64(e),Kn.s16be=e=>new IntBE(2,e),Kn.s24be=e=>new IntBE(3,e),Kn.s32be=e=>new IntBE(4,e),Kn.s40be=e=>new IntBE(5,e),Kn.s48be=e=>new IntBE(6,e),Kn.ns64be=e=>new NearInt64BE(e),Kn.f32=e=>new Float(e),Kn.f32be=e=>new FloatBE(e),Kn.f64=e=>new Double(e),Kn.f64be=e=>new DoubleBE(e),Kn.struct=(e,l,d)=>new Structure(e,l,d),Kn.bits=(e,l,d)=>new BitStructure(e,l,d),Kn.seq=(e,l,d)=>new Sequence(e,l,d),Kn.union=(e,l,d)=>new Union(e,l,d),Kn.unionLayoutDiscriminator=(e,l)=>new UnionLayoutDiscriminator(e,l),Kn.blob=(e,l)=>new Jn(e,l),Kn.cstr=e=>new CString(e),Kn.utf8=(e,l)=>new UTF8(e,l),Kn.constant=(e,l)=>new Constant(e,l);var $n={};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xn,to={exports:{}},no={exports:{}},oo={};function require_classes(){if(Xn)return oo;Xn=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.WriteStream=oo.StatsFs=oo.Stats=oo.ReadStream=oo.FileWriteStream=oo.FileReadStream=oo.Dirent=oo.Dir=void 0;var e,l=(e=Me)&&e.__esModule?e:{default:e};return oo.Dir=l.default.__createMock__("fs.Dir"),oo.Dirent=l.default.__createMock__("fs.Dirent"),oo.Stats=l.default.__createMock__("fs.Stats"),oo.ReadStream=l.default.__createMock__("fs.ReadStream"),oo.WriteStream=l.default.__createMock__("fs.WriteStream"),oo.FileReadStream=l.default.__createMock__("fs.FileReadStream"),oo.FileWriteStream=l.default.__createMock__("fs.FileWriteStream"),oo.StatsFs=l.default.__createMock__("fs.StatsFs"),oo}var io,so={};function require_constants(){return io||(io=1,Object.defineProperty(so,"__esModule",{value:!0}),so.constants=so.X_OK=so.W_OK=so.R_OK=so.F_OK=void 0,so.F_OK=0,so.R_OK=4,so.W_OK=2,so.X_OK=1,so.constants=Object.create({UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,UV_FS_O_FILEMAP:0,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DSYNC:4096,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4})),so}var ao,co,uo,lo={},ho={exports:{}};function require_promises(){return ao||(ao=1,function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.chown=l.chmod=l.appendFile=l.access=void 0,Object.defineProperty(l,"constants",{enumerable:!0,get:function(){return v.constants}}),l.writeFile=l.watch=l.utimes=l.unlink=l.truncate=l.symlink=l.statfs=l.stat=l.rmdir=l.rm=l.rename=l.realpath=l.readlink=l.readdir=l.readFile=l.opendir=l.open=l.mkdtemp=l.mkdir=l.lutimes=l.lstat=l.link=l.lchown=l.lchmod=l.default=l.cp=l.copyFile=void 0;var d=Ce,v=require_constants();l.access=(0,d.notImplemented)("fs.access"),l.copyFile=(0,d.notImplemented)("fs.copyFile"),l.cp=(0,d.notImplemented)("fs.cp"),l.open=(0,d.notImplemented)("fs.open"),l.opendir=(0,d.notImplemented)("fs.opendir"),l.rename=(0,d.notImplemented)("fs.rename"),l.truncate=(0,d.notImplemented)("fs.truncate"),l.rm=(0,d.notImplemented)("fs.rm"),l.rmdir=(0,d.notImplemented)("fs.rmdir"),l.mkdir=(0,d.notImplemented)("fs.mkdir"),l.readdir=(0,d.notImplemented)("fs.readdir"),l.readlink=(0,d.notImplemented)("fs.readlink"),l.symlink=(0,d.notImplemented)("fs.symlink"),l.lstat=(0,d.notImplemented)("fs.lstat"),l.stat=(0,d.notImplemented)("fs.stat"),l.link=(0,d.notImplemented)("fs.link"),l.unlink=(0,d.notImplemented)("fs.unlink"),l.chmod=(0,d.notImplemented)("fs.chmod"),l.lchmod=(0,d.notImplemented)("fs.lchmod"),l.lchown=(0,d.notImplemented)("fs.lchown"),l.chown=(0,d.notImplemented)("fs.chown"),l.utimes=(0,d.notImplemented)("fs.utimes"),l.lutimes=(0,d.notImplemented)("fs.lutimes"),l.realpath=(0,d.notImplemented)("fs.realpath"),l.mkdtemp=(0,d.notImplemented)("fs.mkdtemp"),l.writeFile=(0,d.notImplemented)("fs.writeFile"),l.appendFile=(0,d.notImplemented)("fs.appendFile"),l.readFile=(0,d.notImplemented)("fs.readFile"),l.watch=(0,d.notImplemented)("fs.watch"),l.statfs=(0,d.notImplemented)("fs.statfs"),e.exports={}}(ho,ho.exports)),ho.exports}function require_fs(){if(co)return lo;co=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.writevSync=lo.writev=lo.writeSync=lo.writeFileSync=lo.writeFile=lo.write=lo.watchFile=lo.watch=lo.utimesSync=lo.utimes=lo.unwatchFile=lo.unlinkSync=lo.unlink=lo.truncateSync=lo.truncate=lo.symlinkSync=lo.symlink=lo.statfsSync=lo.statfs=lo.statSync=lo.stat=lo.rmdirSync=lo.rmdir=lo.rmSync=lo.rm=lo.renameSync=lo.rename=lo.realpathSync=lo.realpath=lo.readvSync=lo.readv=lo.readlinkSync=lo.readlink=lo.readdirSync=lo.readdir=lo.readSync=lo.readFileSync=lo.readFile=lo.read=lo.opendirSync=lo.opendir=lo.openSync=lo.openAsBlob=lo.open=lo.mkdtempSync=lo.mkdtemp=lo.mkdirSync=lo.mkdir=lo.lutimesSync=lo.lutimes=lo.lstatSync=lo.lstat=lo.linkSync=lo.link=lo.lchownSync=lo.lchown=lo.lchmodSync=lo.lchmod=lo.futimesSync=lo.futimes=lo.ftruncateSync=lo.ftruncate=lo.fsyncSync=lo.fsync=lo.fstatSync=lo.fstat=lo.fdatasyncSync=lo.fdatasync=lo.fchownSync=lo.fchown=lo.fchmodSync=lo.fchmod=lo.existsSync=lo.exists=lo.createWriteStream=lo.createReadStream=lo.cpSync=lo.cp=lo.copyFileSync=lo.copyFile=lo.closeSync=lo.close=lo.chownSync=lo.chown=lo.chmodSync=lo.chmod=lo.appendFileSync=lo.appendFile=lo.accessSync=lo.access=lo._toUnixTimestamp=void 0;var e=Ce,l=function(e,l){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var d=_getRequireWildcardCache(l);if(d&&d.has(e))return d.get(e);var v={__proto__:null},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in e)if("default"!==B&&{}.hasOwnProperty.call(e,B)){var T=S?Object.getOwnPropertyDescriptor(e,B):null;T&&(T.get||T.set)?Object.defineProperty(v,B,T):v[B]=e[B]}return v.default=e,d&&d.set(e,v),v}(require_promises());function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var l=new WeakMap,d=new WeakMap;return(_getRequireWildcardCache=function(e){return e?d:l})(e)}function notImplementedAsync(l){const d=(0,e.notImplemented)(l);return d.__promisify__=()=>(0,e.notImplemented)(l+".__promisify__"),d.native=d,d}function callbackify(e){const fnc=function(...l){const d=l.pop();e().catch((e=>d(e))).then((e=>d(void 0,e)))};return fnc.__promisify__=e,fnc.native=fnc,fnc}lo.access=callbackify(l.access),lo.appendFile=callbackify(l.appendFile),lo.chown=callbackify(l.chown),lo.chmod=callbackify(l.chmod),lo.copyFile=callbackify(l.copyFile),lo.cp=callbackify(l.cp),lo.lchown=callbackify(l.lchown),lo.lchmod=callbackify(l.lchmod),lo.link=callbackify(l.link),lo.lstat=callbackify(l.lstat),lo.lutimes=callbackify(l.lutimes),lo.mkdir=callbackify(l.mkdir),lo.mkdtemp=callbackify(l.mkdtemp),lo.realpath=callbackify(l.realpath),lo.open=callbackify(l.open),lo.opendir=callbackify(l.opendir),lo.readdir=callbackify(l.readdir),lo.readFile=callbackify(l.readFile),lo.readlink=callbackify(l.readlink),lo.rename=callbackify(l.rename),lo.rm=callbackify(l.rm),lo.rmdir=callbackify(l.rmdir),lo.stat=callbackify(l.stat),lo.symlink=callbackify(l.symlink),lo.truncate=callbackify(l.truncate),lo.unlink=callbackify(l.unlink),lo.utimes=callbackify(l.utimes),lo.writeFile=callbackify(l.writeFile),lo.statfs=callbackify(l.statfs),lo.close=notImplementedAsync("fs.close"),lo.createReadStream=notImplementedAsync("fs.createReadStream"),lo.createWriteStream=notImplementedAsync("fs.createWriteStream"),lo.exists=notImplementedAsync("fs.exists"),lo.fchown=notImplementedAsync("fs.fchown"),lo.fchmod=notImplementedAsync("fs.fchmod"),lo.fdatasync=notImplementedAsync("fs.fdatasync"),lo.fstat=notImplementedAsync("fs.fstat"),lo.fsync=notImplementedAsync("fs.fsync"),lo.ftruncate=notImplementedAsync("fs.ftruncate"),lo.futimes=notImplementedAsync("fs.futimes"),lo.lstatSync=notImplementedAsync("fs.lstatSync"),lo.read=notImplementedAsync("fs.read"),lo.readv=notImplementedAsync("fs.readv"),lo.realpathSync=notImplementedAsync("fs.realpathSync"),lo.statSync=notImplementedAsync("fs.statSync"),lo.unwatchFile=notImplementedAsync("fs.unwatchFile"),lo.watch=notImplementedAsync("fs.watch"),lo.watchFile=notImplementedAsync("fs.watchFile"),lo.write=notImplementedAsync("fs.write"),lo.writev=notImplementedAsync("fs.writev"),lo._toUnixTimestamp=notImplementedAsync("fs._toUnixTimestamp"),lo.openAsBlob=notImplementedAsync("fs.openAsBlob"),lo.appendFileSync=(0,e.notImplemented)("fs.appendFileSync"),lo.accessSync=(0,e.notImplemented)("fs.accessSync"),lo.chownSync=(0,e.notImplemented)("fs.chownSync"),lo.chmodSync=(0,e.notImplemented)("fs.chmodSync"),lo.closeSync=(0,e.notImplemented)("fs.closeSync"),lo.copyFileSync=(0,e.notImplemented)("fs.copyFileSync"),lo.cpSync=(0,e.notImplemented)("fs.cpSync");return lo.existsSync=()=>!1,lo.fchownSync=(0,e.notImplemented)("fs.fchownSync"),lo.fchmodSync=(0,e.notImplemented)("fs.fchmodSync"),lo.fdatasyncSync=(0,e.notImplemented)("fs.fdatasyncSync"),lo.fstatSync=(0,e.notImplemented)("fs.fstatSync"),lo.fsyncSync=(0,e.notImplemented)("fs.fsyncSync"),lo.ftruncateSync=(0,e.notImplemented)("fs.ftruncateSync"),lo.futimesSync=(0,e.notImplemented)("fs.futimesSync"),lo.lchownSync=(0,e.notImplemented)("fs.lchownSync"),lo.lchmodSync=(0,e.notImplemented)("fs.lchmodSync"),lo.linkSync=(0,e.notImplemented)("fs.linkSync"),lo.lutimesSync=(0,e.notImplemented)("fs.lutimesSync"),lo.mkdirSync=(0,e.notImplemented)("fs.mkdirSync"),lo.mkdtempSync=(0,e.notImplemented)("fs.mkdtempSync"),lo.openSync=(0,e.notImplemented)("fs.openSync"),lo.opendirSync=(0,e.notImplemented)("fs.opendirSync"),lo.readdirSync=(0,e.notImplemented)("fs.readdirSync"),lo.readSync=(0,e.notImplemented)("fs.readSync"),lo.readvSync=(0,e.notImplemented)("fs.readvSync"),lo.readFileSync=(0,e.notImplemented)("fs.readFileSync"),lo.readlinkSync=(0,e.notImplemented)("fs.readlinkSync"),lo.renameSync=(0,e.notImplemented)("fs.renameSync"),lo.rmSync=(0,e.notImplemented)("fs.rmSync"),lo.rmdirSync=(0,e.notImplemented)("fs.rmdirSync"),lo.symlinkSync=(0,e.notImplemented)("fs.symlinkSync"),lo.truncateSync=(0,e.notImplemented)("fs.truncateSync"),lo.unlinkSync=(0,e.notImplemented)("fs.unlinkSync"),lo.utimesSync=(0,e.notImplemented)("fs.utimesSync"),lo.writeFileSync=(0,e.notImplemented)("fs.writeFileSync"),lo.writeSync=(0,e.notImplemented)("fs.writeSync"),lo.writevSync=(0,e.notImplemented)("fs.writevSync"),lo.statfsSync=(0,e.notImplemented)("fs.statfsSync"),lo}function requireFs(){return uo||(uo=1,function(e,l){Object.defineProperty(l,"__esModule",{value:!0});var d={promises:!0};l.promises=l.default=void 0;var v=_interopRequireWildcard(require_classes());Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(d,e)||e in l&&l[e]===v[e]||Object.defineProperty(l,e,{enumerable:!0,get:function(){return v[e]}}))}));var S=_interopRequireWildcard(require_constants());Object.keys(S).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(d,e)||e in l&&l[e]===S[e]||Object.defineProperty(l,e,{enumerable:!0,get:function(){return S[e]}}))}));var B=_interopRequireWildcard(require_fs());Object.keys(B).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(d,e)||e in l&&l[e]===B[e]||Object.defineProperty(l,e,{enumerable:!0,get:function(){return B[e]}}))}));var T=_interopRequireWildcard(require_promises());function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var l=new WeakMap,d=new WeakMap;return(_getRequireWildcardCache=function(e){return e?d:l})(e)}function _interopRequireWildcard(e,l){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var d=_getRequireWildcardCache(l);if(d&&d.has(e))return d.get(e);var v={__proto__:null},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in e)if("default"!==B&&{}.hasOwnProperty.call(e,B)){var T=S?Object.getOwnPropertyDescriptor(e,B):null;T&&(T.get||T.set)?Object.defineProperty(v,B,T):v[B]=e[B]}return v.default=e,d&&d.set(e,v),v}const k=l.promises=T;e.exports={...v,...S,...B,promises:k}}(no,no.exports)),no.exports}var fo={exports:{}};const po=getDefaultExportFromNamespaceIfNotNamed(Te);var mo,yo,go,bo;function requirePath(){return mo||(mo=1,function(e,l){Object.defineProperty(l,"__esModule",{value:!0});var d={posix:!0,win32:!0,platform:!0};l.win32=l.posix=l.platform=l.default=void 0;var v=function(e,l){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var d=_getRequireWildcardCache(l);if(d&&d.has(e))return d.get(e);var v={__proto__:null},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in e)if("default"!==B&&{}.hasOwnProperty.call(e,B)){var T=S?Object.getOwnPropertyDescriptor(e,B):null;T&&(T.get||T.set)?Object.defineProperty(v,B,T):v[B]=e[B]}return v.default=e,d&&d.set(e,v),v}(po);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var l=new WeakMap,d=new WeakMap;return(_getRequireWildcardCache=function(e){return e?d:l})(e)}Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(d,e)||e in l&&l[e]===v[e]||Object.defineProperty(l,e,{enumerable:!0,get:function(){return v[e]}}))}));const S={...v,platform:"posix",posix:void 0,win32:void 0};S.posix=S,S.win32=S,l.posix=S,l.win32=S,l.platform="posix",e.exports=S}(fo,fo.exports)),fo.exports}let wo;Object.defineProperty($n,"__esModule",{value:!0});try{wo=(bo||(bo=1,function(e,l){var d=requireFs(),v=requirePath(),S=function(){if(go)return yo;go=1;var e=requirePath().sep||"/";return yo=function(l){if("string"!=typeof l||l.length<=7||"file://"!=l.substring(0,7))throw new TypeError("must pass in a file:// URI to convert to a file path");var d=decodeURI(l.substring(7)),v=d.indexOf("/"),S=d.substring(0,v),B=d.substring(v+1);return"localhost"==S&&(S=""),S&&(S=e+e+S),B=B.replace(/^(.+)\|/,"$1:"),"\\"==e&&(B=B.replace(/\//g,"\\")),/^.+\:/.test(B)||(B=e+B),S+B},yo}(),B=v.join,T=v.dirname,k=d.accessSync&&function(e){try{d.accessSync(e)}catch(e){return!1}return!0}||d.existsSync||v.existsSync,x={arrow:z.env.NODE_BINDINGS_ARROW||" → ",compiled:z.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:z.platform,arch:z.arch,nodePreGyp:"node-v"+z.versions.modules+"-"+z.platform+"-"+z.arch,version:z.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};e.exports=l=function(e){"string"==typeof e?e={bindings:e}:e||(e={}),Object.keys(x).map((function(l){l in e||(e[l]=x[l])})),e.module_root||(e.module_root=l.getRoot(l.getFileName())),".node"!=v.extname(e.bindings)&&(e.bindings+=".node");for(var d,S,T,k="function"==typeof __webpack_require__?__non_webpack_require__:commonjsRequire,U=[],O=0,F=e.try.length;O<F;O++){d=B.apply(null,e.try[O].map((function(l){return e[l]||l}))),U.push(d);try{return S=e.path?k.resolve(d):k(d),e.path||(S.path=d),S}catch(e){if("MODULE_NOT_FOUND"!==e.code&&"QUALIFIED_PATH_RESOLUTION_FAILED"!==e.code&&!/not find/i.test(e.message))throw e}}throw(T=new Error("Could not locate the bindings file. Tried:\n"+U.map((function(l){return e.arrow+l})).join("\n"))).tries=U,T},l.getFileName=function(e){var l,d=Error.prepareStackTrace,v=Error.stackTraceLimit,B={};return Error.stackTraceLimit=10,Error.prepareStackTrace=function(d,v){for(var S=0,B=v.length;S<B;S++)if((l=v[S].getFileName())!==__filename){if(!e)return;if(l!==e)return}},Error.captureStackTrace(B),Error.prepareStackTrace=d,Error.stackTraceLimit=v,0===l.indexOf("file://")&&(l=S(l)),l},l.getRoot=function(e){for(var l,d=T(e);;){if("."===d&&(d=z.cwd()),k(B(d,"package.json"))||k(B(d,"node_modules")))return d;if(l===d)throw new Error('Could not find module root given file: "'+e+'". Do you have a `package.json` file? ');l=d,d=B(d,"..")}}}(to,to.exports)),to.exports)("bigint_buffer")}catch(Gc){console.warn("bigint: Failed to load bindings, pure JS will be used (try npm run rebuild?)")}$n.toBigIntLE=function(e){if(void 0===wo){const l=j.from(e);l.reverse();const d=l.toString("hex");return 0===d.length?BigInt(0):BigInt(`0x${d}`)}return wo.toBigInt(e,!1)},$n.toBigIntBE=function(e){if(void 0===wo){const l=e.toString("hex");return 0===l.length?BigInt(0):BigInt(`0x${l}`)}return wo.toBigInt(e,!0)},$n.toBufferLE=function(e,l){if(void 0===wo){const d=e.toString(16),v=j.from(d.padStart(2*l,"0").slice(0,2*l),"hex");return v.reverse(),v}return wo.fromBigInt(e,j.allocUnsafe(l),!1)},$n.toBufferBE=function(e,l){if(void 0===wo){const d=e.toString(16);return j.from(d.padStart(2*l,"0").slice(0,2*l),"hex")}return wo.fromBigInt(e,j.allocUnsafe(l),!0)};var Eo={exports:{}},vo={exports:{}},So=vo.exports;Object.defineProperty(So,"__esModule",{value:!0}),vo.exports=function(e,l){if(!l)return;e.super_=l,e.prototype=Object.create(l.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};var Bo=vo.exports,To={};Object.defineProperty(To,"__esModule",{value:!0}),To.isUndefined=To.isSymbol=To.isString=To.isRegExp=To.isPrimitive=To.isObject=To.isNumber=To.isNullOrUndefined=To.isNull=To.isFunction=To.isError=To.isDeepStrictEqual=To.isDate=To.isBuffer=To.isBoolean=To.isArray=void 0;To.isRegExp=e=>e instanceof RegExp;To.isDate=e=>e instanceof Date;To.isArray=e=>Array.isArray(e);To.isBoolean=e=>"boolean"==typeof e;To.isNull=e=>null===e;To.isNullOrUndefined=e=>null==e;To.isNumber=e=>"number"==typeof e;To.isString=e=>"string"==typeof e;To.isSymbol=e=>"symbol"==typeof e;To.isUndefined=e=>void 0===e;To.isFunction=e=>"function"==typeof e;To.isBuffer=e=>e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8;To.isDeepStrictEqual=(e,l)=>JSON.stringify(e)===JSON.stringify(l);To.isObject=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e).isPrototypeOf(Object);To.isError=e=>e instanceof Error;To.isPrimitive=e=>"object"==typeof e?null===e:"function"!=typeof e;var ko={};Object.defineProperty(ko,"__esModule",{value:!0}),ko.log=ko.inspect=ko.formatWithOptions=ko.format=ko.debuglog=ko.debug=void 0;ko.log=(...e)=>{console.log(...e)};const debuglog=(e,l)=>{const fn=(l,...d)=>{fn.enabled&&console.debug(`[${e}] ${l}`,...d)};return fn.enabled=!0,fn};ko.debuglog=debuglog,ko.debug=debuglog;ko.inspect=e=>JSON.stringify(e,null,2);ko.format=(...e)=>_format(...e);function _format(e,...l){const d=/(%?)(%([djos]))/g;return l.length>0&&(e=e.replace(d,((e,d,v,S)=>{let B=l.shift();switch(S){case"o":if(Array.isArray(B)){B=JSON.stringify(B);break}break;case"s":B=""+B;break;case"d":B=Number(B);break;case"j":B=JSON.stringify(B)}return d?(l.unshift(B),e):B}))),l.length>0&&(e+=" "+l.join(" ")),""+(e=e.replace(/%{2}/g,"%"))}ko.formatWithOptions=(e,...l)=>_format(...l);var Io={exports:{}},No={};Object.defineProperty(No,"__esModule",{value:!0}),No.isWeakSet=No.isWeakMap=No.isUint8ClampedArray=No.isUint8Array=No.isUint32Array=No.isUint16Array=No.isTypedArray=No.isSymbolObject=No.isStringObject=No.isSharedArrayBuffer=No.isSetIterator=No.isSet=No.isRegExp=No.isProxy=No.isPromise=No.isNumberObject=No.isNativeError=No.isModuleNamespaceObject=No.isMapIterator=No.isMap=No.isKeyObject=No.isInt8Array=No.isInt32Array=No.isInt16Array=No.isGeneratorObject=No.isGeneratorFunction=No.isFloat64Array=No.isFloat32Array=No.isExternal=No.isDate=No.isDataView=No.isCryptoKey=No.isBoxedPrimitive=No.isBooleanObject=No.isBigUint64Array=No.isBigIntObject=No.isBigInt64Array=No.isAsyncFunction=No.isArrayBufferView=No.isArrayBuffer=No.isArgumentsObject=No.isAnyArrayBuffer=void 0;var _o=Ce;No.isExternal=(0,_o.notImplemented)("util.types.isExternal");No.isDate=e=>e instanceof Date,No.isArgumentsObject=(0,_o.notImplemented)("util.types.isArgumentsObject");No.isBigIntObject=e=>e instanceof BigInt;No.isBooleanObject=e=>e instanceof Boolean;No.isNumberObject=e=>e instanceof Number;No.isStringObject=e=>e instanceof String;No.isSymbolObject=e=>e instanceof Symbol,No.isNativeError=(0,_o.notImplemented)("util.types.isNativeError");No.isRegExp=e=>e instanceof RegExp,No.isAsyncFunction=(0,_o.notImplemented)("util.types.isAsyncFunction"),No.isGeneratorFunction=(0,_o.notImplemented)("util.types.isGeneratorFunction"),No.isGeneratorObject=(0,_o.notImplemented)("util.types.isGeneratorObject");No.isPromise=e=>e instanceof Promise;No.isMap=e=>e instanceof Map;No.isSet=e=>e instanceof Set,No.isMapIterator=(0,_o.notImplemented)("util.types.isMapIterator"),No.isSetIterator=(0,_o.notImplemented)("util.types.isSetIterator");No.isWeakMap=e=>e instanceof WeakMap;No.isWeakSet=e=>e instanceof WeakSet;No.isArrayBuffer=e=>e instanceof ArrayBuffer;No.isDataView=e=>e instanceof DataView;No.isSharedArrayBuffer=e=>e instanceof SharedArrayBuffer,No.isProxy=(0,_o.notImplemented)("util.types.isProxy"),No.isModuleNamespaceObject=(0,_o.notImplemented)("util.types.isModuleNamespaceObject"),No.isAnyArrayBuffer=(0,_o.notImplemented)("util.types.isAnyArrayBuffer"),No.isBoxedPrimitive=(0,_o.notImplemented)("util.types.isBoxedPrimitive"),No.isArrayBufferView=(0,_o.notImplemented)("util.types.isArrayBufferView"),No.isTypedArray=(0,_o.notImplemented)("util.types.isTypedArray"),No.isUint8Array=(0,_o.notImplemented)("util.types.isUint8Array"),No.isUint8ClampedArray=(0,_o.notImplemented)("util.types.isUint8ClampedArray"),No.isUint16Array=(0,_o.notImplemented)("util.types.isUint16Array"),No.isUint32Array=(0,_o.notImplemented)("util.types.isUint32Array"),No.isInt8Array=(0,_o.notImplemented)("util.types.isInt8Array"),No.isInt16Array=(0,_o.notImplemented)("util.types.isInt16Array"),No.isInt32Array=(0,_o.notImplemented)("util.types.isInt32Array"),No.isFloat32Array=(0,_o.notImplemented)("util.types.isFloat32Array"),No.isFloat64Array=(0,_o.notImplemented)("util.types.isFloat64Array"),No.isBigInt64Array=(0,_o.notImplemented)("util.types.isBigInt64Array"),No.isBigUint64Array=(0,_o.notImplemented)("util.types.isBigUint64Array"),No.isKeyObject=(0,_o.notImplemented)("util.types.isKeyObject"),No.isCryptoKey=(0,_o.notImplemented)("util.types.isCryptoKey"),function(e,l){Object.defineProperty(l,"__esModule",{value:!0});var d={},v=function(e,l){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var d=_getRequireWildcardCache(l);if(d&&d.has(e))return d.get(e);var v={__proto__:null},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in e)if("default"!==B&&{}.hasOwnProperty.call(e,B)){var T=S?Object.getOwnPropertyDescriptor(e,B):null;T&&(T.get||T.set)?Object.defineProperty(v,B,T):v[B]=e[B]}return v.default=e,d&&d.set(e,v),v}(No);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var l=new WeakMap,d=new WeakMap;return(_getRequireWildcardCache=function(e){return e?d:l})(e)}Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(d,e)||e in l&&l[e]===v[e]||Object.defineProperty(l,e,{enumerable:!0,get:function(){return v[e]}}))})),e.exports=v}(Io,Io.exports);var Mo=Io.exports,Ro={};Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.promisify=void 0;const xo=Symbol("customPromisify");function _promisify(e){return e[xo]?e[xo]:function(...l){return new Promise(((d,v)=>{try{e.call(this,...l,((e,l)=>{if(e)return v(e);d(l)}))}catch(e){v(e)}}))}}_promisify.custom=xo,Ro.promisify=_promisify;var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.MIMEType=Uo.MIMEParams=void 0;Uo.MIMEType=class{__unenv__=!0;params=new MIMEParams;type;subtype;constructor(e){const[l="",...d]=String(e).split(";"),[v="",S=""]=l.split("/");this.type=v,this.subtype=S,this.params=new MIMEParams;for(const e of d){const[l,d]=e.split("=");this.params.set(l,d)}}get essence(){return this.type+"/"+this.subtype}toString(){const e=this.params.toString();return this.essence+(e?`;${e}`:"")}};class MIMEParams extends Map{__unenv__=!0;get(e){return super.get(e)||null}toString(){return[...this.entries()].map((([e,l])=>`${e}=${l}`)).join("&")}}Uo.MIMEParams=MIMEParams,function(e,l){Object.defineProperty(l,"__esModule",{value:!0});var d={TextDecoder:!0,TextEncoder:!0,deprecate:!0,_errnoException:!0,_exceptionWithHostPort:!0,_extend:!0,aborted:!0,callbackify:!0,getSystemErrorMap:!0,getSystemErrorName:!0,toUSVString:!0,stripVTControlCharacters:!0,transferableAbortController:!0,transferableAbortSignal:!0,parseArgs:!0,inherits:!0,types:!0,promisify:!0};l.getSystemErrorName=l.getSystemErrorMap=l.deprecate=l.default=l.callbackify=l.aborted=l._extend=l._exceptionWithHostPort=l._errnoException=l.TextEncoder=l.TextDecoder=void 0,Object.defineProperty(l,"inherits",{enumerable:!0,get:function(){return S.default}}),l.parseArgs=void 0,Object.defineProperty(l,"promisify",{enumerable:!0,get:function(){return x.promisify}}),l.transferableAbortSignal=l.transferableAbortController=l.toUSVString=l.stripVTControlCharacters=void 0,Object.defineProperty(l,"types",{enumerable:!0,get:function(){return k.default}});var v=Ce,S=_interopRequireDefault(Bo),B=_interopRequireWildcard(To);Object.keys(B).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(d,e)||e in l&&l[e]===B[e]||Object.defineProperty(l,e,{enumerable:!0,get:function(){return B[e]}}))}));var T=_interopRequireWildcard(ko);Object.keys(T).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(d,e)||e in l&&l[e]===T[e]||Object.defineProperty(l,e,{enumerable:!0,get:function(){return T[e]}}))}));var k=_interopRequireDefault(Mo),x=Ro,U=_interopRequireWildcard(Uo);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var l=new WeakMap,d=new WeakMap;return(_getRequireWildcardCache=function(e){return e?d:l})(e)}function _interopRequireWildcard(e,l){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var d=_getRequireWildcardCache(l);if(d&&d.has(e))return d.get(e);var v={__proto__:null},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in e)if("default"!==B&&{}.hasOwnProperty.call(e,B)){var T=S?Object.getOwnPropertyDescriptor(e,B):null;T&&(T.get||T.set)?Object.defineProperty(v,B,T):v[B]=e[B]}return v.default=e,d&&d.set(e,v),v}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.keys(U).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(d,e)||e in l&&l[e]===U[e]||Object.defineProperty(l,e,{enumerable:!0,get:function(){return U[e]}}))}));const O=l.TextDecoder=globalThis.TextDecoder,F=l.TextEncoder=globalThis.TextEncoder,deprecate=e=>e;l.deprecate=deprecate;const P=l._errnoException=(0,v.notImplemented)("util._errnoException"),D=l._exceptionWithHostPort=(0,v.notImplemented)("util._exceptionWithHostPort"),W=l._extend=(0,v.notImplemented)("util._extend"),j=l.aborted=(0,v.notImplemented)("util.aborted"),z=l.callbackify=(0,v.notImplemented)("util.callbackify"),Q=l.getSystemErrorMap=(0,v.notImplemented)("util.getSystemErrorMap"),K=l.getSystemErrorName=(0,v.notImplemented)("util.getSystemErrorName"),H=l.toUSVString=(0,v.notImplemented)("util.toUSVString"),q=l.stripVTControlCharacters=(0,v.notImplemented)("util.stripVTControlCharacters"),G=l.transferableAbortController=(0,v.notImplemented)("util.transferableAbortController"),J=l.transferableAbortSignal=(0,v.notImplemented)("util.transferableAbortSignal"),$=l.parseArgs=(0,v.notImplemented)("util.parseArgs");e.exports={_errnoException:P,_exceptionWithHostPort:D,_extend:W,aborted:j,callbackify:z,deprecate:deprecate,getSystemErrorMap:Q,getSystemErrorName:K,inherits:S.default,promisify:x.promisify,stripVTControlCharacters:q,toUSVString:H,TextDecoder:O,TextEncoder:F,types:k.default,transferableAbortController:G,transferableAbortSignal:J,parseArgs:$,...U,...T,...B}}(Eo,Eo.exports);var Ao=Eo.exports,Oo={exports:{}},Co={};Object.defineProperty(Co,"__esModule",{value:!0}),Co.maxHeaderSize=Co.STATUS_CODES=Co.METHODS=void 0,Co.METHODS=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PRI","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"],Co.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a Teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},Co.maxHeaderSize=16384;var Fo={},Lo={},Po={},Do={},Wo={exports:{}},Vo={};Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.EventEmitter=void 0,Vo.once=function(e,l){return new Promise((function(d,v){function errorListener(d){e.removeListener(l,resolver),v(d)}function resolver(){"function"==typeof e.removeListener&&e.removeListener("error",errorListener),d(Array.prototype.slice.call(arguments))}_eventTargetAgnosticAddListener(e,l,resolver,{once:!0}),"error"!==l&&function(e,l,d){"function"==typeof e.on&&_eventTargetAgnosticAddListener(e,"error",l,d)}(e,errorListener,{once:!0})}))};let jo=10,zo=class{__unenv__=!0;_events=Object.create(null);_maxListeners;static get defaultMaxListeners(){return jo}static set defaultMaxListeners(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");jo=e}setMaxListeners(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this}getMaxListeners(){return _getMaxListeners(this)}emit(e,...l){if(!this._events[e]||0===this._events[e].length)return!1;if("error"===e){let e;if(l.length>0&&(e=l[0]),e instanceof Error)throw e;const d=new Error("Unhandled error."+(e?" ("+e.message+")":""));throw d.context=e,d}for(const d of this._events[e])(d.listener||d).apply(this,l);return!0}addListener(e,l){return _addListener(this,e,l,!1)}on(e,l){return _addListener(this,e,l,!1)}prependListener(e,l){return _addListener(this,e,l,!0)}once(e,l){return this.on(e,_wrapOnce(this,e,l))}prependOnceListener(e,l){return this.prependListener(e,_wrapOnce(this,e,l))}removeListener(e,l){return function(e,l,d){if(_checkListener(d),!e._events[l]||0===e._events[l].length)return e;const v=e._events[l].length;if(e._events[l]=e._events[l].filter((e=>e!==d)),v===e._events[l].length)return e;e._events.removeListener&&e.emit("removeListener",l,d.listener||d);0===e._events[l].length&&delete e._events[l];return e}(this,e,l)}off(e,l){return this.removeListener(e,l)}removeAllListeners(e){return function(e,l){if(!e._events[l]||0===e._events[l].length)return e;if(e._events.removeListener)for(const d of e._events[l])e.emit("removeListener",l,d.listener||d);return delete e._events[l],e}(this,e)}listeners(e){return _listeners(this,e,!0)}rawListeners(e){return _listeners(this,e,!1)}listenerCount(e){return this.rawListeners(e).length}eventNames(){return Object.keys(this._events)}};function _addListener(e,l,d,v){_checkListener(d),void 0!==e._events.newListener&&e.emit("newListener",l,d.listener||d),e._events[l]||(e._events[l]=[]),v?e._events[l].unshift(d):e._events[l].push(d);const S=_getMaxListeners(e);if(S>0&&e._events[l].length>S&&!e._events[l].warned){e._events[l].warned=!0;const d=new Error(`[unenv] Possible EventEmitter memory leak detected. ${e._events[l].length} ${l} listeners added. Use emitter.setMaxListeners() to increase limit`);d.name="MaxListenersExceededWarning",d.emitter=e,d.type=l,d.count=e._events[l]?.length,console.warn(d)}return e}function _wrapOnce(e,l,d){let v=!1;const wrapper=(...S)=>{if(!v)return e.removeListener(l,wrapper),v=!0,0===S.length?d.call(e):d.apply(e,S)};return wrapper.listener=d,wrapper}function _getMaxListeners(e){return e._maxListeners??zo.defaultMaxListeners}function _listeners(e,l,d){let v=e._events[l];return"function"==typeof v&&(v=[v]),d?v.map((e=>e.listener||e)):v}function _checkListener(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function _eventTargetAgnosticAddListener(e,l,d,v){if("function"==typeof e.on)v.once?e.once(l,d):e.on(l,d);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(l,d)}}Vo.EventEmitter=zo,function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.once=l.default=l.EventEmitter=void 0;var d=Vo;const v=l.EventEmitter=globalThis.EventEmitter||d.EventEmitter,S=l.once=d.once;e.exports={EventEmitter:v,once:S}}(Wo,Wo.exports);var Zo=Wo.exports;Object.defineProperty(Do,"__esModule",{value:!0}),Do._Readable=Do.Readable=void 0;var Qo=Ce,Ko=Zo;class _Readable extends Ko.EventEmitter{__unenv__=!0;readableEncoding=null;readableEnded=!0;readableFlowing=!1;readableHighWaterMark=0;readableLength=0;readableObjectMode=!1;readableAborted=!1;readableDidRead=!1;closed=!1;errored=null;readable=!1;destroyed=!1;static from(e,l){return new _Readable(l)}constructor(e){super()}_read(e){}read(e){}setEncoding(e){return this}pause(){return this}resume(){return this}isPaused(){return!0}unpipe(e){return this}unshift(e,l){}wrap(e){return this}push(e,l){return!1}_destroy(e,l){this.removeAllListeners()}destroy(e){return this.destroyed=!0,this._destroy(e),this}pipe(e,l){return{}}compose(e,l){throw new Error("[unenv] Method not implemented.")}[Symbol.asyncDispose](){return this.destroy(),Promise.resolve()}async*[Symbol.asyncIterator](){throw(0,Qo.createNotImplementedError)("Readable.asyncIterator")}iterator(e){throw(0,Qo.createNotImplementedError)("Readable.iterator")}map(e,l){throw(0,Qo.createNotImplementedError)("Readable.map")}filter(e,l){throw(0,Qo.createNotImplementedError)("Readable.filter")}forEach(e,l){throw(0,Qo.createNotImplementedError)("Readable.forEach")}reduce(e,l,d){throw(0,Qo.createNotImplementedError)("Readable.reduce")}find(e,l){throw(0,Qo.createNotImplementedError)("Readable.find")}findIndex(e,l){throw(0,Qo.createNotImplementedError)("Readable.findIndex")}some(e,l){throw(0,Qo.createNotImplementedError)("Readable.some")}toArray(e){throw(0,Qo.createNotImplementedError)("Readable.toArray")}every(e,l){throw(0,Qo.createNotImplementedError)("Readable.every")}flatMap(e,l){throw(0,Qo.createNotImplementedError)("Readable.flatMap")}drop(e,l){throw(0,Qo.createNotImplementedError)("Readable.drop")}take(e,l){throw(0,Qo.createNotImplementedError)("Readable.take")}asIndexedPairs(e){throw(0,Qo.createNotImplementedError)("Readable.asIndexedPairs")}}Do._Readable=_Readable,Do.Readable=globalThis.Readable||_Readable;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.Writable=void 0;var qo=Zo;class _Writable extends qo.EventEmitter{__unenv__=!0;writable=!0;writableEnded=!1;writableFinished=!1;writableHighWaterMark=0;writableLength=0;writableObjectMode=!1;writableCorked=0;closed=!1;errored=null;writableNeedDrain=!1;destroyed=!1;_data;_encoding="utf-8";constructor(e){super()}pipe(e,l){return{}}_write(e,l,d){if(this.writableEnded)d&&d();else{if(void 0===this._data)this._data=e;else{const d="string"==typeof this._data?j.from(this._data,this._encoding||l||"utf8"):this._data,v="string"==typeof e?j.from(e,l||this._encoding||"utf8"):e;this._data=j.concat([d,v])}this._encoding=l,d&&d()}}_writev(e,l){}_destroy(e,l){}_final(e){}write(e,l,d){const v="string"==typeof l?this._encoding:"utf-8",S="function"==typeof l?l:"function"==typeof d?d:void 0;return this._write(e,v,S),!0}setDefaultEncoding(e){return this}end(e,l,d){const v="function"==typeof e?e:"function"==typeof l?l:"function"==typeof d?d:void 0;if(this.writableEnded)return v&&v(),this;const S=e===v?void 0:e;if(S){const e=l===v?void 0:l;this.write(S,e,v)}return this.writableEnded=!0,this.writableFinished=!0,this.emit("close"),this.emit("finish"),this}cork(){}uncork(){}destroy(e){return this.destroyed=!0,delete this._data,this.removeAllListeners(),this}compose(e,l){throw new Error("[h3] Method not implemented.")}}Ho.Writable=globalThis.Writable||_Writable,Object.defineProperty(Po,"__esModule",{value:!0}),Po._Duplex=Po.Duplex=void 0;var Go=Ce,Yo=Do,Jo=Ho;const $o=class{allowHalfOpen=!0;_destroy;constructor(e=new Yo.Readable,l=new Jo.Writable){Object.assign(this,e),Object.assign(this,l),this._destroy=(0,Go.mergeFns)(e._destroy,l._destroy)}};function getDuplex(){return Object.assign($o.prototype,Yo.Readable.prototype),Object.assign($o.prototype,Jo.Writable.prototype),$o}const Xo=Po._Duplex=getDuplex();Po.Duplex=globalThis.Duplex||Xo,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.SocketAddress=Lo.Socket=void 0;var ei=Po;class Socket extends ei.Duplex{__unenv__=!0;bufferSize=0;bytesRead=0;bytesWritten=0;connecting=!1;destroyed=!1;pending=!1;localAddress="";localPort=0;remoteAddress="";remoteFamily="";remotePort=0;autoSelectFamilyAttemptedAddresses=[];readyState="readOnly";constructor(e){super()}write(e,l,d){return!1}connect(e,l,d){return this}end(e,l,d){return this}setEncoding(e){return this}pause(){return this}resume(){return this}setTimeout(e,l){return this}setNoDelay(e){return this}setKeepAlive(e,l){return this}address(){return{}}unref(){return this}ref(){return this}destroySoon(){this.destroy()}resetAndDestroy(){const e=new Error("ERR_SOCKET_CLOSED");return e.code="ERR_SOCKET_CLOSED",this.destroy(e),this}}Lo.Socket=Socket;Lo.SocketAddress=class{__unenv__=!0;address;family;port;flowlabel;constructor(e){this.address=e.address,this.family=e.family,this.port=e.port,this.flowlabel=e.flowlabel}},Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.IncomingMessage=void 0;var ti=Lo,ri=Do,ni=Ce;class IncomingMessage extends ri.Readable{__unenv__={};aborted=!1;httpVersion="1.1";httpVersionMajor=1;httpVersionMinor=1;complete=!0;connection;socket;headers={};trailers={};method="GET";url="/";statusCode=200;statusMessage="";closed=!1;errored=null;readable=!1;constructor(e){super(),this.socket=this.connection=e||new ti.Socket}get rawHeaders(){return(0,ni.rawHeaders)(this.headers)}get rawTrailers(){return[]}setTimeout(e,l){return this}get headersDistinct(){return _distinct(this.headers)}get trailersDistinct(){return _distinct(this.trailers)}}function _distinct(e){const l={};for(const[d,v]of Object.entries(e))d&&(l[d]=(Array.isArray(v)?v:[v]).filter(Boolean));return l}Fo.IncomingMessage=IncomingMessage;var oi={};Object.defineProperty(oi,"__esModule",{value:!0}),oi.ServerResponse=void 0;var ii=Ho;class ServerResponse extends ii.Writable{__unenv__=!0;statusCode=200;statusMessage="";upgrading=!1;chunkedEncoding=!1;shouldKeepAlive=!1;useChunkedEncodingByDefault=!1;sendDate=!1;finished=!1;headersSent=!1;strictContentLength=!1;connection=null;socket=null;req;_headers={};constructor(e){super(),this.req=e}assignSocket(e){e._httpMessage=this,this.socket=e,this.connection=e,this.emit("socket",e),this._flush()}_flush(){this.flushHeaders()}detachSocket(e){}writeContinue(e){}writeHead(e,l,d){e&&(this.statusCode=e),"string"==typeof l&&(this.statusMessage=l,l=void 0);const v=d||l;if(v)if(Array.isArray(v));else for(const e in v)this.setHeader(e,v[e]);return this.headersSent=!0,this}writeProcessing(){}setTimeout(e,l){return this}appendHeader(e,l){e=e.toLowerCase();const d=this._headers[e],v=[...Array.isArray(d)?d:[d],...Array.isArray(l)?l:[l]].filter(Boolean);return this._headers[e]=v.length>1?v:v[0],this}setHeader(e,l){return this._headers[e.toLowerCase()]=l,this}getHeader(e){return this._headers[e.toLowerCase()]}getHeaders(){return this._headers}getHeaderNames(){return Object.keys(this._headers)}hasHeader(e){return e.toLowerCase()in this._headers}removeHeader(e){delete this._headers[e.toLowerCase()]}addTrailers(e){}flushHeaders(){}writeEarlyHints(e,l){"function"==typeof l&&l()}}oi.ServerResponse=ServerResponse,function(e,l){Object.defineProperty(l,"__esModule",{value:!0});var d={createServer:!0,request:!0,get:!0,Server:!0,OutgoingMessage:!0,ClientRequest:!0,Agent:!0,globalAgent:!0,validateHeaderName:!0,validateHeaderValue:!0,setMaxIdleHTTPParsers:!0};l.validateHeaderValue=l.validateHeaderName=l.setMaxIdleHTTPParsers=l.request=l.globalAgent=l.get=l.default=l.createServer=l.Server=l.OutgoingMessage=l.ClientRequest=l.Agent=void 0;var v,S=Ce,B=(v=Me)&&v.__esModule?v:{default:v},T=function(e,l){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var d=_getRequireWildcardCache(l);if(d&&d.has(e))return d.get(e);var v={__proto__:null},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in e)if("default"!==B&&{}.hasOwnProperty.call(e,B)){var T=S?Object.getOwnPropertyDescriptor(e,B):null;T&&(T.get||T.set)?Object.defineProperty(v,B,T):v[B]=e[B]}return v.default=e,d&&d.set(e,v),v}(Co);Object.keys(T).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(d,e)||e in l&&l[e]===T[e]||Object.defineProperty(l,e,{enumerable:!0,get:function(){return T[e]}}))}));var k=Fo;Object.keys(k).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(d,e)||e in l&&l[e]===k[e]||Object.defineProperty(l,e,{enumerable:!0,get:function(){return k[e]}}))}));var x=oi;function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var l=new WeakMap,d=new WeakMap;return(_getRequireWildcardCache=function(e){return e?d:l})(e)}Object.keys(x).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(d,e)||e in l&&l[e]===x[e]||Object.defineProperty(l,e,{enumerable:!0,get:function(){return x[e]}}))}));const U=l.createServer=(0,S.notImplemented)("http.createServer"),O=l.request=(0,S.notImplemented)("http.request"),F=l.get=(0,S.notImplemented)("http.get"),P=l.Server=B.default.__createMock__("http.Server"),D=l.OutgoingMessage=B.default.__createMock__("http.OutgoingMessage"),W=l.ClientRequest=B.default.__createMock__("http.ClientRequest"),j=l.Agent=B.default.__createMock__("http.Agent"),z=l.globalAgent=new j,Q=l.validateHeaderName=(0,S.notImplemented)("http.validateHeaderName"),K=l.validateHeaderValue=(0,S.notImplemented)("http.validateHeaderValue"),H=l.setMaxIdleHTTPParsers=(0,S.notImplemented)("http.setMaxIdleHTTPParsers");e.exports={...T,IncomingMessage:k.IncomingMessage,ServerResponse:x.ServerResponse,createServer:U,request:O,get:F,Server:P,OutgoingMessage:D,ClientRequest:W,Agent:j,globalAgent:z,validateHeaderName:Q,validateHeaderValue:K,setMaxIdleHTTPParsers:H}}(Oo,Oo.exports);var si=Oo.exports,ai={exports:{}};!function(e){class StructError extends TypeError{constructor(e,l){let d;const{message:v,explanation:S,...B}=e,{path:T}=e,k=0===T.length?v:`At path: ${T.join(".")} -- ${v}`;super(S??k),null!=S&&(this.cause=k),Object.assign(this,B),this.name=this.constructor.name,this.failures=()=>d??(d=[e,...l()])}}function isIterable(e){return isObject(e)&&"function"==typeof e[Symbol.iterator]}function isObject(e){return"object"==typeof e&&null!=e}function isNonArrayObject(e){return isObject(e)&&!Array.isArray(e)}function isPlainObject(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const l=Object.getPrototypeOf(e);return null===l||l===Object.prototype}function print(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function shiftIterator(e){const{done:l,value:d}=e.next();return l?void 0:d}function toFailure(e,l,d,v){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:S,branch:B}=l,{type:T}=d,{refinement:k,message:x=`Expected a value of type \`${T}\`${k?` with refinement \`${k}\``:""}, but received: \`${print(v)}\``}=e;return{value:v,type:T,refinement:k,key:S[S.length-1],path:S,branch:B,...e,message:x}}function*toFailures(e,l,d,v){isIterable(e)||(e=[e]);for(const S of e){const e=toFailure(S,l,d,v);e&&(yield e)}}function*run(e,l,d={}){const{path:v=[],branch:S=[e],coerce:B=!1,mask:T=!1}=d,k={path:v,branch:S,mask:T};B&&(e=l.coercer(e,k));let x="valid";for(const v of l.validator(e,k))v.explanation=d.message,x="not_valid",yield[v,void 0];for(let[U,O,F]of l.entries(e,k)){const l=run(O,F,{path:void 0===U?v:[...v,U],branch:void 0===U?S:[...S,O],coerce:B,mask:T,message:d.message});for(const d of l)d[0]?(x=null!=d[0].refinement?"not_refined":"not_valid",yield[d[0],void 0]):B&&(O=d[1],void 0===U?e=O:e instanceof Map?e.set(U,O):e instanceof Set?e.add(O):isObject(e)&&(void 0!==O||U in e)&&(e[U]=O))}if("not_valid"!==x)for(const v of l.refiner(e,k))v.explanation=d.message,x="not_refined",yield[v,void 0];"valid"===x&&(yield[void 0,e])}class Struct{constructor(e){const{type:l,schema:d,validator:v,refiner:S,coercer:B=e=>e,entries:T=function*(){}}=e;this.type=l,this.schema=d,this.entries=T,this.coercer=B,this.validator=v?(e,l)=>toFailures(v(e,l),l,this,e):()=>[],this.refiner=S?(e,l)=>toFailures(S(e,l),l,this,e):()=>[]}assert(e,l){return assert(e,this,l)}create(e,l){return create(e,this,l)}is(e){return is(e,this)}mask(e,l){return mask(e,this,l)}validate(e,l={}){return validate(e,this,l)}}function assert(e,l,d){const v=validate(e,l,{message:d});if(v[0])throw v[0]}function create(e,l,d){const v=validate(e,l,{coerce:!0,message:d});if(v[0])throw v[0];return v[1]}function mask(e,l,d){const v=validate(e,l,{coerce:!0,mask:!0,message:d});if(v[0])throw v[0];return v[1]}function is(e,l){return!validate(e,l)[0]}function validate(e,l,d={}){const v=run(e,l,d),S=shiftIterator(v);return S[0]?[new StructError(S[0],(function*(){for(const e of v)e[0]&&(yield e[0])})),void 0]:[void 0,S[1]]}function assign(...e){const l="type"===e[0].type,d=e.map((e=>e.schema)),v=Object.assign({},...d);return l?type(v):object(v)}function define(e,l){return new Struct({type:e,schema:null,validator:l})}function deprecated(e,l){return new Struct({...e,refiner:(l,d)=>void 0===l||e.refiner(l,d),validator:(d,v)=>void 0===d||(l(d,v),e.validator(d,v))})}function dynamic(e){return new Struct({type:"dynamic",schema:null,*entries(l,d){const v=e(l,d);yield*v.entries(l,d)},validator:(l,d)=>e(l,d).validator(l,d),coercer:(l,d)=>e(l,d).coercer(l,d),refiner:(l,d)=>e(l,d).refiner(l,d)})}function lazy(e){let l;return new Struct({type:"lazy",schema:null,*entries(d,v){l??(l=e()),yield*l.entries(d,v)},validator:(d,v)=>(l??(l=e()),l.validator(d,v)),coercer:(d,v)=>(l??(l=e()),l.coercer(d,v)),refiner:(d,v)=>(l??(l=e()),l.refiner(d,v))})}function omit(e,l){const{schema:d}=e,v={...d};for(const e of l)delete v[e];return"type"===e.type?type(v):object(v)}function partial(e){const l=e instanceof Struct,d=l?{...e.schema}:{...e};for(const e in d)d[e]=optional(d[e]);return l&&"type"===e.type?type(d):object(d)}function pick(e,l){const{schema:d}=e,v={};for(const e of l)v[e]=d[e];return"type"===e.type?type(v):object(v)}function struct(e,l){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),define(e,l)}function any(){return define("any",(()=>!0))}function array(e){return new Struct({type:"array",schema:e,*entries(l){if(e&&Array.isArray(l))for(const[d,v]of l.entries())yield[d,v,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${print(e)}`})}function bigint(){return define("bigint",(e=>"bigint"==typeof e))}function boolean(){return define("boolean",(e=>"boolean"==typeof e))}function date(){return define("date",(e=>e instanceof Date&&!isNaN(e.getTime())||`Expected a valid \`Date\` object, but received: ${print(e)}`))}function enums(e){const l={},d=e.map((e=>print(e))).join();for(const d of e)l[d]=d;return new Struct({type:"enums",schema:l,validator:l=>e.includes(l)||`Expected one of \`${d}\`, but received: ${print(l)}`})}function func(){return define("func",(e=>"function"==typeof e||`Expected a function, but received: ${print(e)}`))}function instance(e){return define("instance",(l=>l instanceof e||`Expected a \`${e.name}\` instance, but received: ${print(l)}`))}function integer(){return define("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${print(e)}`))}function intersection(e){return new Struct({type:"intersection",schema:null,*entries(l,d){for(const v of e)yield*v.entries(l,d)},*validator(l,d){for(const v of e)yield*v.validator(l,d)},*refiner(l,d){for(const v of e)yield*v.refiner(l,d)}})}function literal(e){const l=print(e),d=typeof e;return new Struct({type:"literal",schema:"string"===d||"number"===d||"boolean"===d?e:null,validator:d=>d===e||`Expected the literal \`${l}\`, but received: ${print(d)}`})}function map(e,l){return new Struct({type:"map",schema:null,*entries(d){if(e&&l&&d instanceof Map)for(const[v,S]of d.entries())yield[v,v,e],yield[v,S,l]},coercer:e=>e instanceof Map?new Map(e):e,validator:e=>e instanceof Map||`Expected a \`Map\` object, but received: ${print(e)}`})}function never(){return define("never",(()=>!1))}function nullable(e){return new Struct({...e,validator:(l,d)=>null===l||e.validator(l,d),refiner:(l,d)=>null===l||e.refiner(l,d)})}function number(){return define("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${print(e)}`))}function object(e){const l=e?Object.keys(e):[],d=never();return new Struct({type:"object",schema:e||null,*entries(v){if(e&&isObject(v)){const S=new Set(Object.keys(v));for(const d of l)S.delete(d),yield[d,v[d],e[d]];for(const e of S)yield[e,v[e],d]}},validator:e=>isNonArrayObject(e)||`Expected an object, but received: ${print(e)}`,coercer(l,d){if(!isNonArrayObject(l))return l;const v={...l};if(d.mask&&e)for(const l in v)void 0===e[l]&&delete v[l];return v}})}function optional(e){return new Struct({...e,validator:(l,d)=>void 0===l||e.validator(l,d),refiner:(l,d)=>void 0===l||e.refiner(l,d)})}function record(e,l){return new Struct({type:"record",schema:null,*entries(d){if(isObject(d))for(const v in d){const S=d[v];yield[v,v,e],yield[v,S,l]}},validator:e=>isNonArrayObject(e)||`Expected an object, but received: ${print(e)}`,coercer:e=>isNonArrayObject(e)?{...e}:e})}function regexp(){return define("regexp",(e=>e instanceof RegExp))}function set(e){return new Struct({type:"set",schema:null,*entries(l){if(e&&l instanceof Set)for(const d of l)yield[d,d,e]},coercer:e=>e instanceof Set?new Set(e):e,validator:e=>e instanceof Set||`Expected a \`Set\` object, but received: ${print(e)}`})}function string(){return define("string",(e=>"string"==typeof e||`Expected a string, but received: ${print(e)}`))}function tuple(e){const l=never();return new Struct({type:"tuple",schema:null,*entries(d){if(Array.isArray(d)){const v=Math.max(e.length,d.length);for(let S=0;S<v;S++)yield[S,d[S],e[S]||l]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${print(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function type(e){const l=Object.keys(e);return new Struct({type:"type",schema:e,*entries(d){if(isObject(d))for(const v of l)yield[v,d[v],e[v]]},validator:e=>isNonArrayObject(e)||`Expected an object, but received: ${print(e)}`,coercer:e=>isNonArrayObject(e)?{...e}:e})}function union(e){const l=e.map((e=>e.type)).join(" | ");return new Struct({type:"union",schema:null,coercer(l,d){for(const v of e){const[e,S]=v.validate(l,{coerce:!0,mask:d.mask});if(!e)return S}return l},validator(d,v){const S=[];for(const l of e){const[...e]=run(d,l,v),[B]=e;if(!B[0])return[];for(const[l]of e)l&&S.push(l)}return[`Expected the value to satisfy a union of \`${l}\`, but received: ${print(d)}`,...S]}})}function unknown(){return define("unknown",(()=>!0))}function coerce(e,l,d){return new Struct({...e,coercer:(v,S)=>is(v,l)?e.coercer(d(v,S),S):e.coercer(v,S)})}function defaulted(e,l,d={}){return coerce(e,unknown(),(e=>{const v="function"==typeof l?l():l;if(void 0===e)return v;if(!d.strict&&isPlainObject(e)&&isPlainObject(v)){const l={...e};let d=!1;for(const e in v)void 0===l[e]&&(l[e]=v[e],d=!0);if(d)return l}return e}))}function trimmed(e){return coerce(e,string(),(e=>e.trim()))}function empty(e){return refine(e,"empty",(l=>{const d=getSize(l);return 0===d||`Expected an empty ${e.type} but received one with a size of \`${d}\``}))}function getSize(e){return e instanceof Map||e instanceof Set?e.size:e.length}function max(e,l,d={}){const{exclusive:v}=d;return refine(e,"max",(d=>v?d<l:d<=l||`Expected a ${e.type} less than ${v?"":"or equal to "}${l} but received \`${d}\``))}function min(e,l,d={}){const{exclusive:v}=d;return refine(e,"min",(d=>v?d>l:d>=l||`Expected a ${e.type} greater than ${v?"":"or equal to "}${l} but received \`${d}\``))}function nonempty(e){return refine(e,"nonempty",(l=>getSize(l)>0||`Expected a nonempty ${e.type} but received an empty one`))}function pattern(e,l){return refine(e,"pattern",(d=>l.test(d)||`Expected a ${e.type} matching \`/${l.source}/\` but received "${d}"`))}function size(e,l,d=l){const v=`Expected a ${e.type}`,S=l===d?`of \`${l}\``:`between \`${l}\` and \`${d}\``;return refine(e,"size",(e=>{if("number"==typeof e||e instanceof Date)return l<=e&&e<=d||`${v} ${S} but received \`${e}\``;if(e instanceof Map||e instanceof Set){const{size:B}=e;return l<=B&&B<=d||`${v} with a size ${S} but received one with a size of \`${B}\``}{const{length:B}=e;return l<=B&&B<=d||`${v} with a length ${S} but received one with a length of \`${B}\``}}))}function refine(e,l,d){return new Struct({...e,*refiner(v,S){yield*e.refiner(v,S);const B=toFailures(d(v,S),S,e,v);for(const e of B)yield{...e,refinement:l}}})}e.Struct=Struct,e.StructError=StructError,e.any=any,e.array=array,e.assert=assert,e.assign=assign,e.bigint=bigint,e.boolean=boolean,e.coerce=coerce,e.create=create,e.date=date,e.defaulted=defaulted,e.define=define,e.deprecated=deprecated,e.dynamic=dynamic,e.empty=empty,e.enums=enums,e.func=func,e.instance=instance,e.integer=integer,e.intersection=intersection,e.is=is,e.lazy=lazy,e.literal=literal,e.map=map,e.mask=mask,e.max=max,e.min=min,e.never=never,e.nonempty=nonempty,e.nullable=nullable,e.number=number,e.object=object,e.omit=omit,e.optional=optional,e.partial=partial,e.pattern=pattern,e.pick=pick,e.record=record,e.refine=refine,e.regexp=regexp,e.set=set,e.size=size,e.string=string,e.struct=struct,e.trimmed=trimmed,e.tuple=tuple,e.type=type,e.union=union,e.unknown=unknown,e.validate=validate}(ai.exports);var ci=ai.exports,ui={exports:{}};!function(e){var l=Object.prototype.hasOwnProperty,d="~";function Events(){}function EE(e,l,d){this.fn=e,this.context=l,this.once=d||!1}function addListener(e,l,v,S,B){if("function"!=typeof v)throw new TypeError("The listener must be a function");var T=new EE(v,S||e,B),k=d?d+l:l;return e._events[k]?e._events[k].fn?e._events[k]=[e._events[k],T]:e._events[k].push(T):(e._events[k]=T,e._eventsCount++),e}function clearEvent(e,l){0==--e._eventsCount?e._events=new Events:delete e._events[l]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(d=!1)),EventEmitter.prototype.eventNames=function(){var e,v,S=[];if(0===this._eventsCount)return S;for(v in e=this._events)l.call(e,v)&&S.push(d?v.slice(1):v);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(e)):S},EventEmitter.prototype.listeners=function(e){var l=d?d+e:e,v=this._events[l];if(!v)return[];if(v.fn)return[v.fn];for(var S=0,B=v.length,T=new Array(B);S<B;S++)T[S]=v[S].fn;return T},EventEmitter.prototype.listenerCount=function(e){var l=d?d+e:e,v=this._events[l];return v?v.fn?1:v.length:0},EventEmitter.prototype.emit=function(e,l,v,S,B,T){var k=d?d+e:e;if(!this._events[k])return!1;var x,U,O=this._events[k],F=arguments.length;if(O.fn){switch(O.once&&this.removeListener(e,O.fn,void 0,!0),F){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,l),!0;case 3:return O.fn.call(O.context,l,v),!0;case 4:return O.fn.call(O.context,l,v,S),!0;case 5:return O.fn.call(O.context,l,v,S,B),!0;case 6:return O.fn.call(O.context,l,v,S,B,T),!0}for(U=1,x=new Array(F-1);U<F;U++)x[U-1]=arguments[U];O.fn.apply(O.context,x)}else{var P,D=O.length;for(U=0;U<D;U++)switch(O[U].once&&this.removeListener(e,O[U].fn,void 0,!0),F){case 1:O[U].fn.call(O[U].context);break;case 2:O[U].fn.call(O[U].context,l);break;case 3:O[U].fn.call(O[U].context,l,v);break;case 4:O[U].fn.call(O[U].context,l,v,S);break;default:if(!x)for(P=1,x=new Array(F-1);P<F;P++)x[P-1]=arguments[P];O[U].fn.apply(O[U].context,x)}}return!0},EventEmitter.prototype.on=function(e,l,d){return addListener(this,e,l,d,!1)},EventEmitter.prototype.once=function(e,l,d){return addListener(this,e,l,d,!0)},EventEmitter.prototype.removeListener=function(e,l,v,S){var B=d?d+e:e;if(!this._events[B])return this;if(!l)return clearEvent(this,B),this;var T=this._events[B];if(T.fn)T.fn!==l||S&&!T.once||v&&T.context!==v||clearEvent(this,B);else{for(var k=0,x=[],U=T.length;k<U;k++)(T[k].fn!==l||S&&!T[k].once||v&&T[k].context!==v)&&x.push(T[k]);x.length?this._events[B]=1===x.length?x[0]:x:clearEvent(this,B)}return this},EventEmitter.prototype.removeAllListeners=function(e){var l;return e?(l=d?d+e:e,this._events[l]&&clearEvent(this,l)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=d,EventEmitter.EventEmitter=EventEmitter,e.exports=EventEmitter}(ui);const li=getDefaultExportFromCjs(ui.exports);var di=class extends li{socket;constructor(e,l,d){super(),this.socket=new window.WebSocket(e,d),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,l,d){const v=d||l;try{this.socket.send(e),v()}catch(e){v(e)}}close(e,l){this.socket.close(e,l)}addEventListener(e,l,d){this.socket.addEventListener(e,l,d)}};function WebSocket$1(e,l){return new di(e,l)}var hi=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},fi=class extends li{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,l="ws://localhost:8080",{autoconnect:d=!0,reconnect:v=!0,reconnect_interval:S=1e3,max_reconnects:B=5,...T}={},k,x){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=l,this.autoconnect=d,this.ready=!1,this.reconnect=v,this.reconnect_timer_id=void 0,this.reconnect_interval=S,this.max_reconnects=B,this.rest_options=T,this.current_reconnects=0,this.generate_request_id=k||(()=>++this.rpc_id),this.dataPack=x||new hi,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,l,d,v){return v||"object"!=typeof d||(v=d,d=null),new Promise(((S,B)=>{if(!this.ready)return B(new Error("socket not ready"));const T=this.generate_request_id(e,l),k={jsonrpc:"2.0",method:e,params:l||void 0,id:T};this.socket.send(this.dataPack.encode(k),v,(e=>{if(e)return B(e);this.queue[T]={promise:[S,B]},d&&(this.queue[T].timeout=setTimeout((()=>{delete this.queue[T],B(new Error("reply timeout"))}),d))}))}))}async login(e){const l=await this.call("rpc.login",e);if(!l)throw new Error("authentication failed");return l}async listMethods(){return await this.call("__listMethods")}notify(e,l){return new Promise(((d,v)=>{if(!this.ready)return v(new Error("socket not ready"));const S={jsonrpc:"2.0",method:e,params:l};this.socket.send(this.dataPack.encode(S),(e=>{if(e)return v(e);d()}))}))}async subscribe(e){"string"==typeof e&&(e=[e]);const l=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==l[e])throw new Error("Failed subscribing to an event '"+e+"' with: "+l[e]);return l}async unsubscribe(e){"string"==typeof e&&(e=[e]);const l=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==l[e])throw new Error("Failed unsubscribing from an event with: "+l);return l}close(e,l){this.socket.close(e||1e3,l)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,l){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,l),this.socket.addEventListener("open",(()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0})),this.socket.addEventListener("message",(({data:e})=>{e instanceof ArrayBuffer&&(e=j.from(e).toString());try{e=this.dataPack.decode(e)}catch(e){return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const l=[e.notification];if(e.params.constructor===Object)l.push(e.params);else for(let d=0;d<e.params.length;d++)l.push(e.params[d]);return Promise.resolve().then((()=>{this.emit.apply(this,l)}))}if(!this.queue[e.id])return e.method?Promise.resolve().then((()=>{this.emit(e.method,e?.params)})):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]})),this.socket.addEventListener("error",(e=>this.emit("error",e))),this.socket.addEventListener("close",(({code:d,reason:v})=>{this.ready&&setTimeout((()=>this.emit("close",d,v)),0),this.ready=!1,this.socket=void 0,1e3!==d&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout((()=>this._connect(e,l)),this.reconnect_interval)))}))}};const pi=getDefaultExportFromNamespaceIfNotNamed(Object.freeze(Object.defineProperty({__proto__:null,Client:class extends fi{constructor(e="ws://localhost:8080",{autoconnect:l=!0,reconnect:d=!0,reconnect_interval:v=1e3,max_reconnects:S=5}={},B){super(WebSocket$1,e,{autoconnect:l,reconnect:d,reconnect_interval:v,max_reconnects:S},B)}},CommonClient:fi,DefaultDataPack:hi,WebSocket:WebSocket$1},Symbol.toStringTag,{value:"Module"}))),mi=[],yi=[],gi=[],bi=BigInt(0),wi=BigInt(1),Ei=BigInt(2),vi=BigInt(7),Si=BigInt(256),Bi=BigInt(113);for(let e=0,l=wi,d=1,v=0;e<24;e++){[d,v]=[v,(2*d+3*v)%5],mi.push(2*(5*v+d)),yi.push((e+1)*(e+2)/2%64);let S=bi;for(let e=0;e<7;e++)l=(l<<wi^(l>>vi)*Bi)%Si,l&Ei&&(S^=wi<<(wi<<BigInt(e))-wi);gi.push(S)}const[Ti,ki]=split(gi,!0),rotlH=(e,l,d)=>d>32?rotlBH(e,l,d):rotlSH(e,l,d),rotlL=(e,l,d)=>d>32?rotlBL(e,l,d):rotlSL(e,l,d);function keccakP(e,l=24){const d=new Uint32Array(10);for(let v=24-l;v<24;v++){for(let l=0;l<10;l++)d[l]=e[l]^e[l+10]^e[l+20]^e[l+30]^e[l+40];for(let l=0;l<10;l+=2){const v=(l+8)%10,S=(l+2)%10,B=d[S],T=d[S+1],k=rotlH(B,T,1)^d[v],x=rotlL(B,T,1)^d[v+1];for(let d=0;d<50;d+=10)e[l+d]^=k,e[l+d+1]^=x}let l=e[2],S=e[3];for(let d=0;d<24;d++){const v=yi[d],B=rotlH(l,S,v),T=rotlL(l,S,v),k=mi[d];l=e[k],S=e[k+1],e[k]=B,e[k+1]=T}for(let l=0;l<50;l+=10){for(let v=0;v<10;v++)d[v]=e[l+v];for(let v=0;v<10;v++)e[l+v]^=~d[(v+2)%10]&d[(v+4)%10]}e[0]^=Ti[v],e[1]^=ki[v]}d.fill(0)}class Keccak extends Hash{constructor(e,l,d,v=!1,S=24){if(super(),this.blockLen=e,this.suffix=l,this.outputLen=d,this.enableXOF=v,this.rounds=S,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,number(d),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var B;this.state=new Uint8Array(200),this.state32=(B=this.state,new Uint32Array(B.buffer,B.byteOffset,Math.floor(B.byteLength/4)))}keccak(){Bt||byteSwap32(this.state32),keccakP(this.state32,this.rounds),Bt||byteSwap32(this.state32),this.posOut=0,this.pos=0}update(e){exists(this);const{blockLen:l,state:d}=this,v=(e=toBytes(e)).length;for(let S=0;S<v;){const B=Math.min(l-this.pos,v-S);for(let l=0;l<B;l++)d[this.pos++]^=e[S++];this.pos===l&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:l,pos:d,blockLen:v}=this;e[d]^=l,128&l&&d===v-1&&this.keccak(),e[v-1]^=128,this.keccak()}writeInto(e){exists(this,!1),bytes(e),this.finish();const l=this.state,{blockLen:d}=this;for(let v=0,S=e.length;v<S;){this.posOut>=d&&this.keccak();const B=Math.min(d-this.posOut,S-v);e.set(l.subarray(this.posOut,this.posOut+B),v),this.posOut+=B,v+=B}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:l,suffix:d,outputLen:v,rounds:S,enableXOF:B}=this;return e||(e=new Keccak(l,d,v,B,S)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=S,e.suffix=d,e.outputLen=v,e.enableXOF=B,e.destroyed=this.destroyed,e}}const gen=(e,l,d)=>wrapConstructor((()=>new Keccak(l,e,d))),Ii=gen(6,144,28),Ni=gen(6,136,32),_i=gen(6,104,48),Mi=gen(6,72,64),Ri=gen(1,144,28),xi=gen(1,136,32),Ui=gen(1,104,48),Ai=gen(1,72,64),genShake=(e,l,d)=>function(e){const hashC=(l,d)=>e(d).update(toBytes(l)).digest(),l=e({});return hashC.outputLen=l.outputLen,hashC.blockLen=l.blockLen,hashC.create=l=>e(l),hashC}(((v={})=>new Keccak(l,e,void 0===v.dkLen?d:v.dkLen,!0))),Oi=genShake(31,168,16),Ci=genShake(31,136,32),Fi=Object.freeze(Object.defineProperty({__proto__:null,Keccak:Keccak,keccakP:keccakP,keccak_224:Ri,keccak_256:xi,keccak_384:Ui,keccak_512:Ai,sha3_224:Ii,sha3_256:Ni,sha3_384:_i,sha3_512:Mi,shake128:Oi,shake256:Ci},Symbol.toStringTag,{value:"Module"}));class HMAC extends Hash{constructor(e,l){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");number(e.outputLen),number(e.blockLen)}(e);const d=toBytes(l);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const v=this.blockLen,S=new Uint8Array(v);S.set(d.length>v?e.create().update(d).digest():d);for(let e=0;e<S.length;e++)S[e]^=54;this.iHash.update(S),this.oHash=e.create();for(let e=0;e<S.length;e++)S[e]^=106;this.oHash.update(S),S.fill(0)}update(e){return exists(this),this.iHash.update(e),this}digestInto(e){exists(this),bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:l,iHash:d,finished:v,destroyed:S,blockLen:B,outputLen:T}=this;return e.finished=v,e.destroyed=S,e.blockLen=B,e.outputLen=T,e.oHash=l._cloneInto(e.oHash),e.iHash=d._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(e,l,d)=>new HMAC(e,l).update(d).digest();function validateSigVerOpts(e){void 0!==e.lowS&&abool("lowS",e.lowS),void 0!==e.prehash&&abool("prehash",e.prehash)}hmac.create=(e,l)=>new HMAC(e,l);const{bytesToNumberBE:Li,hexToBytes:Pi}=jt,Di={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:l}=Di;if(e.length<2||2!==e[0])throw new l("Invalid signature integer tag");const d=e[1],v=e.subarray(2,d+2);if(!d||v.length!==d)throw new l("Invalid signature integer: wrong length");if(128&v[0])throw new l("Invalid signature integer: negative");if(0===v[0]&&!(128&v[1]))throw new l("Invalid signature integer: unnecessary leading zero");return{d:Li(v),l:e.subarray(d+2)}},toSig(e){const{Err:l}=Di,d="string"==typeof e?Pi(e):e;abytes(d);let v=d.length;if(v<2||48!=d[0])throw new l("Invalid signature tag");if(d[1]!==v-2)throw new l("Invalid signature: incorrect length");const{d:S,l:B}=Di._parseInt(d.subarray(2)),{d:T,l:k}=Di._parseInt(B);if(k.length)throw new l("Invalid signature: left bytes after parsing");return{r:S,s:T}},hexFromSig(e){const slice=e=>8&Number.parseInt(e[0],16)?"00"+e:e,h=e=>{const l=e.toString(16);return 1&l.length?`0${l}`:l},l=slice(h(e.s)),d=slice(h(e.r)),v=l.length/2,S=d.length/2,B=h(v),T=h(S);return`30${h(S+v+4)}02${T}${d}02${B}${l}`}},Wi=BigInt(0),Vi=BigInt(1),ji=BigInt(2),zi=BigInt(3),Zi=BigInt(4);function weierstrassPoints(e){const l=function(e){const l=validateBasic(e);validateObject(l,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:d,Fp:v,a:S}=l;if(d){if(!v.eql(S,v.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof d||"bigint"!=typeof d.beta||"function"!=typeof d.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...l})}(e),{Fp:d}=l,v=l.toBytes||((e,l,v)=>{const S=l.toAffine();return concatBytes(Uint8Array.from([4]),d.toBytes(S.x),d.toBytes(S.y))}),S=l.fromBytes||(e=>{const l=e.subarray(1);return{x:d.fromBytes(l.subarray(0,d.BYTES)),y:d.fromBytes(l.subarray(d.BYTES,2*d.BYTES))}});function weierstrassEquation(e){const{a:v,b:S}=l,B=d.sqr(e),T=d.mul(B,e);return d.add(d.add(T,d.mul(e,v)),S)}if(!d.eql(d.sqr(l.Gy),weierstrassEquation(l.Gx)))throw new Error("bad generator point: equation left != right");function normPrivateKeyToScalar(e){const{allowedPrivateKeyLengths:d,nByteLength:v,wrapPrivateKey:S,n:B}=l;if(d&&"bigint"!=typeof e){if(isBytes(e)&&(e=bytesToHex(e)),"string"!=typeof e||!d.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*v,"0")}let T;try{T="bigint"==typeof e?e:bytesToNumberBE(ensureBytes("private key",e,v))}catch(l){throw new Error(`private key must be ${v} bytes, hex or bigint, not ${typeof e}`)}return S&&(T=mod(T,B)),aInRange("private key",T,Vi,B),T}function assertPrjPoint(e){if(!(e instanceof Point))throw new Error("ProjectivePoint expected")}const B=memoized(((e,l)=>{const{px:v,py:S,pz:B}=e;if(d.eql(B,d.ONE))return{x:v,y:S};const T=e.is0();null==l&&(l=T?d.ONE:d.inv(B));const k=d.mul(v,l),x=d.mul(S,l),U=d.mul(B,l);if(T)return{x:d.ZERO,y:d.ZERO};if(!d.eql(U,d.ONE))throw new Error("invZ was invalid");return{x:k,y:x}})),T=memoized((e=>{if(e.is0()){if(l.allowInfinityPoint&&!d.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:v,y:S}=e.toAffine();if(!d.isValid(v)||!d.isValid(S))throw new Error("bad point: x or y not FE");const B=d.sqr(S),T=weierstrassEquation(v);if(!d.eql(B,T))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class Point{constructor(e,l,v){if(this.px=e,this.py=l,this.pz=v,null==e||!d.isValid(e))throw new Error("x required");if(null==l||!d.isValid(l))throw new Error("y required");if(null==v||!d.isValid(v))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:l,y:v}=e||{};if(!e||!d.isValid(l)||!d.isValid(v))throw new Error("invalid affine point");if(e instanceof Point)throw new Error("projective point not allowed");const is0=e=>d.eql(e,d.ZERO);return is0(l)&&is0(v)?Point.ZERO:new Point(l,v,d.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const l=d.invertBatch(e.map((e=>e.pz)));return e.map(((e,d)=>e.toAffine(l[d]))).map(Point.fromAffine)}static fromHex(e){const l=Point.fromAffine(S(ensureBytes("pointHex",e)));return l.assertValidity(),l}static fromPrivateKey(e){return Point.BASE.multiply(normPrivateKeyToScalar(e))}_setWindowSize(e){x.setWindowSize(this,e)}assertValidity(){T(this)}hasEvenY(){const{y:e}=this.toAffine();if(d.isOdd)return!d.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){assertPrjPoint(e);const{px:l,py:v,pz:S}=this,{px:B,py:T,pz:k}=e,x=d.eql(d.mul(l,k),d.mul(B,S)),U=d.eql(d.mul(v,k),d.mul(T,S));return x&&U}negate(){return new Point(this.px,d.neg(this.py),this.pz)}double(){const{a:e,b:v}=l,S=d.mul(v,zi),{px:B,py:T,pz:k}=this;let x=d.ZERO,U=d.ZERO,O=d.ZERO,F=d.mul(B,B),P=d.mul(T,T),D=d.mul(k,k),W=d.mul(B,T);return W=d.add(W,W),O=d.mul(B,k),O=d.add(O,O),x=d.mul(e,O),U=d.mul(S,D),U=d.add(x,U),x=d.sub(P,U),U=d.add(P,U),U=d.mul(x,U),x=d.mul(W,x),O=d.mul(S,O),D=d.mul(e,D),W=d.sub(F,D),W=d.mul(e,W),W=d.add(W,O),O=d.add(F,F),F=d.add(O,F),F=d.add(F,D),F=d.mul(F,W),U=d.add(U,F),D=d.mul(T,k),D=d.add(D,D),F=d.mul(D,W),x=d.sub(x,F),O=d.mul(D,P),O=d.add(O,O),O=d.add(O,O),new Point(x,U,O)}add(e){assertPrjPoint(e);const{px:v,py:S,pz:B}=this,{px:T,py:k,pz:x}=e;let U=d.ZERO,O=d.ZERO,F=d.ZERO;const P=l.a,D=d.mul(l.b,zi);let W=d.mul(v,T),j=d.mul(S,k),z=d.mul(B,x),Q=d.add(v,S),K=d.add(T,k);Q=d.mul(Q,K),K=d.add(W,j),Q=d.sub(Q,K),K=d.add(v,B);let H=d.add(T,x);return K=d.mul(K,H),H=d.add(W,z),K=d.sub(K,H),H=d.add(S,B),U=d.add(k,x),H=d.mul(H,U),U=d.add(j,z),H=d.sub(H,U),F=d.mul(P,K),U=d.mul(D,z),F=d.add(U,F),U=d.sub(j,F),F=d.add(j,F),O=d.mul(U,F),j=d.add(W,W),j=d.add(j,W),z=d.mul(P,z),K=d.mul(D,K),j=d.add(j,z),z=d.sub(W,z),z=d.mul(P,z),K=d.add(K,z),W=d.mul(j,K),O=d.add(O,W),W=d.mul(H,K),U=d.mul(Q,U),U=d.sub(U,W),W=d.mul(Q,j),F=d.mul(H,F),F=d.add(F,W),new Point(U,O,F)}subtract(e){return this.add(e.negate())}is0(){return this.equals(Point.ZERO)}wNAF(e){return x.wNAFCached(this,e,Point.normalizeZ)}multiplyUnsafe(e){aInRange("scalar",e,Wi,l.n);const v=Point.ZERO;if(e===Wi)return v;if(e===Vi)return this;const{endo:S}=l;if(!S)return x.unsafeLadder(this,e);let{k1neg:B,k1:T,k2neg:k,k2:U}=S.splitScalar(e),O=v,F=v,P=this;for(;T>Wi||U>Wi;)T&Vi&&(O=O.add(P)),U&Vi&&(F=F.add(P)),P=P.double(),T>>=Vi,U>>=Vi;return B&&(O=O.negate()),k&&(F=F.negate()),F=new Point(d.mul(F.px,S.beta),F.py,F.pz),O.add(F)}multiply(e){const{endo:v,n:S}=l;let B,T;if(aInRange("scalar",e,Vi,S),v){const{k1neg:l,k1:S,k2neg:k,k2:U}=v.splitScalar(e);let{p:O,f:F}=this.wNAF(S),{p:P,f:D}=this.wNAF(U);O=x.constTimeNegate(l,O),P=x.constTimeNegate(k,P),P=new Point(d.mul(P.px,v.beta),P.py,P.pz),B=O.add(P),T=F.add(D)}else{const{p:l,f:d}=this.wNAF(e);B=l,T=d}return Point.normalizeZ([B,T])[0]}multiplyAndAddUnsafe(e,l,d){const v=Point.BASE,mul=(e,l)=>l!==Wi&&l!==Vi&&e.equals(v)?e.multiply(l):e.multiplyUnsafe(l),S=mul(this,l).add(mul(e,d));return S.is0()?void 0:S}toAffine(e){return B(this,e)}isTorsionFree(){const{h:e,isTorsionFree:d}=l;if(e===Vi)return!0;if(d)return d(Point,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:d}=l;return e===Vi?this:d?d(Point,this):this.multiplyUnsafe(l.h)}toRawBytes(e=!0){return abool("isCompressed",e),this.assertValidity(),v(Point,this,e)}toHex(e=!0){return abool("isCompressed",e),bytesToHex(this.toRawBytes(e))}}Point.BASE=new Point(l.Gx,l.Gy,d.ONE),Point.ZERO=new Point(d.ZERO,d.ONE,d.ZERO);const k=l.nBitLength,x=wNAF(Point,l.endo?Math.ceil(k/2):k);return{CURVE:l,ProjectivePoint:Point,normPrivateKeyToScalar:normPrivateKeyToScalar,weierstrassEquation:weierstrassEquation,isWithinCurveOrder:function(e){return inRange$1(e,Vi,l.n)}}}function weierstrass(e){const l=function(e){const l=validateBasic(e);return validateObject(l,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...l})}(e),{Fp:d,n:v}=l,S=d.BYTES+1,B=2*d.BYTES+1;function modN(e){return mod(e,v)}function invN(e){return invert(e,v)}const{ProjectivePoint:T,normPrivateKeyToScalar:k,weierstrassEquation:x,isWithinCurveOrder:U}=weierstrassPoints({...l,toBytes(e,l,v){const S=l.toAffine(),B=d.toBytes(S.x),T=concatBytes;return abool("isCompressed",v),v?T(Uint8Array.from([l.hasEvenY()?2:3]),B):T(Uint8Array.from([4]),B,d.toBytes(S.y))},fromBytes(e){const l=e.length,v=e[0],T=e.subarray(1);if(l!==S||2!==v&&3!==v){if(l===B&&4===v){return{x:d.fromBytes(T.subarray(0,d.BYTES)),y:d.fromBytes(T.subarray(d.BYTES,2*d.BYTES))}}throw new Error(`Point of length ${l} was invalid. Expected ${S} compressed bytes or ${B} uncompressed bytes`)}{const e=bytesToNumberBE(T);if(!inRange$1(e,Vi,d.ORDER))throw new Error("Point is not on curve");const l=x(e);let S;try{S=d.sqrt(l)}catch(e){const l=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+l)}return!(1&~v)!==((S&Vi)===Vi)&&(S=d.neg(S)),{x:e,y:S}}}}),numToNByteStr=e=>bytesToHex(numberToBytesBE(e,l.nByteLength));function isBiggerThanHalfOrder(e){return e>v>>Vi}const slcNum=(e,l,d)=>bytesToNumberBE(e.slice(l,d));class Signature{constructor(e,l,d){this.r=e,this.s=l,this.recovery=d,this.assertValidity()}static fromCompact(e){const d=l.nByteLength;return e=ensureBytes("compactSignature",e,2*d),new Signature(slcNum(e,0,d),slcNum(e,d,2*d))}static fromDER(e){const{r:l,s:d}=Di.toSig(ensureBytes("DER",e));return new Signature(l,d)}assertValidity(){aInRange("r",this.r,Vi,v),aInRange("s",this.s,Vi,v)}addRecoveryBit(e){return new Signature(this.r,this.s,e)}recoverPublicKey(e){const{r:v,s:S,recovery:B}=this,k=P(ensureBytes("msgHash",e));if(null==B||![0,1,2,3].includes(B))throw new Error("recovery id invalid");const x=2===B||3===B?v+l.n:v;if(x>=d.ORDER)throw new Error("recovery id 2 or 3 invalid");const U=1&B?"03":"02",O=T.fromHex(U+numToNByteStr(x)),F=invN(x),D=modN(-k*F),W=modN(S*F),j=T.BASE.multiplyAndAddUnsafe(O,D,W);if(!j)throw new Error("point at infinify");return j.assertValidity(),j}hasHighS(){return isBiggerThanHalfOrder(this.s)}normalizeS(){return this.hasHighS()?new Signature(this.r,modN(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return Di.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return numToNByteStr(this.r)+numToNByteStr(this.s)}}const O={isValidPrivateKey(e){try{return k(e),!0}catch(e){return!1}},normPrivateKeyToScalar:k,randomPrivateKey:()=>{const e=getMinHashLength(l.n);return function(e,l,d=!1){const v=e.length,S=getFieldBytesLength(l),B=getMinHashLength(l);if(v<16||v<B||v>1024)throw new Error(`expected ${B}-1024 bytes of input, got ${v}`);const T=mod(d?bytesToNumberBE(e):bytesToNumberLE(e),l-Zt)+Zt;return d?numberToBytesLE(T,S):numberToBytesBE(T,S)}(l.randomBytes(e),l.n)},precompute:(e=8,l=T.BASE)=>(l._setWindowSize(e),l.multiply(BigInt(3)),l)};function isProbPub(e){const l=isBytes(e),d="string"==typeof e,v=(l||d)&&e.length;return l?v===S||v===B:d?v===2*S||v===2*B:e instanceof T}const F=l.bits2int||function(e){const d=bytesToNumberBE(e),v=8*e.length-l.nBitLength;return v>0?d>>BigInt(v):d},P=l.bits2int_modN||function(e){return modN(F(e))},D=bitMask(l.nBitLength);function int2octets(e){return aInRange(`num < 2^${l.nBitLength}`,e,Wi,D),numberToBytesBE(e,l.nByteLength)}function prepSig(e,v,S=W){if(["recovered","canonical"].some((e=>e in S)))throw new Error("sign() legacy options not supported");const{hash:B,randomBytes:x}=l;let{lowS:O,prehash:D,extraEntropy:j}=S;null==O&&(O=!0),e=ensureBytes("msgHash",e),validateSigVerOpts(S),D&&(e=ensureBytes("prehashed msgHash",B(e)));const z=P(e),Q=k(v),K=[int2octets(Q),int2octets(z)];if(null!=j&&!1!==j){const e=!0===j?x(d.BYTES):j;K.push(ensureBytes("extraEntropy",e))}const H=concatBytes(...K),q=z;return{seed:H,k2sig:function(e){const l=F(e);if(!U(l))return;const d=invN(l),v=T.BASE.multiply(l).toAffine(),S=modN(v.x);if(S===Wi)return;const B=modN(d*modN(q+S*Q));if(B===Wi)return;let k=(v.x===S?0:2)|Number(v.y&Vi),x=B;return O&&isBiggerThanHalfOrder(B)&&(x=function(e){return isBiggerThanHalfOrder(e)?modN(-e):e}(B),k^=1),new Signature(S,x,k)}}}const W={lowS:l.lowS,prehash:!1},j={lowS:l.lowS,prehash:!1};return T.BASE._setWindowSize(8),{CURVE:l,getPublicKey:function(e,l=!0){return T.fromPrivateKey(e).toRawBytes(l)},getSharedSecret:function(e,l,d=!0){if(isProbPub(e))throw new Error("first arg must be private key");if(!isProbPub(l))throw new Error("second arg must be public key");return T.fromHex(l).multiply(k(e)).toRawBytes(d)},sign:function(e,d,v=W){const{seed:S,k2sig:B}=prepSig(e,d,v),T=l;return createHmacDrbg(T.hash.outputLen,T.nByteLength,T.hmac)(S,B)},verify:function(e,d,v,S=j){const B=e;if(d=ensureBytes("msgHash",d),v=ensureBytes("publicKey",v),"strict"in S)throw new Error("options.strict was renamed to lowS");validateSigVerOpts(S);const{lowS:k,prehash:x}=S;let U,O;try{if("string"==typeof B||isBytes(B))try{U=Signature.fromDER(B)}catch(e){if(!(e instanceof Di.Err))throw e;U=Signature.fromCompact(B)}else{if("object"!=typeof B||"bigint"!=typeof B.r||"bigint"!=typeof B.s)throw new Error("PARSE");{const{r:e,s:l}=B;U=new Signature(e,l)}}O=T.fromHex(v)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(k&&U.hasHighS())return!1;x&&(d=l.hash(d));const{r:F,s:D}=U,W=P(d),z=invN(D),Q=modN(W*z),K=modN(F*z),H=T.BASE.multiplyAndAddUnsafe(O,Q,K)?.toAffine();return!!H&&modN(H.x)===F},ProjectivePoint:T,Signature:Signature,utils:O}}function mapToCurveSimpleSWU(e,l){if(validateField(e),!e.isValid(l.A)||!e.isValid(l.B)||!e.isValid(l.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const d=function(e,l){const d=e.ORDER;let v=Wi;for(let e=d-Vi;e%ji===Wi;e/=ji)v+=Vi;const S=v,B=ji<<S-Vi-Vi,T=B*ji,k=(d-Vi)/T,x=(k-Vi)/ji,U=T-Vi,O=B,F=e.pow(l,k),P=e.pow(l,(k+Vi)/ji);let sqrtRatio=(l,d)=>{let v=F,B=e.pow(d,U),T=e.sqr(B);T=e.mul(T,d);let k=e.mul(l,T);k=e.pow(k,x),k=e.mul(k,B),B=e.mul(k,d),T=e.mul(k,l);let D=e.mul(T,B);k=e.pow(D,O);let W=e.eql(k,e.ONE);B=e.mul(T,P),k=e.mul(D,v),T=e.cmov(B,T,W),D=e.cmov(k,D,W);for(let l=S;l>Vi;l--){let d=l-ji;d=ji<<d-Vi;let S=e.pow(D,d);const k=e.eql(S,e.ONE);B=e.mul(T,v),v=e.mul(v,v),S=e.mul(D,v),T=e.cmov(B,T,k),D=e.cmov(S,D,k)}return{isValid:W,value:T}};if(e.ORDER%Zi===zi){const d=(e.ORDER-zi)/Zi,v=e.sqrt(e.neg(l));sqrtRatio=(l,S)=>{let B=e.sqr(S);const T=e.mul(l,S);B=e.mul(B,T);let k=e.pow(B,d);k=e.mul(k,T);const x=e.mul(k,v),U=e.mul(e.sqr(k),S),O=e.eql(U,l);return{isValid:O,value:e.cmov(x,k,O)}}}return sqrtRatio}(e,l.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return v=>{let S,B,T,k,x,U,O,F;S=e.sqr(v),S=e.mul(S,l.Z),B=e.sqr(S),B=e.add(B,S),T=e.add(B,e.ONE),T=e.mul(T,l.B),k=e.cmov(l.Z,e.neg(B),!e.eql(B,e.ZERO)),k=e.mul(k,l.A),B=e.sqr(T),U=e.sqr(k),x=e.mul(U,l.A),B=e.add(B,x),B=e.mul(B,T),U=e.mul(U,k),x=e.mul(U,l.B),B=e.add(B,x),O=e.mul(S,T);const{isValid:P,value:D}=d(B,U);F=e.mul(S,v),F=e.mul(F,D),O=e.cmov(O,T,P),F=e.cmov(F,D,P);const W=e.isOdd(v)===e.isOdd(F);return F=e.cmov(e.neg(F),F,W),O=e.div(O,k),{x:O,y:F}}}function getHash(e){return{hash:e,hmac:(l,...d)=>hmac(e,l,concatBytes$1(...d)),randomBytes:randomBytes}}const Qi=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ki=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Hi=BigInt(1),qi=BigInt(2),divNearest=(e,l)=>(e+l/qi)/l;function sqrtMod(e){const l=Qi,d=BigInt(3),v=BigInt(6),S=BigInt(11),B=BigInt(22),T=BigInt(23),k=BigInt(44),x=BigInt(88),U=e*e*e%l,O=U*U*e%l,F=pow2(O,d,l)*O%l,P=pow2(F,d,l)*O%l,D=pow2(P,qi,l)*U%l,W=pow2(D,S,l)*D%l,j=pow2(W,B,l)*W%l,z=pow2(j,k,l)*j%l,Q=pow2(z,x,l)*z%l,K=pow2(Q,k,l)*j%l,H=pow2(K,d,l)*O%l,q=pow2(H,T,l)*W%l,G=pow2(q,v,l)*U%l,J=pow2(G,qi,l);if(!Gi.eql(Gi.sqr(J),e))throw new Error("Cannot find square root");return J}const Gi=Field(Qi,void 0,void 0,{sqrt:sqrtMod}),Yi=function(e,l){const create=l=>weierstrass({...e,...getHash(l)});return Object.freeze({...create(l),create:create})}({a:BigInt(0),b:BigInt(7),Fp:Gi,n:Ki,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const l=Ki,d=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),v=-Hi*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),S=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),B=d,T=BigInt("0x100000000000000000000000000000000"),k=divNearest(B*e,l),x=divNearest(-v*e,l);let U=mod(e-k*d-x*S,l),O=mod(-k*v-x*B,l);const F=U>T,P=O>T;if(F&&(U=l-U),P&&(O=l-O),U>T||O>T)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:F,k1:U,k2neg:P,k2:O}}}},kn),Ji=BigInt(0),$i={};function taggedHash(e,...l){let d=$i[e];if(void 0===d){const l=kn(Uint8Array.from(e,(e=>e.charCodeAt(0))));d=concatBytes(l,l),$i[e]=d}return kn(concatBytes(d,...l))}const pointToBytes=e=>e.toRawBytes(!0).slice(1),numTo32b=e=>numberToBytesBE(e,32),modP=e=>mod(e,Qi),modN=e=>mod(e,Ki),Xi=Yi.ProjectivePoint,GmulAdd=(e,l,d)=>Xi.BASE.multiplyAndAddUnsafe(e,l,d);function schnorrGetExtPubKey(e){let l=Yi.utils.normPrivateKeyToScalar(e),d=Xi.fromPrivateKey(l);return{scalar:d.hasEvenY()?l:modN(-l),bytes:pointToBytes(d)}}function lift_x(e){aInRange("x",e,Hi,Qi);const l=modP(e*e);let d=sqrtMod(modP(l*e+BigInt(7)));d%qi!==Ji&&(d=modP(-d));const v=new Xi(e,d,Hi);return v.assertValidity(),v}const es=bytesToNumberBE;function challenge(...e){return modN(es(taggedHash("BIP0340/challenge",...e)))}function schnorrGetPublicKey(e){return schnorrGetExtPubKey(e).bytes}function schnorrSign(e,l,d=randomBytes(32)){const v=ensureBytes("message",e),{bytes:S,scalar:B}=schnorrGetExtPubKey(l),T=ensureBytes("auxRand",d,32),k=numTo32b(B^es(taggedHash("BIP0340/aux",T))),x=taggedHash("BIP0340/nonce",k,S,v),U=modN(es(x));if(U===Ji)throw new Error("sign failed: k is zero");const{bytes:O,scalar:F}=schnorrGetExtPubKey(U),P=challenge(O,S,v),D=new Uint8Array(64);if(D.set(O,0),D.set(numTo32b(modN(F+P*B)),32),!schnorrVerify(D,v,S))throw new Error("sign: Invalid signature produced");return D}function schnorrVerify(e,l,d){const v=ensureBytes("signature",e,64),S=ensureBytes("message",l),B=ensureBytes("publicKey",d,32);try{const e=lift_x(es(B)),l=es(v.subarray(0,32));if(!inRange$1(l,Hi,Qi))return!1;const d=es(v.subarray(32,64));if(!inRange$1(d,Hi,Ki))return!1;const T=challenge(numTo32b(l),pointToBytes(e),S),k=GmulAdd(e,d,modN(-T));return!(!k||!k.hasEvenY()||k.toAffine().x!==l)}catch(e){return!1}}const ts=(()=>({getPublicKey:schnorrGetPublicKey,sign:schnorrSign,verify:schnorrVerify,utils:{randomPrivateKey:Yi.utils.randomPrivateKey,lift_x:lift_x,pointToBytes:pointToBytes,numberToBytesBE:numberToBytesBE,bytesToNumberBE:bytesToNumberBE,taggedHash:taggedHash,mod:mod}}))(),rs=(()=>function(e,l){const d=l.map((e=>Array.from(e).reverse()));return(l,v)=>{const[S,B,T,k]=d.map((d=>d.reduce(((d,v)=>e.add(e.mul(d,l),v)))));return l=e.div(S,B),v=e.mul(v,e.div(T,k)),{x:l,y:v}}}(Gi,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))(),ns=(()=>mapToCurveSimpleSWU(Gi,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Gi.create(BigInt("-11"))}))(),os=(()=>createHasher(Yi.ProjectivePoint,(e=>{const{x:l,y:d}=ns(Gi.create(e[0]));return rs(l,d)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Gi.ORDER,m:1,k:128,expand:"xmd",hash:kn}))(),ss=(()=>os.hashToCurve)(),as=(()=>os.encodeToCurve)(),cs=Object.freeze(Object.defineProperty({__proto__:null,encodeToCurve:as,hashToCurve:ss,schnorr:ts,secp256k1:Yi},Symbol.toStringTag,{value:"Module"}));var us=pt,ls=nn,ds=bn,hs=Nn,fs=_n,ps=Kn,ys=$n,gs=Ao,bs=si,ws=Me,Es=ci,vs=pi,Ss=Fi,Bs=cs;function _interopDefaultCompat(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function _interopNamespaceCompat(e){if(e&&"object"==typeof e&&"default"in e)return e;var l=Object.create(null);return e&&Object.keys(e).forEach((function(d){if("default"!==d){var v=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(l,d,v.get?v:{enumerable:!0,get:function(){return e[d]}})}})),l.default=e,Object.freeze(l)}var Ts=_interopDefaultCompat(ln),ks=_interopDefaultCompat(ds),Is=_interopNamespaceCompat(ps),Ns=_interopDefaultCompat(gs),_s=_interopDefaultCompat(bs),Ms=_interopDefaultCompat(ws);ls.ed25519.utils.randomPrivateKey;const generateKeypair=()=>{const e=ls.ed25519.utils.randomPrivateKey(),l=Rs(e),d=new Uint8Array(64);return d.set(e),d.set(l,32),{publicKey:l,secretKey:d}},Rs=ls.ed25519.getPublicKey;function isOnCurve(e){try{return ls.ed25519.ExtendedPoint.fromHex(e),!0}catch{return!1}}const sign=(e,l)=>ls.ed25519.sign(e,l.slice(0,32)),xs=ls.ed25519.verify,toBuffer=e=>us.Buffer.isBuffer(e)?e:e instanceof Uint8Array?us.Buffer.from(e.buffer,e.byteOffset,e.byteLength):us.Buffer.from(e);class Struct{constructor(e){Object.assign(this,e)}encode(){return us.Buffer.from(fs.serialize(Us,this))}static decode(e){return fs.deserialize(Us,this,e)}static decodeUnchecked(e){return fs.deserializeUnchecked(Us,this,e)}}const Us=new Map;var As;const Os=32;let Cs=1;class PublicKey extends Struct{constructor(e){if(super({}),this._bn=void 0,function(e){return void 0!==e._bn}(e))this._bn=e._bn;else{if("string"==typeof e){const l=ks.default.decode(e);if(l.length!=Os)throw new Error("Invalid public key input");this._bn=new Ts.default(l)}else this._bn=new Ts.default(e);if(this._bn.byteLength()>Os)throw new Error("Invalid public key input")}}static unique(){const e=new PublicKey(Cs);return Cs+=1,new PublicKey(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return ks.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(us.Buffer);if(e.length===Os)return e;const l=us.Buffer.alloc(32);return e.copy(l,32-e.length),l}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,l,d){const v=us.Buffer.concat([e.toBuffer(),us.Buffer.from(l),d.toBuffer()]),S=hs.sha256(v);return new PublicKey(S)}static createProgramAddressSync(e,l){let d=us.Buffer.alloc(0);e.forEach((function(e){if(e.length>32)throw new TypeError("Max seed length exceeded");d=us.Buffer.concat([d,toBuffer(e)])})),d=us.Buffer.concat([d,l.toBuffer(),us.Buffer.from("ProgramDerivedAddress")]);const v=hs.sha256(d);if(isOnCurve(v))throw new Error("Invalid seeds, address must fall off the curve");return new PublicKey(v)}static async createProgramAddress(e,l){return this.createProgramAddressSync(e,l)}static findProgramAddressSync(e,l){let d,v=255;for(;0!=v;){try{const S=e.concat(us.Buffer.from([v]));d=this.createProgramAddressSync(S,l)}catch(e){if(e instanceof TypeError)throw e;v--;continue}return[d,v]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,l){return this.findProgramAddressSync(e,l)}static isOnCurve(e){return isOnCurve(new PublicKey(e).toBytes())}}As=PublicKey,PublicKey.default=new As("11111111111111111111111111111111"),Us.set(PublicKey,{kind:"struct",fields:[["_bn","u256"]]}),new PublicKey("BPFLoader1111111111111111111111111111111111");const Fs=1232;class TransactionExpiredBlockheightExceededError extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredBlockheightExceededError.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class TransactionExpiredTimeoutError extends Error{constructor(e,l){super(`Transaction was not confirmed in ${l.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredTimeoutError.prototype,"name",{value:"TransactionExpiredTimeoutError"});class TransactionExpiredNonceInvalidError extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredNonceInvalidError.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class MessageAccountKeys{constructor(e,l){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=l}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const l of this.keySegments()){if(e<l.length)return l[e];e-=l.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const l=new Map;this.keySegments().flat().forEach(((e,d)=>{l.set(e.toBase58(),d)}));const findKeyIndex=e=>{const d=l.get(e.toBase58());if(void 0===d)throw new Error("Encountered an unknown instruction account key during compilation");return d};return e.map((e=>({programIdIndex:findKeyIndex(e.programId),accountKeyIndexes:e.keys.map((e=>findKeyIndex(e.pubkey))),data:e.data})))}}const publicKey=(e="publicKey")=>Is.blob(32,e),signature=(e="signature")=>Is.blob(64,e),rustString=(e="string")=>{const l=Is.struct([Is.u32("length"),Is.u32("lengthPadding"),Is.blob(Is.offset(Is.u32(),-8),"chars")],e),d=l.decode.bind(l),v=l.encode.bind(l),S=l;return S.decode=(e,l)=>d(e,l).chars.toString(),S.encode=(e,l,d)=>{const S={chars:us.Buffer.from(e,"utf8")};return v(S,l,d)},S.alloc=e=>Is.u32().span+Is.u32().span+us.Buffer.from(e,"utf8").length,S};function getAlloc(e,l){const getItemAlloc=e=>{if(e.span>=0)return e.span;if("function"==typeof e.alloc)return e.alloc(l[e.property]);if("count"in e&&"elementLayout"in e){const d=l[e.property];if(Array.isArray(d))return d.length*getItemAlloc(e.elementLayout)}else if("fields"in e)return getAlloc({layout:e},l[e.property]);return 0};let d=0;return e.layout.fields.forEach((e=>{d+=getItemAlloc(e)})),d}function decodeLength(e){let l=0,d=0;for(;;){let v=e.shift();if(l|=(127&v)<<7*d,d+=1,!(128&v))break}return l}function encodeLength(e,l){let d=l;for(;;){let l=127&d;if(d>>=7,0==d){e.push(l);break}l|=128,e.push(l)}}function assert(e,l){if(!e)throw new Error(l||"Assertion failed")}class CompiledKeys{constructor(e,l){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=l}static compile(e,l){const d=new Map,getOrInsertDefault=e=>{const l=e.toBase58();let v=d.get(l);return void 0===v&&(v={isSigner:!1,isWritable:!1,isInvoked:!1},d.set(l,v)),v},v=getOrInsertDefault(l);v.isSigner=!0,v.isWritable=!0;for(const l of e){getOrInsertDefault(l.programId).isInvoked=!0;for(const e of l.keys){const l=getOrInsertDefault(e.pubkey);l.isSigner||=e.isSigner,l.isWritable||=e.isWritable}}return new CompiledKeys(l,d)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];assert(e.length<=256,"Max static account keys length exceeded");const l=e.filter((([,e])=>e.isSigner&&e.isWritable)),d=e.filter((([,e])=>e.isSigner&&!e.isWritable)),v=e.filter((([,e])=>!e.isSigner&&e.isWritable)),S=e.filter((([,e])=>!e.isSigner&&!e.isWritable)),B={numRequiredSignatures:l.length+d.length,numReadonlySignedAccounts:d.length,numReadonlyUnsignedAccounts:S.length};{assert(l.length>0,"Expected at least one writable signer key");const[e]=l[0];assert(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[B,[...l.map((([e])=>new PublicKey(e))),...d.map((([e])=>new PublicKey(e))),...v.map((([e])=>new PublicKey(e))),...S.map((([e])=>new PublicKey(e)))]]}extractTableLookup(e){const[l,d]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&e.isWritable)),[v,S]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&!e.isWritable));if(0!==l.length||0!==v.length)return[{accountKey:e.key,writableIndexes:l,readonlyIndexes:v},{writable:d,readonly:S}]}drainKeysFoundInLookupTable(e,l){const d=new Array,v=new Array;for(const[S,B]of this.keyMetaMap.entries())if(l(B)){const l=new PublicKey(S),B=e.findIndex((e=>e.equals(l)));B>=0&&(assert(B<256,"Max lookup table index exceeded"),d.push(B),v.push(l),this.keyMetaMap.delete(S))}return[d,v]}}const Ls="Reached end of buffer unexpectedly";function guardedShift(e){if(0===e.length)throw new Error(Ls);return e.shift()}function guardedSplice(e,...l){const[d]=l;if(2===l.length?d+(l[1]??0)>e.length:d>=e.length)throw new Error(Ls);return e.splice(...l)}class Message{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new PublicKey(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ks.default.decode(e.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new MessageAccountKeys(this.staticAccountKeys)}static compile(e){const l=CompiledKeys.compile(e.instructions,e.payerKey),[d,v]=l.getMessageComponents(),S=new MessageAccountKeys(v).compileInstructions(e.instructions).map((e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:ks.default.encode(e.data)})));return new Message({header:d,accountKeys:v,recentBlockhash:e.recentBlockhash,instructions:S})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const l=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){return e-l<this.accountKeys.length-l-this.header.numReadonlyUnsignedAccounts}return e<l-this.header.numReadonlySignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,l)=>!this.isProgramId(l)))}serialize(){const e=this.accountKeys.length;let l=[];encodeLength(l,e);const d=this.instructions.map((e=>{const{accounts:l,programIdIndex:d}=e,v=Array.from(ks.default.decode(e.data));let S=[];encodeLength(S,l.length);let B=[];return encodeLength(B,v.length),{programIdIndex:d,keyIndicesCount:us.Buffer.from(S),keyIndices:l,dataLength:us.Buffer.from(B),data:v}}));let v=[];encodeLength(v,d.length);let S=us.Buffer.alloc(Fs);us.Buffer.from(v).copy(S);let B=v.length;d.forEach((e=>{const l=Is.struct([Is.u8("programIdIndex"),Is.blob(e.keyIndicesCount.length,"keyIndicesCount"),Is.seq(Is.u8("keyIndex"),e.keyIndices.length,"keyIndices"),Is.blob(e.dataLength.length,"dataLength"),Is.seq(Is.u8("userdatum"),e.data.length,"data")]).encode(e,S,B);B+=l})),S=S.slice(0,B);const T=Is.struct([Is.blob(1,"numRequiredSignatures"),Is.blob(1,"numReadonlySignedAccounts"),Is.blob(1,"numReadonlyUnsignedAccounts"),Is.blob(l.length,"keyCount"),Is.seq(publicKey("key"),e,"keys"),publicKey("recentBlockhash")]),k={numRequiredSignatures:us.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:us.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:us.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:us.Buffer.from(l),keys:this.accountKeys.map((e=>toBuffer(e.toBytes()))),recentBlockhash:ks.default.decode(this.recentBlockhash)};let x=us.Buffer.alloc(2048);const U=T.encode(k,x);return S.copy(x,U),x.slice(0,U+S.length)}static from(e){let l=[...e];const d=guardedShift(l);if(d!==(127&d))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const v=guardedShift(l),S=guardedShift(l),B=decodeLength(l);let T=[];for(let e=0;e<B;e++){const e=guardedSplice(l,0,Os);T.push(new PublicKey(us.Buffer.from(e)))}const k=guardedSplice(l,0,Os),x=decodeLength(l);let U=[];for(let e=0;e<x;e++){const e=guardedShift(l),d=guardedSplice(l,0,decodeLength(l)),v=guardedSplice(l,0,decodeLength(l)),S=ks.default.encode(us.Buffer.from(v));U.push({programIdIndex:e,accounts:d,data:S})}const O={header:{numRequiredSignatures:d,numReadonlySignedAccounts:v,numReadonlyUnsignedAccounts:S},recentBlockhash:ks.default.encode(us.Buffer.from(k)),accountKeys:T,instructions:U};return new Message(O)}}class MessageV0{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const l of this.addressTableLookups)e+=l.readonlyIndexes.length+l.writableIndexes.length;return e}getAccountKeys(e){let l;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");l=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)l=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new MessageAccountKeys(this.staticAccountKeys,l)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const l=this.header.numRequiredSignatures,d=this.staticAccountKeys.length;if(e>=d){const l=e-d,v=this.addressTableLookups.reduce(((e,l)=>e+l.writableIndexes.length),0);return l<v}if(e>=this.header.numRequiredSignatures){return e-l<d-l-this.header.numReadonlyUnsignedAccounts}return e<l-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(e){const l={writable:[],readonly:[]};for(const d of this.addressTableLookups){const v=e.find((e=>e.key.equals(d.accountKey)));if(!v)throw new Error(`Failed to find address lookup table account for table key ${d.accountKey.toBase58()}`);for(const e of d.writableIndexes){if(!(e<v.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${d.accountKey.toBase58()}`);l.writable.push(v.state.addresses[e])}for(const e of d.readonlyIndexes){if(!(e<v.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${d.accountKey.toBase58()}`);l.readonly.push(v.state.addresses[e])}}return l}static compile(e){const l=CompiledKeys.compile(e.instructions,e.payerKey),d=new Array,v={writable:new Array,readonly:new Array},S=e.addressLookupTableAccounts||[];for(const e of S){const S=l.extractTableLookup(e);if(void 0!==S){const[e,{writable:l,readonly:B}]=S;d.push(e),v.writable.push(...l),v.readonly.push(...B)}}const[B,T]=l.getMessageComponents(),k=new MessageAccountKeys(T,v).compileInstructions(e.instructions);return new MessageV0({header:B,staticAccountKeys:T,recentBlockhash:e.recentBlockhash,compiledInstructions:k,addressTableLookups:d})}serialize(){const e=Array();encodeLength(e,this.staticAccountKeys.length);const l=this.serializeInstructions(),d=Array();encodeLength(d,this.compiledInstructions.length);const v=this.serializeAddressTableLookups(),S=Array();encodeLength(S,this.addressTableLookups.length);const B=Is.struct([Is.u8("prefix"),Is.struct([Is.u8("numRequiredSignatures"),Is.u8("numReadonlySignedAccounts"),Is.u8("numReadonlyUnsignedAccounts")],"header"),Is.blob(e.length,"staticAccountKeysLength"),Is.seq(publicKey(),this.staticAccountKeys.length,"staticAccountKeys"),publicKey("recentBlockhash"),Is.blob(d.length,"instructionsLength"),Is.blob(l.length,"serializedInstructions"),Is.blob(S.length,"addressTableLookupsLength"),Is.blob(v.length,"serializedAddressTableLookups")]),T=new Uint8Array(Fs),k=B.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((e=>e.toBytes())),recentBlockhash:ks.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(d),serializedInstructions:l,addressTableLookupsLength:new Uint8Array(S),serializedAddressTableLookups:v},T);return T.slice(0,k)}serializeInstructions(){let e=0;const l=new Uint8Array(Fs);for(const d of this.compiledInstructions){const v=Array();encodeLength(v,d.accountKeyIndexes.length);const S=Array();encodeLength(S,d.data.length);e+=Is.struct([Is.u8("programIdIndex"),Is.blob(v.length,"encodedAccountKeyIndexesLength"),Is.seq(Is.u8(),d.accountKeyIndexes.length,"accountKeyIndexes"),Is.blob(S.length,"encodedDataLength"),Is.blob(d.data.length,"data")]).encode({programIdIndex:d.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(v),accountKeyIndexes:d.accountKeyIndexes,encodedDataLength:new Uint8Array(S),data:d.data},l,e)}return l.slice(0,e)}serializeAddressTableLookups(){let e=0;const l=new Uint8Array(Fs);for(const d of this.addressTableLookups){const v=Array();encodeLength(v,d.writableIndexes.length);const S=Array();encodeLength(S,d.readonlyIndexes.length);e+=Is.struct([publicKey("accountKey"),Is.blob(v.length,"encodedWritableIndexesLength"),Is.seq(Is.u8(),d.writableIndexes.length,"writableIndexes"),Is.blob(S.length,"encodedReadonlyIndexesLength"),Is.seq(Is.u8(),d.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:d.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(v),writableIndexes:d.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(S),readonlyIndexes:d.readonlyIndexes},l,e)}return l.slice(0,e)}static deserialize(e){let l=[...e];const d=guardedShift(l),v=127&d;assert(d!==v,"Expected versioned message but received legacy message");assert(0===v,`Expected versioned message with version 0 but found version ${v}`);const S={numRequiredSignatures:guardedShift(l),numReadonlySignedAccounts:guardedShift(l),numReadonlyUnsignedAccounts:guardedShift(l)},B=[],T=decodeLength(l);for(let e=0;e<T;e++)B.push(new PublicKey(guardedSplice(l,0,Os)));const k=ks.default.encode(guardedSplice(l,0,Os)),x=decodeLength(l),U=[];for(let e=0;e<x;e++){const e=guardedShift(l),d=guardedSplice(l,0,decodeLength(l)),v=decodeLength(l),S=new Uint8Array(guardedSplice(l,0,v));U.push({programIdIndex:e,accountKeyIndexes:d,data:S})}const O=decodeLength(l),F=[];for(let e=0;e<O;e++){const e=new PublicKey(guardedSplice(l,0,Os)),d=guardedSplice(l,0,decodeLength(l)),v=guardedSplice(l,0,decodeLength(l));F.push({accountKey:e,writableIndexes:d,readonlyIndexes:v})}return new MessageV0({header:S,staticAccountKeys:B,recentBlockhash:k,compiledInstructions:U,addressTableLookups:F})}}const Ps={deserializeMessageVersion(e){const l=e[0],d=127&l;return d===l?"legacy":d},deserialize:e=>{const l=Ps.deserializeMessageVersion(e);if("legacy"===l)return Message.from(e);if(0===l)return MessageV0.deserialize(e);throw new Error(`Transaction message version ${l} deserialization is not supported`)}},Ds=us.Buffer.alloc(64).fill(0);class TransactionInstruction{constructor(e){this.keys=void 0,this.programId=void 0,this.data=us.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map((({pubkey:e,isSigner:l,isWritable:d})=>({pubkey:e.toJSON(),isSigner:l,isWritable:d}))),programId:this.programId.toJSON(),data:[...this.data]}}}class Transaction{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:l,nonceInfo:d}=e;this.minNonceContextSlot=l,this.nonceInfo=d}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:l,lastValidBlockHeight:d}=e;this.recentBlockhash=l,this.lastValidBlockHeight=d}else{const{recentBlockhash:l,nonceInfo:d}=e;d&&(this.nonceInfo=d),this.recentBlockhash=l}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((e=>e.toJSON())),signers:this.signatures.map((({publicKey:e})=>e.toJSON()))}}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new TransactionInstruction(e))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,l,d;if(this.nonceInfo?(e=this.nonceInfo.nonce,l=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,l=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(l.length<1&&console.warn("No instructions provided"),this.feePayer)d=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");d=this.signatures[0].publicKey}for(let e=0;e<l.length;e++)if(void 0===l[e].programId)throw new Error(`Transaction instruction index ${e} has undefined program id`);const v=[],S=[];l.forEach((e=>{e.keys.forEach((e=>{S.push({...e})}));const l=e.programId.toString();v.includes(l)||v.push(l)})),v.forEach((e=>{S.push({pubkey:new PublicKey(e),isSigner:!1,isWritable:!1})}));const B=[];S.forEach((e=>{const l=e.pubkey.toString(),d=B.findIndex((e=>e.pubkey.toString()===l));d>-1?(B[d].isWritable=B[d].isWritable||e.isWritable,B[d].isSigner=B[d].isSigner||e.isSigner):B.push(e)})),B.sort((function(e,l){if(e.isSigner!==l.isSigner)return e.isSigner?-1:1;if(e.isWritable!==l.isWritable)return e.isWritable?-1:1;return e.pubkey.toBase58().localeCompare(l.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));const T=B.findIndex((e=>e.pubkey.equals(d)));if(T>-1){const[e]=B.splice(T,1);e.isSigner=!0,e.isWritable=!0,B.unshift(e)}else B.unshift({pubkey:d,isSigner:!0,isWritable:!0});for(const e of this.signatures){const l=B.findIndex((l=>l.pubkey.equals(e.publicKey)));if(!(l>-1))throw new Error(`unknown signer: ${e.publicKey.toString()}`);B[l].isSigner||(B[l].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let k=0,x=0,U=0;const O=[],F=[];B.forEach((({pubkey:e,isSigner:l,isWritable:d})=>{l?(O.push(e.toString()),k+=1,d||(x+=1)):(F.push(e.toString()),d||(U+=1))}));const P=O.concat(F),D=l.map((e=>{const{data:l,programId:d}=e;return{programIdIndex:P.indexOf(d.toString()),accounts:e.keys.map((e=>P.indexOf(e.pubkey.toString()))),data:ks.default.encode(l)}}));return D.forEach((e=>{assert(e.programIdIndex>=0),e.accounts.forEach((e=>assert(e>=0)))})),new Message({header:{numRequiredSignatures:k,numReadonlySignedAccounts:x,numReadonlyUnsignedAccounts:U},accountKeys:P,recentBlockhash:e,instructions:D})}_compile(){const e=this.compileMessage(),l=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===l.length){if(this.signatures.every(((e,d)=>l[d].equals(e.publicKey))))return e}return this.signatures=l.map((e=>({signature:null,publicKey:e}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw new Error("No signers");const l=new Set;this.signatures=e.filter((e=>{const d=e.toString();return!l.has(d)&&(l.add(d),!0)})).map((e=>({signature:null,publicKey:e})))}sign(...e){if(0===e.length)throw new Error("No signers");const l=new Set,d=[];for(const v of e){const e=v.publicKey.toString();l.has(e)||(l.add(e),d.push(v))}this.signatures=d.map((e=>({signature:null,publicKey:e.publicKey})));const v=this._compile();this._partialSign(v,...d)}partialSign(...e){if(0===e.length)throw new Error("No signers");const l=new Set,d=[];for(const v of e){const e=v.publicKey.toString();l.has(e)||(l.add(e),d.push(v))}const v=this._compile();this._partialSign(v,...d)}_partialSign(e,...l){const d=e.serialize();l.forEach((e=>{const l=sign(d,e.secretKey);this._addSignature(e.publicKey,toBuffer(l))}))}addSignature(e,l){this._compile(),this._addSignature(e,l)}_addSignature(e,l){assert(64===l.length);const d=this.signatures.findIndex((l=>e.equals(l.publicKey)));if(d<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[d].signature=us.Buffer.from(l)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,l){const d={};for(const{signature:v,publicKey:S}of this.signatures)null===v?l&&(d.missing||=[]).push(S):xs(v,e,S.toBytes())||(d.invalid||=[]).push(S);return d.invalid||d.missing?d:void 0}serialize(e){const{requireAllSignatures:l,verifySignatures:d}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),v=this.serializeMessage();if(d){const e=this._getMessageSignednessErrors(v,l);if(e){let l="Signature verification failed.";throw e.invalid&&(l+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map((e=>e.toBase58())).join("`, `")}\`].`),e.missing&&(l+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map((e=>e.toBase58())).join("`, `")}\`].`),new Error(l)}}return this._serialize(v)}_serialize(e){const{signatures:l}=this,d=[];encodeLength(d,l.length);const v=d.length+64*l.length+e.length,S=us.Buffer.alloc(v);return assert(l.length<256),us.Buffer.from(d).copy(S,0),l.forEach((({signature:e},l)=>{null!==e&&(assert(64===e.length,"signature has invalid length"),us.Buffer.from(e).copy(S,d.length+64*l))})),e.copy(S,d.length+64*l.length),assert(S.length<=Fs,`Transaction too large: ${S.length} > 1232`),S}get keys(){return assert(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return assert(1===this.instructions.length),this.instructions[0].programId}get data(){return assert(1===this.instructions.length),this.instructions[0].data}static from(e){let l=[...e];const d=decodeLength(l);let v=[];for(let e=0;e<d;e++){const e=guardedSplice(l,0,64);v.push(ks.default.encode(us.Buffer.from(e)))}return Transaction.populate(Message.from(l),v)}static populate(e,l=[]){const d=new Transaction;return d.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(d.feePayer=e.accountKeys[0]),l.forEach(((l,v)=>{const S={signature:l==ks.default.encode(Ds)?null:ks.default.decode(l),publicKey:e.accountKeys[v]};d.signatures.push(S)})),e.instructions.forEach((l=>{const v=l.accounts.map((l=>{const v=e.accountKeys[l];return{pubkey:v,isSigner:d.signatures.some((e=>e.publicKey.toString()===v.toString()))||e.isAccountSigner(l),isWritable:e.isAccountWritable(l)}}));d.instructions.push(new TransactionInstruction({keys:v,programId:e.accountKeys[l.programIdIndex],data:ks.default.decode(l.data)}))})),d._message=e,d._json=d.toJSON(),d}}class VersionedTransaction{get version(){return this.message.version}constructor(e,l){if(this.signatures=void 0,this.message=void 0,void 0!==l)assert(l.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=l;else{const l=[];for(let d=0;d<e.header.numRequiredSignatures;d++)l.push(new Uint8Array(64));this.signatures=l}this.message=e}serialize(){const e=this.message.serialize(),l=Array();encodeLength(l,this.signatures.length);const d=Is.struct([Is.blob(l.length,"encodedSignaturesLength"),Is.seq(signature(),this.signatures.length,"signatures"),Is.blob(e.length,"serializedMessage")]),v=new Uint8Array(2048),S=d.encode({encodedSignaturesLength:new Uint8Array(l),signatures:this.signatures,serializedMessage:e},v);return v.slice(0,S)}static deserialize(e){let l=[...e];const d=[],v=decodeLength(l);for(let e=0;e<v;e++)d.push(new Uint8Array(guardedSplice(l,0,64)));const S=Ps.deserialize(new Uint8Array(l));return new VersionedTransaction(S,d)}sign(e){const l=this.message.serialize(),d=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const v of e){const e=d.findIndex((e=>e.equals(v.publicKey)));assert(e>=0,`Cannot sign with non signer key ${v.publicKey.toBase58()}`),this.signatures[e]=sign(l,v.secretKey)}}addSignature(e,l){assert(64===l.byteLength,"Signature must be 64 bytes long");const d=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((l=>l.equals(e)));assert(d>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[d]=l}}const Ws=new PublicKey("SysvarC1ock11111111111111111111111111111111");new PublicKey("SysvarEpochSchedu1e111111111111111111111111"),new PublicKey("Sysvar1nstructions1111111111111111111111111");const Vs=new PublicKey("SysvarRecentB1ockHashes11111111111111111111"),js=new PublicKey("SysvarRent111111111111111111111111111111111");new PublicKey("SysvarRewards111111111111111111111111111111"),new PublicKey("SysvarS1otHashes111111111111111111111111111"),new PublicKey("SysvarS1otHistory11111111111111111111111111");const zs=new PublicKey("SysvarStakeHistory1111111111111111111111111");class SendTransactionError extends Error{constructor({action:e,signature:l,transactionMessage:d,logs:v}){const S=v?`Logs: \n${JSON.stringify(v.slice(-10),null,2)}. `:"",B="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let T;switch(e){case"send":T=`Transaction ${l} resulted in an error. \n${d}. `+S+B;break;case"simulate":T=`Simulation failed. \nMessage: ${d}. \n`+S+B;break;default:T=`Unknown action '${e}'`}super(T),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=l,this.transactionMessage=d,this.transactionLogs=v||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise(((l,d)=>{e.getTransaction(this.signature).then((e=>{if(e&&e.meta&&e.meta.logMessages){const d=e.meta.logMessages;this.transactionLogs=d,l(d)}else d(new Error("Log messages not found"))})).catch(d)}))),await this.transactionLogs}}async function sendAndConfirmTransaction(e,l,d,v){const S=v&&{skipPreflight:v.skipPreflight,preflightCommitment:v.preflightCommitment||v.commitment,maxRetries:v.maxRetries,minContextSlot:v.minContextSlot},B=await e.sendTransaction(l,d,S);let T;if(null!=l.recentBlockhash&&null!=l.lastValidBlockHeight)T=(await e.confirmTransaction({abortSignal:v?.abortSignal,signature:B,blockhash:l.recentBlockhash,lastValidBlockHeight:l.lastValidBlockHeight},v&&v.commitment)).value;else if(null!=l.minNonceContextSlot&&null!=l.nonceInfo){const{nonceInstruction:d}=l.nonceInfo,S=d.keys[0].pubkey;T=(await e.confirmTransaction({abortSignal:v?.abortSignal,minContextSlot:l.minNonceContextSlot,nonceAccountPubkey:S,nonceValue:l.nonceInfo.nonce,signature:B},v&&v.commitment)).value}else null!=v?.abortSignal&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),T=(await e.confirmTransaction(B,v&&v.commitment)).value;if(T.err){if(null!=B)throw new SendTransactionError({action:"send",signature:B,transactionMessage:`Status: (${JSON.stringify(T)})`});throw new Error(`Transaction ${B} failed (${JSON.stringify(T)})`)}return B}function sleep(e){return new Promise((l=>setTimeout(l,e)))}function encodeData(e,l){const d=e.layout.span>=0?e.layout.span:getAlloc(e,l),v=us.Buffer.alloc(d),S=Object.assign({instruction:e.index},l);return e.layout.encode(S,v),v}const Zs=Is.nu64("lamportsPerSignature"),Qs=Is.struct([Is.u32("version"),Is.u32("state"),publicKey("authorizedPubkey"),publicKey("nonce"),Is.struct([Zs],"feeCalculator")]).span,Ks=(Hs=8,e=>{const l=ps.blob(Hs,e),{encode:d,decode:v}=(e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)}))(l),S=l;return S.decode=(e,l)=>{const d=v(e,l);return ys.toBigIntLE(us.Buffer.from(d))},S.encode=(e,l,v)=>{const S=ys.toBufferLE(e,Hs);return d(S,l,v)},S});var Hs;const qs=Object.freeze({Create:{index:0,layout:Is.struct([Is.u32("instruction"),Is.ns64("lamports"),Is.ns64("space"),publicKey("programId")])},Assign:{index:1,layout:Is.struct([Is.u32("instruction"),publicKey("programId")])},Transfer:{index:2,layout:Is.struct([Is.u32("instruction"),Ks("lamports")])},CreateWithSeed:{index:3,layout:Is.struct([Is.u32("instruction"),publicKey("base"),rustString("seed"),Is.ns64("lamports"),Is.ns64("space"),publicKey("programId")])},AdvanceNonceAccount:{index:4,layout:Is.struct([Is.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:Is.struct([Is.u32("instruction"),Is.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:Is.struct([Is.u32("instruction"),publicKey("authorized")])},AuthorizeNonceAccount:{index:7,layout:Is.struct([Is.u32("instruction"),publicKey("authorized")])},Allocate:{index:8,layout:Is.struct([Is.u32("instruction"),Is.ns64("space")])},AllocateWithSeed:{index:9,layout:Is.struct([Is.u32("instruction"),publicKey("base"),rustString("seed"),Is.ns64("space"),publicKey("programId")])},AssignWithSeed:{index:10,layout:Is.struct([Is.u32("instruction"),publicKey("base"),rustString("seed"),publicKey("programId")])},TransferWithSeed:{index:11,layout:Is.struct([Is.u32("instruction"),Ks("lamports"),rustString("seed"),publicKey("programId")])},UpgradeNonceAccount:{index:12,layout:Is.struct([Is.u32("instruction")])}});class SystemProgram{constructor(){}static createAccount(e){const l=encodeData(qs.Create,{lamports:e.lamports,space:e.space,programId:toBuffer(e.programId.toBuffer())});return new TransactionInstruction({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:l})}static transfer(e){let l,d;if("basePubkey"in e){l=encodeData(qs.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:toBuffer(e.programId.toBuffer())}),d=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{l=encodeData(qs.Transfer,{lamports:BigInt(e.lamports)}),d=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new TransactionInstruction({keys:d,programId:this.programId,data:l})}static assign(e){let l,d;if("basePubkey"in e){l=encodeData(qs.AssignWithSeed,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,programId:toBuffer(e.programId.toBuffer())}),d=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{l=encodeData(qs.Assign,{programId:toBuffer(e.programId.toBuffer())}),d=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:d,programId:this.programId,data:l})}static createAccountWithSeed(e){const l=encodeData(qs.CreateWithSeed,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:toBuffer(e.programId.toBuffer())});let d=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||d.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new TransactionInstruction({keys:d,programId:this.programId,data:l})}static createNonceAccount(e){const l=new Transaction;"basePubkey"in e&&"seed"in e?l.add(SystemProgram.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Qs,programId:this.programId})):l.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Qs,programId:this.programId}));const d={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return l.add(this.nonceInitialize(d)),l}static nonceInitialize(e){const l=encodeData(qs.InitializeNonceAccount,{authorized:toBuffer(e.authorizedPubkey.toBuffer())}),d={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Vs,isSigner:!1,isWritable:!1},{pubkey:js,isSigner:!1,isWritable:!1}],programId:this.programId,data:l};return new TransactionInstruction(d)}static nonceAdvance(e){const l=encodeData(qs.AdvanceNonceAccount),d={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Vs,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:l};return new TransactionInstruction(d)}static nonceWithdraw(e){const l=encodeData(qs.WithdrawNonceAccount,{lamports:e.lamports});return new TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Vs,isSigner:!1,isWritable:!1},{pubkey:js,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:l})}static nonceAuthorize(e){const l=encodeData(qs.AuthorizeNonceAccount,{authorized:toBuffer(e.newAuthorizedPubkey.toBuffer())});return new TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:l})}static allocate(e){let l,d;if("basePubkey"in e){l=encodeData(qs.AllocateWithSeed,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:toBuffer(e.programId.toBuffer())}),d=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{l=encodeData(qs.Allocate,{space:e.space}),d=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:d,programId:this.programId,data:l})}}SystemProgram.programId=new PublicKey("11111111111111111111111111111111");class Loader{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Loader.chunkSize)+1+1)}static async load(e,l,d,v,S){{const B=await e.getMinimumBalanceForRentExemption(S.length),T=await e.getAccountInfo(d.publicKey,"confirmed");let k=null;if(null!==T){if(T.executable)return console.error("Program load failed, account is already executable"),!1;T.data.length!==S.length&&(k=k||new Transaction,k.add(SystemProgram.allocate({accountPubkey:d.publicKey,space:S.length}))),T.owner.equals(v)||(k=k||new Transaction,k.add(SystemProgram.assign({accountPubkey:d.publicKey,programId:v}))),T.lamports<B&&(k=k||new Transaction,k.add(SystemProgram.transfer({fromPubkey:l.publicKey,toPubkey:d.publicKey,lamports:B-T.lamports})))}else k=(new Transaction).add(SystemProgram.createAccount({fromPubkey:l.publicKey,newAccountPubkey:d.publicKey,lamports:B>0?B:1,space:S.length,programId:v}));null!==k&&await sendAndConfirmTransaction(e,k,[l,d],{commitment:"confirmed"})}const B=Is.struct([Is.u32("instruction"),Is.u32("offset"),Is.u32("bytesLength"),Is.u32("bytesLengthPadding"),Is.seq(Is.u8("byte"),Is.offset(Is.u32(),-8),"bytes")]),T=Loader.chunkSize;let k=0,x=S,U=[];for(;x.length>0;){const S=x.slice(0,T),O=us.Buffer.alloc(T+16);B.encode({instruction:0,offset:k,bytes:S,bytesLength:0,bytesLengthPadding:0},O);const F=(new Transaction).add({keys:[{pubkey:d.publicKey,isSigner:!0,isWritable:!0}],programId:v,data:O});if(U.push(sendAndConfirmTransaction(e,F,[l,d],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")){const e=4;await sleep(1e3/e)}k+=T,x=x.slice(T)}await Promise.all(U);{const S=Is.struct([Is.u32("instruction")]),B=us.Buffer.alloc(S.span);S.encode({instruction:1},B);const T=(new Transaction).add({keys:[{pubkey:d.publicKey,isSigner:!0,isWritable:!0},{pubkey:js,isSigner:!1,isWritable:!1}],programId:v,data:B}),k="processed",x=await e.sendTransaction(T,[l,d],{preflightCommitment:k}),{context:U,value:O}=await e.confirmTransaction({signature:x,lastValidBlockHeight:T.lastValidBlockHeight,blockhash:T.recentBlockhash},k);if(O.err)throw new Error(`Transaction ${x} failed (${JSON.stringify(O)})`);for(;;){try{if(await e.getSlot({commitment:k})>U.slot)break}catch{}await new Promise((e=>setTimeout(e,Math.round(200))))}}return!0}}Loader.chunkSize=932,new PublicKey("BPFLoader2111111111111111111111111111111111");var Gs={exports:{}},Ys=1e3,Js=60*Ys,$s=60*Js,Xs=24*$s,ea=7*Xs,ta=365.25*Xs;function plural(e,l,d,v){var S=l>=1.5*d;return Math.round(e/d)+" "+v+(S?"s":"")}var ra=Ns.default,ms$1=function(e,l){l=l||{};var d=typeof e;if("string"===d&&e.length>0)return function(e){if((e=String(e)).length>100)return;var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!l)return;var d=parseFloat(l[1]);switch((l[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return d*ta;case"weeks":case"week":case"w":return d*ea;case"days":case"day":case"d":return d*Xs;case"hours":case"hour":case"hrs":case"hr":case"h":return d*$s;case"minutes":case"minute":case"mins":case"min":case"m":return d*Js;case"seconds":case"second":case"secs":case"sec":case"s":return d*Ys;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}(e);if("number"===d&&isFinite(e))return l.long?function(e){var l=Math.abs(e);if(l>=Xs)return plural(e,l,Xs,"day");if(l>=$s)return plural(e,l,$s,"hour");if(l>=Js)return plural(e,l,Js,"minute");if(l>=Ys)return plural(e,l,Ys,"second");return e+" ms"}(e):function(e){var l=Math.abs(e);if(l>=Xs)return Math.round(e/Xs)+"d";if(l>=$s)return Math.round(e/$s)+"h";if(l>=Js)return Math.round(e/Js)+"m";if(l>=Ys)return Math.round(e/Ys)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},na={CURRENT_ID:Symbol("agentkeepalive#currentId"),CREATE_ID:Symbol("agentkeepalive#createId"),INIT_SOCKET:Symbol("agentkeepalive#initSocket"),CREATE_HTTPS_CONNECTION:Symbol("agentkeepalive#createHttpsConnection"),SOCKET_CREATED_TIME:Symbol("agentkeepalive#socketCreatedTime"),SOCKET_NAME:Symbol("agentkeepalive#socketName"),SOCKET_REQUEST_COUNT:Symbol("agentkeepalive#socketRequestCount"),SOCKET_REQUEST_FINISHED_COUNT:Symbol("agentkeepalive#socketRequestFinishedCount")};const oa=_s.default.Agent,ms=function(e){if("number"==typeof e)return e;var l=ms$1(e);if(void 0===l){var d=new Error(ra.format("humanize-ms(%j) result undefined",e));console.warn(d.stack)}return l},ia=Ns.default.debuglog("agentkeepalive"),{INIT_SOCKET:sa,CURRENT_ID:aa,CREATE_ID:ca,SOCKET_CREATED_TIME:ua,SOCKET_NAME:la,SOCKET_REQUEST_COUNT:da,SOCKET_REQUEST_FINISHED_COUNT:ha}=na;let fa=1;const pa=parseInt(z.version.split(".",1)[0].substring(1));function deprecate(e){console.log("[agentkeepalive:deprecated] %s",e)}pa>=11&&pa<=12?fa=2:pa>=13&&(fa=3);function getSocketTimeout(e){return e.timeout||e._idleTimeout}var ma=class extends oa{constructor(e){(e=e||{}).keepAlive=!1!==e.keepAlive,void 0===e.freeSocketTimeout&&(e.freeSocketTimeout=4e3),e.keepAliveTimeout&&(deprecate("options.keepAliveTimeout is deprecated, please use options.freeSocketTimeout instead"),e.freeSocketTimeout=e.keepAliveTimeout,delete e.keepAliveTimeout),e.freeSocketKeepAliveTimeout&&(deprecate("options.freeSocketKeepAliveTimeout is deprecated, please use options.freeSocketTimeout instead"),e.freeSocketTimeout=e.freeSocketKeepAliveTimeout,delete e.freeSocketKeepAliveTimeout),void 0===e.timeout&&(e.timeout=Math.max(2*e.freeSocketTimeout,8e3)),e.timeout=ms(e.timeout),e.freeSocketTimeout=ms(e.freeSocketTimeout),e.socketActiveTTL=e.socketActiveTTL?ms(e.socketActiveTTL):0,super(e),this[aa]=0,this.createSocketCount=0,this.createSocketCountLastCheck=0,this.createSocketErrorCount=0,this.createSocketErrorCountLastCheck=0,this.closeSocketCount=0,this.closeSocketCountLastCheck=0,this.errorSocketCount=0,this.errorSocketCountLastCheck=0,this.requestCount=0,this.requestCountLastCheck=0,this.timeoutSocketCount=0,this.timeoutSocketCountLastCheck=0,this.on("free",(e=>{const l=this.calcSocketTimeout(e);l>0&&e.timeout!==l&&e.setTimeout(l)}))}get freeSocketKeepAliveTimeout(){return deprecate("agent.freeSocketKeepAliveTimeout is deprecated, please use agent.options.freeSocketTimeout instead"),this.options.freeSocketTimeout}get timeout(){return deprecate("agent.timeout is deprecated, please use agent.options.timeout instead"),this.options.timeout}get socketActiveTTL(){return deprecate("agent.socketActiveTTL is deprecated, please use agent.options.socketActiveTTL instead"),this.options.socketActiveTTL}calcSocketTimeout(e){let l=this.options.freeSocketTimeout;const d=this.options.socketActiveTTL;if(d){const v=d-(Date.now()-e[ua]);if(v<=0)return v;l&&v<l&&(l=v)}if(l){return e.freeSocketTimeout||e.freeSocketKeepAliveTimeout||l}}keepSocketAlive(e){const l=super.keepSocketAlive(e);if(!l)return l;const d=this.calcSocketTimeout(e);return void 0===d||(d<=0?(ia("%s(requests: %s, finished: %s) free but need to destroy by TTL, request count %s, diff is %s",e[la],e[da],e[ha],d),!1):(e.timeout!==d&&e.setTimeout(d),!0))}reuseSocket(...e){super.reuseSocket(...e);const l=e[0];e[1].reusedSocket=!0;const d=this.options.timeout;getSocketTimeout(l)!==d&&(l.setTimeout(d),ia("%s reset timeout to %sms",l[la],d)),l[da]++,ia("%s(requests: %s, finished: %s) reuse on addRequest, timeout %sms",l[la],l[da],l[ha],getSocketTimeout(l))}[ca](){const e=this[aa]++;return this[aa]===Number.MAX_SAFE_INTEGER&&(this[aa]=0),e}[sa](e,l){if(l.timeout){getSocketTimeout(e)||e.setTimeout(l.timeout)}this.options.keepAlive&&e.setNoDelay(!0),this.createSocketCount++,this.options.socketActiveTTL&&(e[ua]=Date.now()),e[la]=`sock[${this[ca]()}#${l._agentKey}]`.split("-----BEGIN",1)[0],e[da]=1,e[ha]=0,function(e,l,d){function onFree(){if(!l._httpMessage&&1===l[da])return;l[ha]++,e.requestCount++,ia("%s(requests: %s, finished: %s) free",l[la],l[da],l[ha]);const v=e.getName(d);l.writable&&e.requests[v]&&e.requests[v].length&&(l[da]++,ia("%s(requests: %s, finished: %s) will be reuse on agent free event",l[la],l[da],l[ha]))}function onClose(d){ia("%s(requests: %s, finished: %s) close, isError: %s",l[la],l[da],l[ha],d),e.closeSocketCount++}function onTimeout(){const v=l.listeners("timeout").length,S=getSocketTimeout(l),B=l._httpMessage,T=B&&B.listeners("timeout").length||0;ia("%s(requests: %s, finished: %s) timeout after %sms, listeners %s, defaultTimeoutListenerCount %s, hasHttpRequest %s, HttpRequest timeoutListenerCount %s",l[la],l[da],l[ha],S,v,fa,!!B,T),ia.enabled&&ia("timeout listeners: %s",l.listeners("timeout").map((e=>e.name)).join(", ")),e.timeoutSocketCount++;const k=e.getName(d);if(e.freeSockets[k]&&-1!==e.freeSockets[k].indexOf(l))l.destroy(),e.removeSocket(l,d),ia("%s is free, destroy quietly",l[la]);else if(0===T){const v=new Error("Socket timeout");v.code="ERR_SOCKET_TIMEOUT",v.timeout=S,l.destroy(v),e.removeSocket(l,d),ia("%s destroy with timeout error",l[la])}}function onError(d){const v=l.listeners("error").length;ia("%s(requests: %s, finished: %s) error: %s, listenerCount: %s",l[la],l[da],l[ha],d,v),e.errorSocketCount++,1===v&&(ia("%s emit uncaught error event",l[la]),l.removeListener("error",onError),l.emit("error",d))}function onRemove(){ia("%s(requests: %s, finished: %s) agentRemove",l[la],l[da],l[ha]),l.removeListener("close",onClose),l.removeListener("error",onError),l.removeListener("free",onFree),l.removeListener("timeout",onTimeout),l.removeListener("agentRemove",onRemove)}ia("%s create, timeout %sms",l[la],getSocketTimeout(l)),l.on("free",onFree),l.on("close",onClose),l.on("timeout",onTimeout),l.on("error",onError),l.on("agentRemove",onRemove)}(this,e,l)}createConnection(e,l){let d=!1;const onNewCreate=(v,S)=>{if(!d){if(d=!0,v)return this.createSocketErrorCount++,l(v);this[sa](S,e),l(v,S)}},v=super.createConnection(e,onNewCreate);return v&&onNewCreate(null,v),v}get statusChanged(){const e=this.createSocketCount!==this.createSocketCountLastCheck||this.createSocketErrorCount!==this.createSocketErrorCountLastCheck||this.closeSocketCount!==this.closeSocketCountLastCheck||this.errorSocketCount!==this.errorSocketCountLastCheck||this.timeoutSocketCount!==this.timeoutSocketCountLastCheck||this.requestCount!==this.requestCountLastCheck;return e&&(this.createSocketCountLastCheck=this.createSocketCount,this.createSocketErrorCountLastCheck=this.createSocketErrorCount,this.closeSocketCountLastCheck=this.closeSocketCount,this.errorSocketCountLastCheck=this.errorSocketCount,this.timeoutSocketCountLastCheck=this.timeoutSocketCount,this.requestCountLastCheck=this.requestCount),e}getCurrentStatus(){return{createSocketCount:this.createSocketCount,createSocketErrorCount:this.createSocketErrorCount,closeSocketCount:this.closeSocketCount,errorSocketCount:this.errorSocketCount,timeoutSocketCount:this.timeoutSocketCount,requestCount:this.requestCount,freeSockets:inspect(this.freeSockets),sockets:inspect(this.sockets),requests:inspect(this.requests)}}};function inspect(e){const l={};for(const d in e)l[d]=e[d].length;return l}const ya=Ms.default.Agent,ga=ma,{INIT_SOCKET:ba,CREATE_HTTPS_CONNECTION:wa}=na;let Ea=class extends ga{constructor(e){super(e),this.defaultPort=443,this.protocol="https:",this.maxCachedSessions=this.options.maxCachedSessions,void 0===this.maxCachedSessions&&(this.maxCachedSessions=100),this._sessionCache={map:{},list:[]}}createConnection(e,l){const d=this[wa](e,l);return this[ba](d,e),d}};Ea.prototype[wa]=ya.prototype.createConnection,["getName","_getSession","_cacheSession","_evictSession"].forEach((function(e){"function"==typeof ya.prototype[e]&&(Ea.prototype[e]=ya.prototype[e])}));var va=Ea;Gs.exports=ma,Gs.exports.HttpsAgent=va,Gs.exports.constants=na;vs.CommonClient;Is.struct([Is.u32("typeIndex"),Ks("deactivationSlot"),Is.nu64("lastExtendedSlot"),Is.u8("lastExtendedStartIndex"),Is.u8(),Is.seq(publicKey(),Is.offset(Is.u8(),-1),"authority")]);const Sa=Es.coerce(Es.instance(PublicKey),Es.string(),(e=>new PublicKey(e))),Ba=Es.tuple([Es.string(),Es.literal("base64")]),Ta=Es.coerce(Es.instance(us.Buffer),Ba,(e=>us.Buffer.from(e[0],"base64")));function createRpcResult(e){return Es.union([Es.type({jsonrpc:Es.literal("2.0"),id:Es.string(),result:e}),Es.type({jsonrpc:Es.literal("2.0"),id:Es.string(),error:Es.type({code:Es.unknown(),message:Es.string(),data:Es.optional(Es.any())})})])}const ka=createRpcResult(Es.unknown());function jsonRpcResult(e){return Es.coerce(createRpcResult(e),ka,(l=>"error"in l?l:{...l,result:Es.create(l.result,e)}))}function jsonRpcResultAndContext(e){return jsonRpcResult(Es.type({context:Es.type({slot:Es.number()}),value:e}))}function notificationResultAndContext(e){return Es.type({context:Es.type({slot:Es.number()}),value:e})}const Ia=Es.type({foundation:Es.number(),foundationTerm:Es.number(),initial:Es.number(),taper:Es.number(),terminal:Es.number()});jsonRpcResult(Es.array(Es.nullable(Es.type({epoch:Es.number(),effectiveSlot:Es.number(),amount:Es.number(),postBalance:Es.number(),commission:Es.optional(Es.nullable(Es.number()))}))));const Na=Es.array(Es.type({slot:Es.number(),prioritizationFee:Es.number()})),_a=Es.type({total:Es.number(),validator:Es.number(),foundation:Es.number(),epoch:Es.number()}),Ma=Es.type({epoch:Es.number(),slotIndex:Es.number(),slotsInEpoch:Es.number(),absoluteSlot:Es.number(),blockHeight:Es.optional(Es.number()),transactionCount:Es.optional(Es.number())}),Ra=Es.type({slotsPerEpoch:Es.number(),leaderScheduleSlotOffset:Es.number(),warmup:Es.boolean(),firstNormalEpoch:Es.number(),firstNormalSlot:Es.number()}),xa=Es.record(Es.string(),Es.array(Es.number())),Ua=Es.nullable(Es.union([Es.type({}),Es.string()])),Aa=Es.type({err:Ua}),Oa=Es.literal("receivedSignature");Es.type({"solana-core":Es.string(),"feature-set":Es.optional(Es.number())});const Ca=Es.type({program:Es.string(),programId:Sa,parsed:Es.unknown()}),Fa=Es.type({programId:Sa,accounts:Es.array(Sa),data:Es.string()});jsonRpcResultAndContext(Es.type({err:Es.nullable(Es.union([Es.type({}),Es.string()])),logs:Es.nullable(Es.array(Es.string())),accounts:Es.optional(Es.nullable(Es.array(Es.nullable(Es.type({executable:Es.boolean(),owner:Es.string(),lamports:Es.number(),data:Es.array(Es.string()),rentEpoch:Es.optional(Es.number())}))))),unitsConsumed:Es.optional(Es.number()),returnData:Es.optional(Es.nullable(Es.type({programId:Es.string(),data:Es.tuple([Es.string(),Es.literal("base64")])}))),innerInstructions:Es.optional(Es.nullable(Es.array(Es.type({index:Es.number(),instructions:Es.array(Es.union([Ca,Fa]))}))))})),jsonRpcResultAndContext(Es.type({byIdentity:Es.record(Es.string(),Es.array(Es.number())),range:Es.type({firstSlot:Es.number(),lastSlot:Es.number()})})),jsonRpcResult(Ia),jsonRpcResult(_a),jsonRpcResult(Na),jsonRpcResult(Ma),jsonRpcResult(Ra),jsonRpcResult(xa),jsonRpcResult(Es.number()),jsonRpcResultAndContext(Es.type({total:Es.number(),circulating:Es.number(),nonCirculating:Es.number(),nonCirculatingAccounts:Es.array(Sa)}));const La=Es.type({amount:Es.string(),uiAmount:Es.nullable(Es.number()),decimals:Es.number(),uiAmountString:Es.optional(Es.string())});jsonRpcResultAndContext(Es.array(Es.type({address:Sa,amount:Es.string(),uiAmount:Es.nullable(Es.number()),decimals:Es.number(),uiAmountString:Es.optional(Es.string())}))),jsonRpcResultAndContext(Es.array(Es.type({pubkey:Sa,account:Es.type({executable:Es.boolean(),owner:Sa,lamports:Es.number(),data:Ta,rentEpoch:Es.number()})})));const Pa=Es.type({program:Es.string(),parsed:Es.unknown(),space:Es.number()});jsonRpcResultAndContext(Es.array(Es.type({pubkey:Sa,account:Es.type({executable:Es.boolean(),owner:Sa,lamports:Es.number(),data:Pa,rentEpoch:Es.number()})}))),jsonRpcResultAndContext(Es.array(Es.type({lamports:Es.number(),address:Sa})));const Da=Es.type({executable:Es.boolean(),owner:Sa,lamports:Es.number(),data:Ta,rentEpoch:Es.number()});Es.type({pubkey:Sa,account:Da});const Wa=Es.coerce(Es.union([Es.instance(us.Buffer),Pa]),Es.union([Ba,Pa]),(e=>Array.isArray(e)?Es.create(e,Ta):e)),Va=Es.type({executable:Es.boolean(),owner:Sa,lamports:Es.number(),data:Wa,rentEpoch:Es.number()});Es.type({pubkey:Sa,account:Va}),Es.type({state:Es.union([Es.literal("active"),Es.literal("inactive"),Es.literal("activating"),Es.literal("deactivating")]),active:Es.number(),inactive:Es.number()}),jsonRpcResult(Es.array(Es.type({signature:Es.string(),slot:Es.number(),err:Ua,memo:Es.nullable(Es.string()),blockTime:Es.optional(Es.nullable(Es.number()))}))),jsonRpcResult(Es.array(Es.type({signature:Es.string(),slot:Es.number(),err:Ua,memo:Es.nullable(Es.string()),blockTime:Es.optional(Es.nullable(Es.number()))}))),Es.type({subscription:Es.number(),result:notificationResultAndContext(Da)});const ja=Es.type({pubkey:Sa,account:Da});Es.type({subscription:Es.number(),result:notificationResultAndContext(ja)});const za=Es.type({parent:Es.number(),slot:Es.number(),root:Es.number()});Es.type({subscription:Es.number(),result:za});const Za=Es.union([Es.type({type:Es.union([Es.literal("firstShredReceived"),Es.literal("completed"),Es.literal("optimisticConfirmation"),Es.literal("root")]),slot:Es.number(),timestamp:Es.number()}),Es.type({type:Es.literal("createdBank"),parent:Es.number(),slot:Es.number(),timestamp:Es.number()}),Es.type({type:Es.literal("frozen"),slot:Es.number(),timestamp:Es.number(),stats:Es.type({numTransactionEntries:Es.number(),numSuccessfulTransactions:Es.number(),numFailedTransactions:Es.number(),maxTransactionsPerEntry:Es.number()})}),Es.type({type:Es.literal("dead"),slot:Es.number(),timestamp:Es.number(),err:Es.string()})]);Es.type({subscription:Es.number(),result:Za}),Es.type({subscription:Es.number(),result:notificationResultAndContext(Es.union([Aa,Oa]))}),Es.type({subscription:Es.number(),result:Es.number()}),Es.type({pubkey:Es.string(),gossip:Es.nullable(Es.string()),tpu:Es.nullable(Es.string()),rpc:Es.nullable(Es.string()),version:Es.nullable(Es.string())});const Qa=Es.type({votePubkey:Es.string(),nodePubkey:Es.string(),activatedStake:Es.number(),epochVoteAccount:Es.boolean(),epochCredits:Es.array(Es.tuple([Es.number(),Es.number(),Es.number()])),commission:Es.number(),lastVote:Es.number(),rootSlot:Es.nullable(Es.number())});jsonRpcResult(Es.type({current:Es.array(Qa),delinquent:Es.array(Qa)}));const Ka=Es.union([Es.literal("processed"),Es.literal("confirmed"),Es.literal("finalized")]),Ha=Es.type({slot:Es.number(),confirmations:Es.nullable(Es.number()),err:Ua,confirmationStatus:Es.optional(Ka)});jsonRpcResultAndContext(Es.array(Es.nullable(Ha))),jsonRpcResult(Es.number());const qa=Es.type({accountKey:Sa,writableIndexes:Es.array(Es.number()),readonlyIndexes:Es.array(Es.number())}),Ga=Es.type({signatures:Es.array(Es.string()),message:Es.type({accountKeys:Es.array(Es.string()),header:Es.type({numRequiredSignatures:Es.number(),numReadonlySignedAccounts:Es.number(),numReadonlyUnsignedAccounts:Es.number()}),instructions:Es.array(Es.type({accounts:Es.array(Es.number()),data:Es.string(),programIdIndex:Es.number()})),recentBlockhash:Es.string(),addressTableLookups:Es.optional(Es.array(qa))})}),Ya=Es.type({pubkey:Sa,signer:Es.boolean(),writable:Es.boolean(),source:Es.optional(Es.union([Es.literal("transaction"),Es.literal("lookupTable")]))}),Ja=Es.type({accountKeys:Es.array(Ya),signatures:Es.array(Es.string())}),$a=Es.type({parsed:Es.unknown(),program:Es.string(),programId:Sa}),Xa=Es.type({accounts:Es.array(Sa),data:Es.string(),programId:Sa}),ec=Es.union([Xa,$a]),tc=Es.union([Es.type({parsed:Es.unknown(),program:Es.string(),programId:Es.string()}),Es.type({accounts:Es.array(Es.string()),data:Es.string(),programId:Es.string()})]),rc=Es.coerce(ec,tc,(e=>"accounts"in e?Es.create(e,Xa):Es.create(e,$a))),nc=Es.type({signatures:Es.array(Es.string()),message:Es.type({accountKeys:Es.array(Ya),instructions:Es.array(rc),recentBlockhash:Es.string(),addressTableLookups:Es.optional(Es.nullable(Es.array(qa)))})}),oc=Es.type({accountIndex:Es.number(),mint:Es.string(),owner:Es.optional(Es.string()),uiTokenAmount:La}),ic=Es.type({writable:Es.array(Sa),readonly:Es.array(Sa)}),sc=Es.type({err:Ua,fee:Es.number(),innerInstructions:Es.optional(Es.nullable(Es.array(Es.type({index:Es.number(),instructions:Es.array(Es.type({accounts:Es.array(Es.number()),data:Es.string(),programIdIndex:Es.number()}))})))),preBalances:Es.array(Es.number()),postBalances:Es.array(Es.number()),logMessages:Es.optional(Es.nullable(Es.array(Es.string()))),preTokenBalances:Es.optional(Es.nullable(Es.array(oc))),postTokenBalances:Es.optional(Es.nullable(Es.array(oc))),loadedAddresses:Es.optional(ic),computeUnitsConsumed:Es.optional(Es.number())}),ac=Es.type({err:Ua,fee:Es.number(),innerInstructions:Es.optional(Es.nullable(Es.array(Es.type({index:Es.number(),instructions:Es.array(rc)})))),preBalances:Es.array(Es.number()),postBalances:Es.array(Es.number()),logMessages:Es.optional(Es.nullable(Es.array(Es.string()))),preTokenBalances:Es.optional(Es.nullable(Es.array(oc))),postTokenBalances:Es.optional(Es.nullable(Es.array(oc))),loadedAddresses:Es.optional(ic),computeUnitsConsumed:Es.optional(Es.number())}),cc=Es.union([Es.literal(0),Es.literal("legacy")]),uc=Es.type({pubkey:Es.string(),lamports:Es.number(),postBalance:Es.nullable(Es.number()),rewardType:Es.nullable(Es.string()),commission:Es.optional(Es.nullable(Es.number()))});jsonRpcResult(Es.nullable(Es.type({blockhash:Es.string(),previousBlockhash:Es.string(),parentSlot:Es.number(),transactions:Es.array(Es.type({transaction:Ga,meta:Es.nullable(sc),version:Es.optional(cc)})),rewards:Es.optional(Es.array(uc)),blockTime:Es.nullable(Es.number()),blockHeight:Es.nullable(Es.number())}))),jsonRpcResult(Es.nullable(Es.type({blockhash:Es.string(),previousBlockhash:Es.string(),parentSlot:Es.number(),rewards:Es.optional(Es.array(uc)),blockTime:Es.nullable(Es.number()),blockHeight:Es.nullable(Es.number())}))),jsonRpcResult(Es.nullable(Es.type({blockhash:Es.string(),previousBlockhash:Es.string(),parentSlot:Es.number(),transactions:Es.array(Es.type({transaction:Ja,meta:Es.nullable(sc),version:Es.optional(cc)})),rewards:Es.optional(Es.array(uc)),blockTime:Es.nullable(Es.number()),blockHeight:Es.nullable(Es.number())}))),jsonRpcResult(Es.nullable(Es.type({blockhash:Es.string(),previousBlockhash:Es.string(),parentSlot:Es.number(),transactions:Es.array(Es.type({transaction:nc,meta:Es.nullable(ac),version:Es.optional(cc)})),rewards:Es.optional(Es.array(uc)),blockTime:Es.nullable(Es.number()),blockHeight:Es.nullable(Es.number())}))),jsonRpcResult(Es.nullable(Es.type({blockhash:Es.string(),previousBlockhash:Es.string(),parentSlot:Es.number(),transactions:Es.array(Es.type({transaction:Ja,meta:Es.nullable(ac),version:Es.optional(cc)})),rewards:Es.optional(Es.array(uc)),blockTime:Es.nullable(Es.number()),blockHeight:Es.nullable(Es.number())}))),jsonRpcResult(Es.nullable(Es.type({blockhash:Es.string(),previousBlockhash:Es.string(),parentSlot:Es.number(),rewards:Es.optional(Es.array(uc)),blockTime:Es.nullable(Es.number()),blockHeight:Es.nullable(Es.number())}))),jsonRpcResult(Es.nullable(Es.type({blockhash:Es.string(),previousBlockhash:Es.string(),parentSlot:Es.number(),transactions:Es.array(Es.type({transaction:Ga,meta:Es.nullable(sc)})),rewards:Es.optional(Es.array(uc)),blockTime:Es.nullable(Es.number())}))),jsonRpcResult(Es.nullable(Es.type({blockhash:Es.string(),previousBlockhash:Es.string(),parentSlot:Es.number(),signatures:Es.array(Es.string()),blockTime:Es.nullable(Es.number())}))),jsonRpcResult(Es.nullable(Es.type({slot:Es.number(),meta:Es.nullable(sc),blockTime:Es.optional(Es.nullable(Es.number())),transaction:Ga,version:Es.optional(cc)}))),jsonRpcResult(Es.nullable(Es.type({slot:Es.number(),transaction:nc,meta:Es.nullable(ac),blockTime:Es.optional(Es.nullable(Es.number())),version:Es.optional(cc)}))),jsonRpcResultAndContext(Es.type({blockhash:Es.string(),feeCalculator:Es.type({lamportsPerSignature:Es.number()})})),jsonRpcResultAndContext(Es.type({blockhash:Es.string(),lastValidBlockHeight:Es.number()})),jsonRpcResultAndContext(Es.boolean());const lc=Es.type({slot:Es.number(),numTransactions:Es.number(),numSlots:Es.number(),samplePeriodSecs:Es.number()});jsonRpcResult(Es.array(lc)),jsonRpcResultAndContext(Es.nullable(Es.type({feeCalculator:Es.type({lamportsPerSignature:Es.number()})}))),jsonRpcResult(Es.string()),jsonRpcResult(Es.string());const dc=Es.type({err:Ua,logs:Es.array(Es.string()),signature:Es.string()});Es.type({result:notificationResultAndContext(dc),subscription:Es.number()});class Keypair{constructor(e){this._keypair=void 0,this._keypair=e??generateKeypair()}static generate(){return new Keypair(generateKeypair())}static fromSecretKey(e,l){if(64!==e.byteLength)throw new Error("bad secret key size");const d=e.slice(32,64);if(!l||!l.skipValidation){const l=e.slice(0,32),v=Rs(l);for(let e=0;e<32;e++)if(d[e]!==v[e])throw new Error("provided secretKey is invalid")}return new Keypair({publicKey:d,secretKey:e})}static fromSeed(e){const l=Rs(e),d=new Uint8Array(64);return d.set(e),d.set(l,32),new Keypair({publicKey:l,secretKey:d})}get publicKey(){return new PublicKey(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:Is.struct([Is.u32("instruction"),Ks("recentSlot"),Is.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:Is.struct([Is.u32("instruction")])},ExtendLookupTable:{index:2,layout:Is.struct([Is.u32("instruction"),Ks(),Is.seq(publicKey(),Is.offset(Is.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Is.struct([Is.u32("instruction")])},CloseLookupTable:{index:4,layout:Is.struct([Is.u32("instruction")])}});new PublicKey("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Is.struct([Is.u8("instruction"),Is.u32("units"),Is.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:Is.struct([Is.u8("instruction"),Is.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:Is.struct([Is.u8("instruction"),Is.u32("units")])},SetComputeUnitPrice:{index:3,layout:Is.struct([Is.u8("instruction"),Ks("microLamports")])}});new PublicKey("ComputeBudget111111111111111111111111111111");const hc=Is.struct([Is.u8("numSignatures"),Is.u8("padding"),Is.u16("signatureOffset"),Is.u16("signatureInstructionIndex"),Is.u16("publicKeyOffset"),Is.u16("publicKeyInstructionIndex"),Is.u16("messageDataOffset"),Is.u16("messageDataSize"),Is.u16("messageInstructionIndex")]);class Ed25519Program{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:l,message:d,signature:v,instructionIndex:S}=e;assert(32===l.length,`Public Key must be 32 bytes but received ${l.length} bytes`),assert(64===v.length,`Signature must be 64 bytes but received ${v.length} bytes`);const B=hc.span,T=B+l.length,k=T+v.length,x=us.Buffer.alloc(k+d.length),U=null==S?65535:S;return hc.encode({numSignatures:1,padding:0,signatureOffset:T,signatureInstructionIndex:U,publicKeyOffset:B,publicKeyInstructionIndex:U,messageDataOffset:k,messageDataSize:d.length,messageInstructionIndex:U},x),x.fill(l,B),x.fill(v,T),x.fill(d,k),new TransactionInstruction({keys:[],programId:Ed25519Program.programId,data:x})}static createInstructionWithPrivateKey(e){const{privateKey:l,message:d,instructionIndex:v}=e;assert(64===l.length,`Private key must be 64 bytes but received ${l.length} bytes`);try{const e=Keypair.fromSecretKey(l),S=e.publicKey.toBytes(),B=sign(d,e.secretKey);return this.createInstructionWithPublicKey({publicKey:S,message:d,signature:B,instructionIndex:v})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}Ed25519Program.programId=new PublicKey("Ed25519SigVerify111111111111111111111111111");Bs.secp256k1.utils.isValidPrivateKey;const fc=Bs.secp256k1.getPublicKey,pc=Is.struct([Is.u8("numSignatures"),Is.u16("signatureOffset"),Is.u8("signatureInstructionIndex"),Is.u16("ethAddressOffset"),Is.u8("ethAddressInstructionIndex"),Is.u16("messageDataOffset"),Is.u16("messageDataSize"),Is.u8("messageInstructionIndex"),Is.blob(20,"ethAddress"),Is.blob(64,"signature"),Is.u8("recoveryId")]);class Secp256k1Program{constructor(){}static publicKeyToEthAddress(e){assert(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return us.Buffer.from(Ss.keccak_256(toBuffer(e))).slice(-20)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){const{publicKey:l,message:d,signature:v,recoveryId:S,instructionIndex:B}=e;return Secp256k1Program.createInstructionWithEthAddress({ethAddress:Secp256k1Program.publicKeyToEthAddress(l),message:d,signature:v,recoveryId:S,instructionIndex:B})}static createInstructionWithEthAddress(e){const{ethAddress:l,message:d,signature:v,recoveryId:S,instructionIndex:B=0}=e;let T;T="string"==typeof l?l.startsWith("0x")?us.Buffer.from(l.substr(2),"hex"):us.Buffer.from(l,"hex"):l,assert(20===T.length,`Address must be 20 bytes but received ${T.length} bytes`);const k=12+T.length,x=k+v.length+1,U=us.Buffer.alloc(pc.span+d.length);return pc.encode({numSignatures:1,signatureOffset:k,signatureInstructionIndex:B,ethAddressOffset:12,ethAddressInstructionIndex:B,messageDataOffset:x,messageDataSize:d.length,messageInstructionIndex:B,signature:toBuffer(v),ethAddress:toBuffer(T),recoveryId:S},U),U.fill(toBuffer(d),pc.span),new TransactionInstruction({keys:[],programId:Secp256k1Program.programId,data:U})}static createInstructionWithPrivateKey(e){const{privateKey:l,message:d,instructionIndex:v}=e;assert(32===l.length,`Private key must be 32 bytes but received ${l.length} bytes`);try{const e=toBuffer(l),S=fc(e,!1).slice(1),B=us.Buffer.from(Ss.keccak_256(toBuffer(d))),[T,k]=((e,l)=>{const d=Bs.secp256k1.sign(e,l);return[d.toCompactRawBytes(),d.recovery]})(B,e);return this.createInstructionWithPublicKey({publicKey:S,message:d,signature:T,recoveryId:k,instructionIndex:v})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}var mc;Secp256k1Program.programId=new PublicKey("KeccakSecp256k11111111111111111111111111111");const yc=new PublicKey("StakeConfig11111111111111111111111111111111");class Lockup{constructor(e,l,d){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=l,this.custodian=d}}mc=Lockup,Lockup.default=new mc(0,0,PublicKey.default);const gc=Object.freeze({Initialize:{index:0,layout:Is.struct([Is.u32("instruction"),((e="authorized")=>Is.struct([publicKey("staker"),publicKey("withdrawer")],e))(),((e="lockup")=>Is.struct([Is.ns64("unixTimestamp"),Is.ns64("epoch"),publicKey("custodian")],e))()])},Authorize:{index:1,layout:Is.struct([Is.u32("instruction"),publicKey("newAuthorized"),Is.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:Is.struct([Is.u32("instruction")])},Split:{index:3,layout:Is.struct([Is.u32("instruction"),Is.ns64("lamports")])},Withdraw:{index:4,layout:Is.struct([Is.u32("instruction"),Is.ns64("lamports")])},Deactivate:{index:5,layout:Is.struct([Is.u32("instruction")])},Merge:{index:7,layout:Is.struct([Is.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:Is.struct([Is.u32("instruction"),publicKey("newAuthorized"),Is.u32("stakeAuthorizationType"),rustString("authoritySeed"),publicKey("authorityOwner")])}});class StakeProgram{constructor(){}static initialize(e){const{stakePubkey:l,authorized:d,lockup:v}=e,S=v||Lockup.default,B=encodeData(gc.Initialize,{authorized:{staker:toBuffer(d.staker.toBuffer()),withdrawer:toBuffer(d.withdrawer.toBuffer())},lockup:{unixTimestamp:S.unixTimestamp,epoch:S.epoch,custodian:toBuffer(S.custodian.toBuffer())}}),T={keys:[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:js,isSigner:!1,isWritable:!1}],programId:this.programId,data:B};return new TransactionInstruction(T)}static createAccountWithSeed(e){const l=new Transaction;l.add(SystemProgram.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:d,authorized:v,lockup:S}=e;return l.add(this.initialize({stakePubkey:d,authorized:v,lockup:S}))}static createAccount(e){const l=new Transaction;l.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:d,authorized:v,lockup:S}=e;return l.add(this.initialize({stakePubkey:d,authorized:v,lockup:S}))}static delegate(e){const{stakePubkey:l,authorizedPubkey:d,votePubkey:v}=e,S=encodeData(gc.Delegate);return(new Transaction).add({keys:[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:Ws,isSigner:!1,isWritable:!1},{pubkey:zs,isSigner:!1,isWritable:!1},{pubkey:yc,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!1}],programId:this.programId,data:S})}static authorize(e){const{stakePubkey:l,authorizedPubkey:d,newAuthorizedPubkey:v,stakeAuthorizationType:S,custodianPubkey:B}=e,T=encodeData(gc.Authorize,{newAuthorized:toBuffer(v.toBuffer()),stakeAuthorizationType:S.index}),k=[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:Ws,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!1}];return B&&k.push({pubkey:B,isSigner:!0,isWritable:!1}),(new Transaction).add({keys:k,programId:this.programId,data:T})}static authorizeWithSeed(e){const{stakePubkey:l,authorityBase:d,authoritySeed:v,authorityOwner:S,newAuthorizedPubkey:B,stakeAuthorizationType:T,custodianPubkey:k}=e,x=encodeData(gc.AuthorizeWithSeed,{newAuthorized:toBuffer(B.toBuffer()),stakeAuthorizationType:T.index,authoritySeed:v,authorityOwner:toBuffer(S.toBuffer())}),U=[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!1},{pubkey:Ws,isSigner:!1,isWritable:!1}];return k&&U.push({pubkey:k,isSigner:!0,isWritable:!1}),(new Transaction).add({keys:U,programId:this.programId,data:x})}static splitInstruction(e){const{stakePubkey:l,authorizedPubkey:d,splitStakePubkey:v,lamports:S}=e,B=encodeData(gc.Split,{lamports:S});return new TransactionInstruction({keys:[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!1}],programId:this.programId,data:B})}static split(e,l){const d=new Transaction;return d.add(SystemProgram.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:l,space:this.space,programId:this.programId})),d.add(this.splitInstruction(e))}static splitWithSeed(e,l){const{stakePubkey:d,authorizedPubkey:v,splitStakePubkey:S,basePubkey:B,seed:T,lamports:k}=e,x=new Transaction;return x.add(SystemProgram.allocate({accountPubkey:S,basePubkey:B,seed:T,space:this.space,programId:this.programId})),l&&l>0&&x.add(SystemProgram.transfer({fromPubkey:e.authorizedPubkey,toPubkey:S,lamports:l})),x.add(this.splitInstruction({stakePubkey:d,authorizedPubkey:v,splitStakePubkey:S,lamports:k}))}static merge(e){const{stakePubkey:l,sourceStakePubKey:d,authorizedPubkey:v}=e,S=encodeData(gc.Merge);return(new Transaction).add({keys:[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:Ws,isSigner:!1,isWritable:!1},{pubkey:zs,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!0,isWritable:!1}],programId:this.programId,data:S})}static withdraw(e){const{stakePubkey:l,authorizedPubkey:d,toPubkey:v,lamports:S,custodianPubkey:B}=e,T=encodeData(gc.Withdraw,{lamports:S}),k=[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:Ws,isSigner:!1,isWritable:!1},{pubkey:zs,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!1}];return B&&k.push({pubkey:B,isSigner:!0,isWritable:!1}),(new Transaction).add({keys:k,programId:this.programId,data:T})}static deactivate(e){const{stakePubkey:l,authorizedPubkey:d}=e,v=encodeData(gc.Deactivate);return(new Transaction).add({keys:[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:Ws,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!1}],programId:this.programId,data:v})}}StakeProgram.programId=new PublicKey("Stake11111111111111111111111111111111111111"),StakeProgram.space=200;const bc=Object.freeze({InitializeAccount:{index:0,layout:Is.struct([Is.u32("instruction"),((e="voteInit")=>Is.struct([publicKey("nodePubkey"),publicKey("authorizedVoter"),publicKey("authorizedWithdrawer"),Is.u8("commission")],e))()])},Authorize:{index:1,layout:Is.struct([Is.u32("instruction"),publicKey("newAuthorized"),Is.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:Is.struct([Is.u32("instruction"),Is.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:Is.struct([Is.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:Is.struct([Is.u32("instruction"),((e="voteAuthorizeWithSeedArgs")=>Is.struct([Is.u32("voteAuthorizationType"),publicKey("currentAuthorityDerivedKeyOwnerPubkey"),rustString("currentAuthorityDerivedKeySeed"),publicKey("newAuthorized")],e))()])}});class VoteProgram{constructor(){}static initializeAccount(e){const{votePubkey:l,nodePubkey:d,voteInit:v}=e,S=encodeData(bc.InitializeAccount,{voteInit:{nodePubkey:toBuffer(v.nodePubkey.toBuffer()),authorizedVoter:toBuffer(v.authorizedVoter.toBuffer()),authorizedWithdrawer:toBuffer(v.authorizedWithdrawer.toBuffer()),commission:v.commission}}),B={keys:[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:js,isSigner:!1,isWritable:!1},{pubkey:Ws,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!1}],programId:this.programId,data:S};return new TransactionInstruction(B)}static createAccount(e){const l=new Transaction;return l.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),l.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:l,authorizedPubkey:d,newAuthorizedPubkey:v,voteAuthorizationType:S}=e,B=encodeData(bc.Authorize,{newAuthorized:toBuffer(v.toBuffer()),voteAuthorizationType:S.index}),T=[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:Ws,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!1}];return(new Transaction).add({keys:T,programId:this.programId,data:B})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:l,currentAuthorityDerivedKeyOwnerPubkey:d,currentAuthorityDerivedKeySeed:v,newAuthorizedPubkey:S,voteAuthorizationType:B,votePubkey:T}=e,k=encodeData(bc.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:toBuffer(d.toBuffer()),currentAuthorityDerivedKeySeed:v,newAuthorized:toBuffer(S.toBuffer()),voteAuthorizationType:B.index}}),x=[{pubkey:T,isSigner:!1,isWritable:!0},{pubkey:Ws,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!0,isWritable:!1}];return(new Transaction).add({keys:x,programId:this.programId,data:k})}static withdraw(e){const{votePubkey:l,authorizedWithdrawerPubkey:d,lamports:v,toPubkey:S}=e,B=encodeData(bc.Withdraw,{lamports:v}),T=[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!1}];return(new Transaction).add({keys:T,programId:this.programId,data:B})}static safeWithdraw(e,l,d){if(e.lamports>l-d)throw new Error("Withdraw will leave vote account with insufficient funds.");return VoteProgram.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:l,authorizedWithdrawerPubkey:d,nodePubkey:v}=e,S=encodeData(bc.UpdateValidatorIdentity),B=[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!0,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!1}];return(new Transaction).add({keys:B,programId:this.programId,data:S})}}VoteProgram.programId=new PublicKey("Vote111111111111111111111111111111111111111"),VoteProgram.space=3762,new PublicKey("Va1idator1nfo111111111111111111111111111111"),Es.type({name:Es.string(),website:Es.optional(Es.string()),details:Es.optional(Es.string()),iconUrl:Es.optional(Es.string()),keybaseUsername:Es.optional(Es.string())}),new PublicKey("Vote111111111111111111111111111111111111111"),Is.struct([publicKey("nodePubkey"),publicKey("authorizedWithdrawer"),Is.u8("commission"),Is.nu64(),Is.seq(Is.struct([Is.nu64("slot"),Is.u32("confirmationCount")]),Is.offset(Is.u32(),-8),"votes"),Is.u8("rootSlotValid"),Is.nu64("rootSlot"),Is.nu64(),Is.seq(Is.struct([Is.nu64("epoch"),publicKey("authorizedVoter")]),Is.offset(Is.u32(),-8),"authorizedVoters"),Is.struct([Is.seq(Is.struct([publicKey("authorizedPubkey"),Is.nu64("epochOfLastAuthorizedSwitch"),Is.nu64("targetEpoch")]),32,"buf"),Is.nu64("idx"),Is.u8("isEmpty")],"priorVoters"),Is.nu64(),Is.seq(Is.struct([Is.nu64("epoch"),Is.nu64("credits"),Is.nu64("prevCredits")]),Is.offset(Is.u32(),-8),"epochCredits"),Is.struct([Is.nu64("slot"),Is.nu64("timestamp")],"lastTimestamp")]);var wc=PublicKey,Ec=64,vc=Transaction,Sc=Ps,Bc=VersionedTransaction;class CoinbaseWalletAdapter extends BaseMessageSignerWalletAdapter{constructor(e={}){super(),this.name="Coinbase Wallet",this.url="https://chrome.google.com/webstore/detail/coinbase-wallet-extension/hnfanknocfeofbddgcijnmhnfnkdnaad",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=Ue.Unsupported,this._disconnected=()=>{const e=this._wallet;e&&(e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new WalletDisconnectedError),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState,Ue.Unsupported}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Ue.Installed)throw new WalletNotReadyError;this._connecting=!0;const e=window.coinbaseSolana;try{await e.connect()}catch(e){throw new WalletConnectionError(e?.message,e)}if(!e.publicKey)throw new WalletAccountError;let l;try{l=new wc(e.publicKey.toBytes())}catch(e){throw new WalletPublicKeyError(e?.message,e)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=l,this.emit("connect",l)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(e){this.emit("error",new WalletDisconnectionError(e?.message,e))}}this.emit("disconnect")}async sendTransaction(e,l,d={}){try{const v=this._wallet;if(!v)throw new WalletNotConnectedError;try{const{signers:S,...B}=d;isVersionedTransaction(e)?S?.length&&e.sign(S):(e=await this.prepareTransaction(e,l,B),S?.length&&e.partialSign(...S)),B.preflightCommitment=B.preflightCommitment||l.commitment;const{signature:T}=await v.signAndSendTransaction(e,B);return T}catch(e){if(e instanceof WalletError)throw e;throw new WalletSendTransactionError(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signTransaction(e){try{const l=this._wallet;if(!l)throw new WalletNotConnectedError;try{return await l.signTransaction(e)||e}catch(e){throw new WalletSignTransactionError(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{const l=this._wallet;if(!l)throw new WalletNotConnectedError;try{return await l.signAllTransactions(e)||e}catch(e){throw new WalletSignTransactionError(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{const l=this._wallet;if(!l)throw new WalletNotConnectedError;try{const{signature:d}=await l.signMessage(e);return d}catch(e){throw new WalletSignTransactionError(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}class TrezorWalletAdapter extends BaseSignerWalletAdapter{constructor(e={}){super(),this.name="Trezor",this.url="https://trezor.io",this.icon="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEwOCIgd2lkdGg9IjEwOCIgdmlld0JveD0iMCAwIDEwOCAxMDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTU0IDBjMjkuODI0MjE5IDAgNTQgMjQuMTc1NzgxIDU0IDU0cy0yNC4xNzU3ODEgNTQtNTQgNTQtNTQtMjQuMTc1NzgxLTU0LTU0IDI0LjE3NTc4MS01NCA1NC01NHptMCAwIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTU0LjA0Njg3NSAxMC4xMjVjLTEyLjEwNTQ2OSAwLTIxLjkwNjI1IDEwLjExNzE4OC0yMS45MDYyNSAyMi42MTcxODh2OC40NzY1NjJjLTQuMjUuNzk2ODc1LTguNTE1NjI1IDEuODU1NDY5LTguNTE1NjI1IDMuMjMwNDY5djQ0LjIzODI4MXMwIDEuMjIyNjU2IDEuMzMyMDMxIDEuODAwNzgxYzQuODI0MjE5IDIuMDE5NTMxIDIzLjgxMjUgOC45NTcwMzEgMjguMTc1NzgxIDEwLjU0Njg3NS41NjI1LjIxNDg0NC43MTg3NS4yMTQ4NDQuODY3MTg4LjIxNDg0NC4yMDcwMzEgMCAuMzA0Njg4IDAgLjg2NzE4OC0uMjE0ODQ0IDQuMzYzMjgxLTEuNTg5ODQ0IDIzLjM5ODQzNy04LjUyNzM0NCAyOC4yMjY1NjItMTAuNTQ2ODc1IDEuMjM0Mzc1LS41MjczNDMgMS4yODEyNS0xLjc1IDEuMjgxMjUtMS43NXYtNDQuMjg5MDYyYzAtMS4zNzUtNC4yMDMxMjUtMi40ODQzNzUtOC40Njg3NS0zLjIzMDQ2OXYtOC40NzY1NjJjLjA2MjUtMTIuNS05Ljc5Njg3NS0yMi42MTcxODgtMjEuODU5Mzc1LTIyLjYxNzE4OHptMCAxMC44MDg1OTRjNy4xMzY3MTkgMCAxMS40NDkyMTkgNC40NTMxMjUgMTEuNDQ5MjE5IDExLjgyMDMxMnY3LjM2NzE4OGMtOC0uNTc4MTI1LTE0LjgzMjAzMi0uNTc4MTI1LTIyLjg4MjgxMyAwdi03LjM2NzE4OGMwLTcuMzc4OTA2IDQuMzEyNS0xMS44MjAzMTIgMTEuNDMzNTk0LTExLjgyMDMxMnptLS4wNDY4NzUgMzAuMDM1MTU2YzkuOTU3MDMxIDAgMTguMzE2NDA2Ljc5Njg3NSAxOC4zMTY0MDYgMi4yMjI2NTZ2MjcuNTk3NjU2YzAgLjQyOTY4OC0uMDUwNzgxLjQ4MDQ2OS0uNDE3OTY4LjYzMjgxMy0uMzUxNTYzLjE2NDA2My0xNi45ODA0NjkgNi4zNTU0NjktMTYuOTgwNDY5IDYuMzU1NDY5cy0uNjcxODc1LjIxNDg0NC0uODcxMDk0LjIxNDg0NGMtLjIwNzAzMSAwLS44NjcxODctLjI2NTYyNi0uODY3MTg3LS4yNjU2MjZzLTE2LjYyODkwNy02LjE5MTQwNi0xNi45ODA0NjktNi4zNTU0NjhjLS4zNTU0NjktLjE2NDA2My0uNDE3OTY5LS4yMTQ4NDQtLjQxNzk2OS0uNjMyODEzdi0yNy41OTc2NTZjLS4wOTc2NTYtMS40MjU3ODEgOC4yNjE3MTktMi4xNzE4NzUgMTguMjE4NzUtMi4xNzE4NzV6bTAgMCIvPjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=Ue.Unsupported,this._onDeviceEvent=e=>{"device-disconnect"===e.type&&this._disconnected()},this._disconnected=async()=>{const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{e.off("DEVICE_EVENT",this._onDeviceEvent),e.dispose()}catch(e){this.emit("error",new WalletDisconnectionError(e?.message,e))}this.emit("error",new WalletDisconnectedError),this.emit("disconnect")}},this._derivationPath=e.derivationPath||"m/44'/501'/0'/0'",this._wallet=null,this._connectUrl=e.connectUrl?.replace(/\/*$/,"/"),this._connecting=!1,this._publicKey=null}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Ue.Loadable)throw new WalletNotReadyError;let e,l,d;this._connecting=!0;try{const{default:l}=await import("../_/index.mjs").then((function(e){return e.i}));e=l.default}catch(e){throw new WalletLoadError(e?.message,e)}try{await e.init({manifest:{email:"gabriel.kerekes@vacuumlabs.com",appUrl:window.location.href},lazyLoad:!0,...this._connectUrl?{connectSrc:this._connectUrl,iframeSrc:this._connectUrl}:{}})}catch(e){throw new WalletConfigError(e?.message,e)}try{l=await e.solanaGetPublicKey({path:this._derivationPath})}catch(e){throw new WalletAccountError(e?.message,e)}if(!l.success)throw new WalletAccountError(l.payload?.error,l.payload);try{d=new wc(j.from(l.payload.publicKey,"hex"))}catch(e){throw new WalletPublicKeyError(e?.message,e)}e.on("DEVICE_EVENT",this._onDeviceEvent),this._wallet=e,this._publicKey=d,this.emit("connect",d)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{e.off("DEVICE_EVENT",this._onDeviceEvent),await e.dispose()}catch(e){this.emit("error",new WalletDisconnectionError(e?.message,e))}this.emit("disconnect")}}async signTransaction(e){try{const l=this._wallet,d=this._publicKey;if(!l||!d)throw new WalletNotConnectedError;const v=isVersionedTransaction(e)?e.message.serialize():e.serializeMessage();let S;try{S=await l.solanaSignTransaction({path:this._derivationPath,serializedTx:j.from(v).toString("hex")})}catch(e){throw new WalletSignTransactionError(e?.message,e)}if(!S.success)throw new WalletSignTransactionError(S.payload?.error,S.payload);try{const l=j.from(S.payload.signature,"hex");e.addSignature(d,l)}catch(e){throw new WalletSignTransactionError(e?.message,e)}return e}catch(e){throw this.emit("error",e),e}}}var Tc={},kc={},Ic={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.deserializeError=e.createCustomErrorClass=e.addCustomErrorDeserializer=void 0;const l={},d={};e.addCustomErrorDeserializer=(e,l)=>{d[e]=l};e.createCustomErrorClass=e=>{class CustomErrorClass extends Error{constructor(l,d,v){if(super(l||e,v),Object.setPrototypeOf(this,CustomErrorClass.prototype),this.name=e,d)for(const e in d)this[e]=d[e];if(v&&"object"==typeof v&&"cause"in v&&!("cause"in this)){const e=v.cause;this.cause=e,"stack"in e&&(this.stack=this.stack+"\nCAUSE: "+e.stack)}}}return l[e]=CustomErrorClass,CustomErrorClass};e.deserializeError=v=>{if(v&&"object"==typeof v){try{if("string"==typeof v.message){const e=JSON.parse(v.message);e.message&&e.name&&(v=e)}}catch(e){}let S;if("string"==typeof v.name){const{name:B}=v,T=d[B];if(T)S=T(v);else{let d="Error"===B?Error:l[B];d||(console.warn("deserializing an unknown class '"+B+"'"),d=(0,e.createCustomErrorClass)(B)),S=Object.create(d.prototype);try{for(const e in v)v.hasOwnProperty(e)&&(S[e]=v[e])}catch(e){}}}else"string"==typeof v.message&&(S=new Error(v.message));return S&&!S.stack&&Error.captureStackTrace&&Error.captureStackTrace(S,e.deserializeError),S}return new Error(String(v))};function destroyCircular(e,l){const d={};l.push(e);for(const v of Object.keys(e)){const S=e[v];"function"!=typeof S&&(S&&"object"==typeof S?-1!==l.indexOf(e[v])?d[v]="[Circular]":d[v]=destroyCircular(e[v],l.slice(0)):d[v]=S)}return"string"==typeof e.name&&(d.name=e.name),"string"==typeof e.message&&(d.message=e.message),"string"==typeof e.stack&&(d.stack=e.stack),d}e.serializeError=e=>e?"object"==typeof e?destroyCircular(e,[]):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e:e}(Ic),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ManagerFirmwareNotEnoughSpaceError=e.ManagerDeviceLockedError=e.ManagerAppDepUninstallRequired=e.ManagerAppDepInstallRequired=e.ManagerAppRelyOnBTCError=e.ManagerAppAlreadyInstalledError=e.LedgerAPINotAvailable=e.LedgerAPIErrorWithMessage=e.LedgerAPIError=e.UnknownMCU=e.LatestMCUInstalledError=e.InvalidAddressBecauseDestinationIsAlsoSource=e.InvalidNonce=e.InvalidAddress=e.InvalidXRPTag=e.HardResetFail=e.FirmwareNotRecognized=e.FeeEstimationFailed=e.EthAppPleaseEnableContractData=e.EnpointConfigError=e.DeviceOnboardingStatePollingError=e.DeviceExtractOnboardingStateError=e.DisconnectedDeviceDuringOperation=e.DisconnectedDevice=e.UnresponsiveDeviceError=e.DeviceNeedsRestart=e.DeviceSocketNoBulkStatus=e.DeviceSocketFail=e.DeviceNameInvalid=e.DeviceHalted=e.DeviceInOSUExpected=e.DeviceOnDashboardUnexpected=e.DeviceOnDashboardExpected=e.DeviceNotGenuineError=e.DeviceGenuineSocketEarlyClose=e.DeviceAppVerifyNotSupported=e.CurrencyNotSupported=e.ClaimRewardsFeesWarning=e.CashAddrNotSupported=e.CantOpenDevice=e.BtcUnmatchedApp=e.BluetoothRequired=e.AmountRequired=e.AccountAwaitingSendPendingOperations=e.AccountNotSupported=e.AccountNameRequiredError=e.addCustomErrorDeserializer=e.createCustomErrorClass=e.deserializeError=e.serializeError=void 0,e.DeviceShouldStayInApp=e.TransportExchangeTimeoutError=e.TransactionHasBeenValidatedError=e.TransportWebUSBGestureRequired=e.TransportRaceCondition=e.TransportInterfaceNotAvailable=e.TransportOpenUserCancelled=e.ExpertModeRequired=e.PinNotSet=e.UserRefusedOnDevice=e.UserRefusedAllowManager=e.UserRefusedFirmwareUpdate=e.UserRefusedAddress=e.UserRefusedDeviceNameChange=e.UpdateYourApp=e.UpdateIncorrectSig=e.UpdateIncorrectHash=e.UpdateFetchFileFail=e.UnavailableTezosOriginatedAccountSend=e.UnavailableTezosOriginatedAccountReceive=e.RecipientRequired=e.MCUNotGenuineToDashboard=e.UnexpectedBootloader=e.TimeoutTagged=e.RecommendUndelegation=e.RecommendSubAccountsToEmpty=e.PasswordIncorrectError=e.PasswordsDontMatchError=e.MaxFeeTooLow=e.PriorityFeeHigherThanMaxFee=e.PriorityFeeTooHigh=e.PriorityFeeTooLow=e.GasLessThanEstimate=e.NotSupportedLegacyAddress=e.MaybeKeepTronAccountAlive=e.TronEmptyAccount=e.NotEnoughGasSwap=e.NotEnoughGas=e.NoAccessToCamera=e.NotEnoughBalanceBecauseDestinationNotCreated=e.NotEnoughSpendableBalance=e.NotEnoughBalanceInParentAccount=e.NotEnoughBalanceToDelegate=e.NotEnoughBalanceSwap=e.NotEnoughBalance=e.NoAddressesFound=e.NetworkError=e.NetworkDown=e.ManagerUninstallBTCDep=e.ManagerNotEnoughSpaceError=void 0,e.LockedDeviceError=e.TransportStatusError=e.getAltStatusMessage=e.StatusCodes=e.TransportError=e.HwTransportError=e.HwTransportErrorType=e.DisabledTransactionBroadcastError=e.SequenceNumberError=e.DBNotReset=e.DBWrongPassword=e.NoDBPathGiven=e.LanguageNotFound=e.DustLimit=e.OpReturnDataSizeLimit=e.ReplacementTransactionUnderpriced=e.FirmwareOrAppUpdateRequired=e.LedgerAPI5xx=e.LedgerAPI4xx=e.GenuineCheckFailed=e.PeerRemovedPairing=e.PairingFailed=e.SyncError=e.PendingOperation=e.FeeTooHigh=e.FeeRequired=e.FeeNotLoadedSwap=e.FeeNotLoaded=e.CantScanQRCode=e.ETHAddressNonEIP=e.WrongAppForCurrency=e.WrongDeviceForAccountRefund=e.WrongDeviceForAccountPayout=e.WrongDeviceForAccount=e.WebsocketConnectionFailed=e.WebsocketConnectionError=void 0;const l=Ic;var d;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return l.serializeError}}),Object.defineProperty(e,"deserializeError",{enumerable:!0,get:function(){return l.deserializeError}}),Object.defineProperty(e,"createCustomErrorClass",{enumerable:!0,get:function(){return l.createCustomErrorClass}}),Object.defineProperty(e,"addCustomErrorDeserializer",{enumerable:!0,get:function(){return l.addCustomErrorDeserializer}}),e.AccountNameRequiredError=(0,l.createCustomErrorClass)("AccountNameRequired"),e.AccountNotSupported=(0,l.createCustomErrorClass)("AccountNotSupported"),e.AccountAwaitingSendPendingOperations=(0,l.createCustomErrorClass)("AccountAwaitingSendPendingOperations"),e.AmountRequired=(0,l.createCustomErrorClass)("AmountRequired"),e.BluetoothRequired=(0,l.createCustomErrorClass)("BluetoothRequired"),e.BtcUnmatchedApp=(0,l.createCustomErrorClass)("BtcUnmatchedApp"),e.CantOpenDevice=(0,l.createCustomErrorClass)("CantOpenDevice"),e.CashAddrNotSupported=(0,l.createCustomErrorClass)("CashAddrNotSupported"),e.ClaimRewardsFeesWarning=(0,l.createCustomErrorClass)("ClaimRewardsFeesWarning"),e.CurrencyNotSupported=(0,l.createCustomErrorClass)("CurrencyNotSupported"),e.DeviceAppVerifyNotSupported=(0,l.createCustomErrorClass)("DeviceAppVerifyNotSupported"),e.DeviceGenuineSocketEarlyClose=(0,l.createCustomErrorClass)("DeviceGenuineSocketEarlyClose"),e.DeviceNotGenuineError=(0,l.createCustomErrorClass)("DeviceNotGenuine"),e.DeviceOnDashboardExpected=(0,l.createCustomErrorClass)("DeviceOnDashboardExpected"),e.DeviceOnDashboardUnexpected=(0,l.createCustomErrorClass)("DeviceOnDashboardUnexpected"),e.DeviceInOSUExpected=(0,l.createCustomErrorClass)("DeviceInOSUExpected"),e.DeviceHalted=(0,l.createCustomErrorClass)("DeviceHalted"),e.DeviceNameInvalid=(0,l.createCustomErrorClass)("DeviceNameInvalid"),e.DeviceSocketFail=(0,l.createCustomErrorClass)("DeviceSocketFail"),e.DeviceSocketNoBulkStatus=(0,l.createCustomErrorClass)("DeviceSocketNoBulkStatus"),e.DeviceNeedsRestart=(0,l.createCustomErrorClass)("DeviceSocketNoBulkStatus"),e.UnresponsiveDeviceError=(0,l.createCustomErrorClass)("UnresponsiveDeviceError"),e.DisconnectedDevice=(0,l.createCustomErrorClass)("DisconnectedDevice"),e.DisconnectedDeviceDuringOperation=(0,l.createCustomErrorClass)("DisconnectedDeviceDuringOperation"),e.DeviceExtractOnboardingStateError=(0,l.createCustomErrorClass)("DeviceExtractOnboardingStateError"),e.DeviceOnboardingStatePollingError=(0,l.createCustomErrorClass)("DeviceOnboardingStatePollingError"),e.EnpointConfigError=(0,l.createCustomErrorClass)("EnpointConfig"),e.EthAppPleaseEnableContractData=(0,l.createCustomErrorClass)("EthAppPleaseEnableContractData"),e.FeeEstimationFailed=(0,l.createCustomErrorClass)("FeeEstimationFailed"),e.FirmwareNotRecognized=(0,l.createCustomErrorClass)("FirmwareNotRecognized"),e.HardResetFail=(0,l.createCustomErrorClass)("HardResetFail"),e.InvalidXRPTag=(0,l.createCustomErrorClass)("InvalidXRPTag"),e.InvalidAddress=(0,l.createCustomErrorClass)("InvalidAddress"),e.InvalidNonce=(0,l.createCustomErrorClass)("InvalidNonce"),e.InvalidAddressBecauseDestinationIsAlsoSource=(0,l.createCustomErrorClass)("InvalidAddressBecauseDestinationIsAlsoSource"),e.LatestMCUInstalledError=(0,l.createCustomErrorClass)("LatestMCUInstalledError"),e.UnknownMCU=(0,l.createCustomErrorClass)("UnknownMCU"),e.LedgerAPIError=(0,l.createCustomErrorClass)("LedgerAPIError"),e.LedgerAPIErrorWithMessage=(0,l.createCustomErrorClass)("LedgerAPIErrorWithMessage"),e.LedgerAPINotAvailable=(0,l.createCustomErrorClass)("LedgerAPINotAvailable"),e.ManagerAppAlreadyInstalledError=(0,l.createCustomErrorClass)("ManagerAppAlreadyInstalled"),e.ManagerAppRelyOnBTCError=(0,l.createCustomErrorClass)("ManagerAppRelyOnBTC"),e.ManagerAppDepInstallRequired=(0,l.createCustomErrorClass)("ManagerAppDepInstallRequired"),e.ManagerAppDepUninstallRequired=(0,l.createCustomErrorClass)("ManagerAppDepUninstallRequired"),e.ManagerDeviceLockedError=(0,l.createCustomErrorClass)("ManagerDeviceLocked"),e.ManagerFirmwareNotEnoughSpaceError=(0,l.createCustomErrorClass)("ManagerFirmwareNotEnoughSpace"),e.ManagerNotEnoughSpaceError=(0,l.createCustomErrorClass)("ManagerNotEnoughSpace"),e.ManagerUninstallBTCDep=(0,l.createCustomErrorClass)("ManagerUninstallBTCDep"),e.NetworkDown=(0,l.createCustomErrorClass)("NetworkDown"),e.NetworkError=(0,l.createCustomErrorClass)("NetworkError"),e.NoAddressesFound=(0,l.createCustomErrorClass)("NoAddressesFound"),e.NotEnoughBalance=(0,l.createCustomErrorClass)("NotEnoughBalance"),e.NotEnoughBalanceSwap=(0,l.createCustomErrorClass)("NotEnoughBalanceSwap"),e.NotEnoughBalanceToDelegate=(0,l.createCustomErrorClass)("NotEnoughBalanceToDelegate"),e.NotEnoughBalanceInParentAccount=(0,l.createCustomErrorClass)("NotEnoughBalanceInParentAccount"),e.NotEnoughSpendableBalance=(0,l.createCustomErrorClass)("NotEnoughSpendableBalance"),e.NotEnoughBalanceBecauseDestinationNotCreated=(0,l.createCustomErrorClass)("NotEnoughBalanceBecauseDestinationNotCreated"),e.NoAccessToCamera=(0,l.createCustomErrorClass)("NoAccessToCamera"),e.NotEnoughGas=(0,l.createCustomErrorClass)("NotEnoughGas"),e.NotEnoughGasSwap=(0,l.createCustomErrorClass)("NotEnoughGasSwap"),e.TronEmptyAccount=(0,l.createCustomErrorClass)("TronEmptyAccount"),e.MaybeKeepTronAccountAlive=(0,l.createCustomErrorClass)("MaybeKeepTronAccountAlive"),e.NotSupportedLegacyAddress=(0,l.createCustomErrorClass)("NotSupportedLegacyAddress"),e.GasLessThanEstimate=(0,l.createCustomErrorClass)("GasLessThanEstimate"),e.PriorityFeeTooLow=(0,l.createCustomErrorClass)("PriorityFeeTooLow"),e.PriorityFeeTooHigh=(0,l.createCustomErrorClass)("PriorityFeeTooHigh"),e.PriorityFeeHigherThanMaxFee=(0,l.createCustomErrorClass)("PriorityFeeHigherThanMaxFee"),e.MaxFeeTooLow=(0,l.createCustomErrorClass)("MaxFeeTooLow"),e.PasswordsDontMatchError=(0,l.createCustomErrorClass)("PasswordsDontMatch"),e.PasswordIncorrectError=(0,l.createCustomErrorClass)("PasswordIncorrect"),e.RecommendSubAccountsToEmpty=(0,l.createCustomErrorClass)("RecommendSubAccountsToEmpty"),e.RecommendUndelegation=(0,l.createCustomErrorClass)("RecommendUndelegation"),e.TimeoutTagged=(0,l.createCustomErrorClass)("TimeoutTagged"),e.UnexpectedBootloader=(0,l.createCustomErrorClass)("UnexpectedBootloader"),e.MCUNotGenuineToDashboard=(0,l.createCustomErrorClass)("MCUNotGenuineToDashboard"),e.RecipientRequired=(0,l.createCustomErrorClass)("RecipientRequired"),e.UnavailableTezosOriginatedAccountReceive=(0,l.createCustomErrorClass)("UnavailableTezosOriginatedAccountReceive"),e.UnavailableTezosOriginatedAccountSend=(0,l.createCustomErrorClass)("UnavailableTezosOriginatedAccountSend"),e.UpdateFetchFileFail=(0,l.createCustomErrorClass)("UpdateFetchFileFail"),e.UpdateIncorrectHash=(0,l.createCustomErrorClass)("UpdateIncorrectHash"),e.UpdateIncorrectSig=(0,l.createCustomErrorClass)("UpdateIncorrectSig"),e.UpdateYourApp=(0,l.createCustomErrorClass)("UpdateYourApp"),e.UserRefusedDeviceNameChange=(0,l.createCustomErrorClass)("UserRefusedDeviceNameChange"),e.UserRefusedAddress=(0,l.createCustomErrorClass)("UserRefusedAddress"),e.UserRefusedFirmwareUpdate=(0,l.createCustomErrorClass)("UserRefusedFirmwareUpdate"),e.UserRefusedAllowManager=(0,l.createCustomErrorClass)("UserRefusedAllowManager"),e.UserRefusedOnDevice=(0,l.createCustomErrorClass)("UserRefusedOnDevice"),e.PinNotSet=(0,l.createCustomErrorClass)("PinNotSet"),e.ExpertModeRequired=(0,l.createCustomErrorClass)("ExpertModeRequired"),e.TransportOpenUserCancelled=(0,l.createCustomErrorClass)("TransportOpenUserCancelled"),e.TransportInterfaceNotAvailable=(0,l.createCustomErrorClass)("TransportInterfaceNotAvailable"),e.TransportRaceCondition=(0,l.createCustomErrorClass)("TransportRaceCondition"),e.TransportWebUSBGestureRequired=(0,l.createCustomErrorClass)("TransportWebUSBGestureRequired"),e.TransactionHasBeenValidatedError=(0,l.createCustomErrorClass)("TransactionHasBeenValidatedError"),e.TransportExchangeTimeoutError=(0,l.createCustomErrorClass)("TransportExchangeTimeoutError"),e.DeviceShouldStayInApp=(0,l.createCustomErrorClass)("DeviceShouldStayInApp"),e.WebsocketConnectionError=(0,l.createCustomErrorClass)("WebsocketConnectionError"),e.WebsocketConnectionFailed=(0,l.createCustomErrorClass)("WebsocketConnectionFailed"),e.WrongDeviceForAccount=(0,l.createCustomErrorClass)("WrongDeviceForAccount"),e.WrongDeviceForAccountPayout=(0,l.createCustomErrorClass)("WrongDeviceForAccountPayout"),e.WrongDeviceForAccountRefund=(0,l.createCustomErrorClass)("WrongDeviceForAccountRefund"),e.WrongAppForCurrency=(0,l.createCustomErrorClass)("WrongAppForCurrency"),e.ETHAddressNonEIP=(0,l.createCustomErrorClass)("ETHAddressNonEIP"),e.CantScanQRCode=(0,l.createCustomErrorClass)("CantScanQRCode"),e.FeeNotLoaded=(0,l.createCustomErrorClass)("FeeNotLoaded"),e.FeeNotLoadedSwap=(0,l.createCustomErrorClass)("FeeNotLoadedSwap"),e.FeeRequired=(0,l.createCustomErrorClass)("FeeRequired"),e.FeeTooHigh=(0,l.createCustomErrorClass)("FeeTooHigh"),e.PendingOperation=(0,l.createCustomErrorClass)("PendingOperation"),e.SyncError=(0,l.createCustomErrorClass)("SyncError"),e.PairingFailed=(0,l.createCustomErrorClass)("PairingFailed"),e.PeerRemovedPairing=(0,l.createCustomErrorClass)("PeerRemovedPairing"),e.GenuineCheckFailed=(0,l.createCustomErrorClass)("GenuineCheckFailed"),e.LedgerAPI4xx=(0,l.createCustomErrorClass)("LedgerAPI4xx"),e.LedgerAPI5xx=(0,l.createCustomErrorClass)("LedgerAPI5xx"),e.FirmwareOrAppUpdateRequired=(0,l.createCustomErrorClass)("FirmwareOrAppUpdateRequired"),e.ReplacementTransactionUnderpriced=(0,l.createCustomErrorClass)("ReplacementTransactionUnderpriced"),e.OpReturnDataSizeLimit=(0,l.createCustomErrorClass)("OpReturnSizeLimit"),e.DustLimit=(0,l.createCustomErrorClass)("DustLimit"),e.LanguageNotFound=(0,l.createCustomErrorClass)("LanguageNotFound"),e.NoDBPathGiven=(0,l.createCustomErrorClass)("NoDBPathGiven"),e.DBWrongPassword=(0,l.createCustomErrorClass)("DBWrongPassword"),e.DBNotReset=(0,l.createCustomErrorClass)("DBNotReset"),e.SequenceNumberError=(0,l.createCustomErrorClass)("SequenceNumberError"),e.DisabledTransactionBroadcastError=(0,l.createCustomErrorClass)("DisabledTransactionBroadcastError"),function(e){e.Unknown="Unknown",e.LocationServicesDisabled="LocationServicesDisabled",e.LocationServicesUnauthorized="LocationServicesUnauthorized",e.BluetoothScanStartFailed="BluetoothScanStartFailed"}(d||(e.HwTransportErrorType=d={}));class HwTransportError extends Error{constructor(e,l){super(l),this.name="HwTransportError",this.type=e,Object.setPrototypeOf(this,HwTransportError.prototype)}}e.HwTransportError=HwTransportError;class TransportError extends Error{constructor(e,l){const d="TransportError";super(e||d),this.name=d,this.message=e,this.stack=new Error(e).stack,this.id=l}}function getAltStatusMessage(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=e&&e<=28671)return"Internal error, please report"}e.TransportError=TransportError,(0,l.addCustomErrorDeserializer)("TransportError",(e=>new TransportError(e.message,e.id))),e.StatusCodes={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,DEVICE_IN_RECOVERY_MODE:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738,APP_NOT_FOUND_OR_INVALID_CONTEXT:20771,INVALID_APP_NAME_LENGTH:26378,GEN_AES_KEY_FAILED:21529,INTERNAL_CRYPTO_OPERATION_FAILED:21530,INTERNAL_COMPUTE_AES_CMAC_FAILED:21531,ENCRYPT_APP_STORAGE_FAILED:21532,INVALID_BACKUP_STATE:26178,PIN_NOT_SET:21762,INVALID_BACKUP_LENGTH:26419,INVALID_RESTORE_STATE:26179,INVALID_CHUNK_LENGTH:26420,INVALID_BACKUP_HEADER:26698,TRUSTCHAIN_WRONG_SEED:45063},e.getAltStatusMessage=getAltStatusMessage;class TransportStatusError extends Error{constructor(l,{canBeMappedToChildError:d=!0}={}){const v=Object.keys(e.StatusCodes).find((d=>e.StatusCodes[d]===l))||"UNKNOWN_ERROR",S=`Ledger device: ${getAltStatusMessage(l)||v} (0x${l.toString(16)})`;if(super(S),this.name="TransportStatusError",this.statusCode=l,this.statusText=v,Object.setPrototypeOf(this,TransportStatusError.prototype),d&&l===e.StatusCodes.LOCKED_DEVICE)return new LockedDeviceError(S)}}e.TransportStatusError=TransportStatusError;class LockedDeviceError extends TransportStatusError{constructor(l){super(e.StatusCodes.LOCKED_DEVICE,{canBeMappedToChildError:!1}),l&&(this.message=l),this.name="LockedDeviceError",Object.setPrototypeOf(this,LockedDeviceError.prototype)}}e.LockedDeviceError=LockedDeviceError,(0,l.addCustomErrorDeserializer)("TransportStatusError",(e=>new TransportStatusError(e.statusCode)))}(kc),function(e){var l=ke&&ke.__awaiter||function(e,l,d,v){return new(d||(d=Promise))((function(S,B){function fulfilled(e){try{step(v.next(e))}catch(e){B(e)}}function rejected(e){try{step(v.throw(e))}catch(e){B(e)}}function step(e){var l;e.done?S(e.value):(l=e.value,l instanceof d?l:new d((function(e){e(l)}))).then(fulfilled,rejected)}step((v=v.apply(e,l||[])).next())}))},d=ke&&ke.__generator||function(e,l){var d,v,S,B,T={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return B={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B;function verb(B){return function(k){return function(B){if(d)throw new TypeError("Generator is already executing.");for(;T;)try{if(d=1,v&&(S=2&B[0]?v.return:B[0]?v.throw||((S=v.return)&&S.call(v),0):v.next)&&!(S=S.call(v,B[1])).done)return S;switch(v=0,S&&(B=[2&B[0],S.value]),B[0]){case 0:case 1:S=B;break;case 4:return T.label++,{value:B[1],done:!1};case 5:T.label++,v=B[1],B=[0];continue;case 7:B=T.ops.pop(),T.trys.pop();continue;default:if(!(S=T.trys,(S=S.length>0&&S[S.length-1])||6!==B[0]&&2!==B[0])){T=0;continue}if(3===B[0]&&(!S||B[1]>S[0]&&B[1]<S[3])){T.label=B[1];break}if(6===B[0]&&T.label<S[1]){T.label=S[1],S=B;break}if(S&&T.label<S[2]){T.label=S[2],T.ops.push(B);break}S[2]&&T.ops.pop(),T.trys.pop();continue}B=l.call(e,T)}catch(e){B=[6,e],v=0}finally{d=S=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([B,k])}}},v=ke&&ke.__read||function(e,l){var d="function"==typeof Symbol&&e[Symbol.iterator];if(!d)return e;var v,S,B=d.call(e),T=[];try{for(;(void 0===l||l-- >0)&&!(v=B.next()).done;)T.push(v.value)}catch(e){S={error:e}}finally{try{v&&!v.done&&(d=B.return)&&d.call(B)}finally{if(S)throw S.error}}return T},S=ke&&ke.__spreadArray||function(e,l,d){if(d||2===arguments.length)for(var v,S=0,B=l.length;S<B;S++)!v&&S in l||(v||(v=Array.prototype.slice.call(l,0,S)),v[S]=l[S]);return e.concat(v||Array.prototype.slice.call(l))},B=ke&&ke.__values||function(e){var l="function"==typeof Symbol&&Symbol.iterator,d=l&&e[l],v=0;if(d)return d.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&v>=e.length&&(e=void 0),{value:e&&e[v++],done:!e}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},T=ke&&ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};e.__esModule=!0,e.getAltStatusMessage=e.StatusCodes=e.TransportStatusError=e.TransportError=void 0;var k=T(Zo),x=kc;e.TransportError=x.TransportError,e.StatusCodes=x.StatusCodes,e.getAltStatusMessage=x.getAltStatusMessage,e.TransportStatusError=x.TransportStatusError;var U=function(){function Transport(){var e=this;this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new k.default,this.send=function(v,S,B,T,k,U){return void 0===k&&(k=j.alloc(0)),void 0===U&&(U=[x.StatusCodes.OK]),l(e,void 0,void 0,(function(){var e,l;return d(this,(function(d){switch(d.label){case 0:if(k.length>=256)throw new x.TransportError("data.length exceed 256 bytes limit. Got: "+k.length,"DataLengthTooBig");return[4,this.exchange(j.concat([j.from([v,S,B,T]),j.from([k.length]),k]))];case 1:if(e=d.sent(),l=e.readUInt16BE(e.length-2),!U.some((function(e){return e===l})))throw new x.TransportStatusError(l);return[2,e]}}))}))},this.exchangeAtomicImpl=function(v){return l(e,void 0,void 0,(function(){var e,l,S,B,T,k=this;return d(this,(function(d){switch(d.label){case 0:if(this.exchangeBusyPromise)throw new x.TransportRaceCondition("An action was already pending on the Ledger device. Please deny or reconnect.");l=new Promise((function(l){e=l})),this.exchangeBusyPromise=l,S=!1,B=setTimeout((function(){S=!0,k.emit("unresponsive")}),this.unresponsiveTimeout),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,v()];case 2:return T=d.sent(),S&&this.emit("responsive"),[2,T];case 3:return clearTimeout(B),e&&e(),this.exchangeBusyPromise=null,[7];case 4:return[2]}}))}))},this._appAPIlock=null}return Transport.prototype.exchange=function(e){throw new Error("exchange not implemented")},Transport.prototype.setScrambleKey=function(e){},Transport.prototype.close=function(){return Promise.resolve()},Transport.prototype.on=function(e,l){this._events.on(e,l)},Transport.prototype.off=function(e,l){this._events.removeListener(e,l)},Transport.prototype.emit=function(e){for(var l,d=[],B=1;B<arguments.length;B++)d[B-1]=arguments[B];(l=this._events).emit.apply(l,S([e],v(d),!1))},Transport.prototype.setDebugMode=function(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")},Transport.prototype.setExchangeTimeout=function(e){this.exchangeTimeout=e},Transport.prototype.setExchangeUnresponsiveTimeout=function(e){this.unresponsiveTimeout=e},Transport.create=function(e,l){var d=this;return void 0===e&&(e=3e3),new Promise((function(v,S){var B=!1,T=d.listen({next:function(l){B=!0,T&&T.unsubscribe(),k&&clearTimeout(k),d.open(l.descriptor,e).then(v,S)},error:function(e){k&&clearTimeout(k),S(e)},complete:function(){k&&clearTimeout(k),B||S(new x.TransportError(d.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),k=l?setTimeout((function(){T.unsubscribe(),S(new x.TransportError(d.ErrorMessage_ListenTimeout,"ListenTimeout"))}),l):null}))},Transport.prototype.decorateAppAPIMethods=function(e,l,d){var v,S;try{for(var T=B(l),k=T.next();!k.done;k=T.next()){var x=k.value;e[x]=this.decorateAppAPIMethod(x,e[x],e,d)}}catch(e){v={error:e}}finally{try{k&&!k.done&&(S=T.return)&&S.call(T)}finally{if(v)throw v.error}}},Transport.prototype.decorateAppAPIMethod=function(e,v,S,B){var T=this;return function(){for(var k=[],U=0;U<arguments.length;U++)k[U]=arguments[U];return l(T,void 0,void 0,(function(){var l;return d(this,(function(d){switch(d.label){case 0:if(l=this._appAPIlock)return[2,Promise.reject(new x.TransportError("Ledger Device is busy (lock "+l+")","TransportLocked"))];d.label=1;case 1:return d.trys.push([1,,3,4]),this._appAPIlock=e,this.setScrambleKey(B),[4,v.apply(S,k)];case 2:return[2,d.sent()];case 3:return this._appAPIlock=null,[7];case 4:return[2]}}))}))}},Transport.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",Transport.ErrorMessage_NoDeviceFound="No Ledger device found",Transport}();e.default=U}(Tc);const Nc=1<<31>>>0;function harden(e){return(e|Nc)>>>0}const _c=1,Mc=2,Rc=255,xc=224;async function send(e,l,d,v){let S=0,B=0;if(v.length>Rc)for(;v.length-B>Rc;){const T=v.slice(B,B+Rc);if(2!==(await e.send(xc,l,d,S|Mc,T)).length)throw new Tc.TransportStatusError(Tc.StatusCodes.INCORRECT_DATA);S|=_c,B+=Rc}const T=v.slice(B),k=await e.send(xc,l,d,S,T);return k.slice(0,k.length-2)}class LedgerWalletAdapter extends BaseSignerWalletAdapter{constructor(e={}){super(),this.name="Ledger",this.url="https://ledger.com",this.icon="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzUgMzUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0ibTIzLjU4OCAwaC0xNnYyMS41ODNoMjEuNnYtMTZhNS41ODUgNS41ODUgMCAwIDAgLTUuNi01LjU4M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5KSIvPjxwYXRoIGQ9Im04LjM0MiAwaC0yLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCAtNS41ODUgNS41ODV2Mi43NTdoOC4zNDJ6Ii8+PHBhdGggZD0ibTAgNy41OWg4LjM0MnY4LjM0MmgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDUuNzM5KSIvPjxwYXRoIGQ9Im0xNS4xOCAyMy40NTFoMi43NTdhNS41ODUgNS41ODUgMCAwIDAgNS41ODUtNS42di0yLjY3MWgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMS40NzggMTEuNDc4KSIvPjxwYXRoIGQ9Im03LjU5IDE1LjE4aDguMzQydjguMzQyaC04LjM0MnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5IDExLjQ3OCkiLz48cGF0aCBkPSJtMCAxNS4xOHYyLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCA1LjU4NSA1LjU4NWgyLjc1N3YtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDExLjQ3OCkiLz48L2c+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=Ue.Unsupported,this._disconnected=()=>{const e=this._transport;e&&(e.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null,this.emit("error",new WalletDisconnectedError),this.emit("disconnect"))},this._derivationPath=e.derivationPath||function(e,l){const d=j.alloc(17);let v=d.writeUInt8(4,0);return v=d.writeUInt32BE(harden(44),v),v=d.writeUInt32BE(harden(501),v),v=d.writeUInt32BE(harden(e),v),d.writeUInt32BE(harden(l),v),d}(0,0),this._connecting=!1,this._transport=null,this._publicKey=null}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Ue.Loadable)throw new WalletNotReadyError;let e,l,d;this._connecting=!0;try{e=(await import("../_/TransportWebHID.mjs").then((function(e){return e.T}))).default}catch(e){throw new WalletLoadError(e?.message,e)}try{l=await e.create()}catch(e){throw new WalletConnectionError(e?.message,e)}try{d=await async function(e,l){const d=await send(e,5,0,l);return new wc(d)}(l,this._derivationPath)}catch(e){throw new WalletPublicKeyError(e?.message,e)}l.on("disconnect",this._disconnected),this._transport=l,this._publicKey=d,this.emit("connect",d)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._transport;if(e){e.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null;try{await e.close()}catch(e){this.emit("error",new WalletDisconnectionError(e?.message,e))}}this.emit("disconnect")}async signTransaction(e){try{const l=this._transport,d=this._publicKey;if(!l||!d)throw new WalletNotConnectedError;try{const v=await async function(e,l,d){const v=j.alloc(1);v.writeUInt8(1,0);const S=isVersionedTransaction(l)?l.message.serialize():l.serializeMessage(),B=j.concat([v,d,S]);return await send(e,6,1,B)}(l,e,this._derivationPath);e.addSignature(d,v)}catch(e){throw new WalletSignTransactionError(e?.message,e)}return e}catch(e){throw this.emit("error",e),e}}}class TrustWalletAdapter extends BaseMessageSignerWalletAdapter{constructor(e={}){super(),this.name="Trust",this.url="https://trustwallet.com",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAyIiBoZWlnaHQ9IjQwMiIgdmlld0JveD0iMCAwIDQwMiA0MDIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8cmVjdCB3aWR0aD0iNDAyIiBoZWlnaHQ9IjQwMiIgZmlsbD0idXJsKCNwYXR0ZXJuMCkiLz4KPGRlZnM+CjxwYXR0ZXJuIGlkPSJwYXR0ZXJuMCIgcGF0dGVybkNvbnRlbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHdpZHRoPSIxIiBoZWlnaHQ9IjEiPgo8dXNlIHhsaW5rOmhyZWY9IiNpbWFnZTBfMTY5NF8xODk2NyIgdHJhbnNmb3JtPSJzY2FsZSgwLjAwMjQ4NzU2KSIvPgo8L3BhdHRlcm4+CjxpbWFnZSBpZD0iaW1hZ2UwXzE2OTRfMTg5NjciIHdpZHRoPSI0MDIiIGhlaWdodD0iNDAyIiB4bGluazpocmVmPSJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUFBQVFBQkFBRC8yd0JEQUFjRkJRWUZCQWNHQmdZSUJ3Y0lDeElMQ3dvS0N4WVBFQTBTR2hZYkdoa1dHUmdjSUNnaUhCNG1IaGdaSXpBa0ppb3JMUzR0R3lJeU5URXNOU2dzTFN6LzJ3QkRBUWNJQ0FzSkN4VUxDeFVzSFJrZExDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3ovd2dBUkNBR1NBWklEQVNJQUFoRUJBeEVCLzhRQUd3QUJBQUlEQVFFQUFBQUFBQUFBQUFBQUFBRUdCQVVIQXdML3hBQVpBUUVBQXdFQkFBQUFBQUFBQUFBQUFBQUFBUU1FQlFMLzJnQU1Bd0VBQWhBREVBQUFBZWtBQUFFRXhJaEloSWhJaEloSWhJaEloSWhJaEloSWhJaEloSWhJaElJRWdBQUFBQVFrQUFBQUFBQUFBQUFBQUFBQUFBQWlVRWdBQUFRa0FBQUFBQUFBQUFBQUFBQUFBQUFBQWlVRWdBRUVnQUFBQUFBQUFBQUFBQUFBQUFBQUFBQWlZa0FJa0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBUk1FZ2lZa0FBQUFBQUFBQUFQT29XVjduWFZWdXg5TXllWTNYTG8zSXo2QUFBQUFBQUFBRVNENUV6RWdBQUFBQUFCR0xNWmJSNmUydTVWK3BlT25QazR4cXpCTUFicTE4NlVYOVZjNzNlVFRhV3J6NmJmVWVmUUFBQUFBQUdPSmozbUppUUFBQUFOTlVQckE2Zk95Zm53WFZ6Qk1BZ0EyOXFvdXJtNjNyRnI1cGk5U3JlbWlvc2pIMVpnbUFQdjF4MFRrN0RUUFBycUhyWGJGeStpSGoyQUFBQmppWTk1aVlrQUFBQURtMkhuWVBZNVFzTVRYbCt5cUx1YzdMb0UxV1ZiZTVpaTRLN0FBSTArNWV2TksxWFNtaWpsVHArSGJYenhlNlpkVmppMnE0V1d1V1BsZElLclFBQUFNY1RIdk1URWdBQUFBYzYxK3kxdlg1YTMxQzIxMldnY3pvQUFBQUFBQUFPYTlLNW5yeTR3MzRycFlkRHZ1VjB3cXNBQUFBeHhNZTh4TVNBQUFBQnovVmJuVGRibUxWVmJONTlXOGN2b2dBQUFBQUFBT1lkUDVac3lmSTNZNzF1OVB1T1Qwd3JzQUFBQXh4TWU4eE1TQUFBQUJSOUZZcTcxZWFzVmQzaGVSeXVrQUFBQUFBQUI4OHM2ZHpIZGpEWms2RnM4SE80L1ZEejZBQUFBeHhNZTh4TVNBQUFBQlVxdmNLZjArYzIycHo3UEhSaHlPb0FBQUFBQUFCaGMzNkJ6L29ZUTFaK201RVR4dXFFU0FBQUJqaVk5NWlZa0FBQUFEUlVmb1hQZWpnZTNpMDBkVmVYcnhlcUNRQUFBQUFBTkRTTFpVK2x6M3Y0Ykc2cm9nNC9WQUFBQUF4eE1lOHhNU0FBQUFCNDh3NnJ6TGJreHh0eDlDMmRic25KNllWMkFBQUFBQUFValE1bUgxK1czMmh0dmoxYUJ5K2tBQUFBQmppWTk1aVlrQUFBQUJSYjFYYjZhWU9uenQzZXVXZE53YmZZWk5RQUFBQUFERnlxdlpYVWgxdVk2QlErbjQ5WDBNTzBBQUFBREhFeDd6RXhJQUFBQUR3OXlPV2ZOaHIzWDVpeTFvZFZWeXg4cm9oNTlnQUFBRHhRNXZtNnZwWUEwVWIrN1lHZnl1a0ZWb0FBQUFHT0pqM21KaVFBQUFBQU1mbkhUOVhvbzU4Ky9qcFlHOTBUelBUTW5sdG13N0xZOC9UTG9CSUJyYWpkVFphZGpOK01MYWxrd2I3azFmUXdiUUFBQUFBTWNUSHZNVEVnQUFBQUFBYTZqZEs4NzZlWExQV3VoaCtSNzhlOXRwYXF6cXJudTZ4Yk4vVWRMNTZzNGFNNHpZbkNzTzgzR0xYOC9SajFnQUFBQUFBWTRtUGVZbUpBQUFBQUFBQVl1VW1LUm9lcTYzWGw1NDJXdDI1UW55UHBQemtiKzFaZEdoc01zT3NQUHNBQUFBQUFBUWZEMElpWWxJQUFBQUFBQUFBRVZ1eXZmamxuejB2QjJaYWxkczM2elhoVGNBQUFBQUFBQUFpWUpBaVlKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFSSUFCRW9KQUFBQUFBQUFBQUFBQUFBQUFBQUFBaVlKQUFBQkVvSkFBQUFBQUFBQUFBQUFBQUFBQUFRRWdBQUFBQkNRUUpSSUFBQUFBQUFBQUFBQUFJSlFKaVFBQUFBQUFBQUErUkhpSkFBQUFBQUFBQUFBQWVub1FCSUFBQUFILzhRQUx4QUFBQVVFQWdFQ0JBVUZBQUFBQUFBQUFBRUNBd1FGRVRBeEVFQVNJRFFURkNGQklpUXpOV0FqTWxCd2dQL2FBQWdCQVFBQkJRTEhZV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVc1di9OTi81TGYrbC92L0FDVDcvd0FLazFOcGhTYTE5V0pEY2h2ckhvRjFsdUpiUk1xaW5PV1hsc09SS2kzSTY5d1d1bXBTVUprVmR0QWVrT3lGZW1OVTNXQXhPWWtkVTlsclBld1ZLWVFIS3RIU0hhdzZvT1BPUEhoWm55R1EzV2lDS2xGV0V1dHI2SjdMV09mUCtWSmN5UXMvbVh3YnpwZ3pNOEVXbHVQQitsTXVOdnhuWTZ2V1Mxa1BtSGg4eStJOVRmYVUyNGwxdkdleTFqbktOYzdDeFRYM2hHZ014dVZJU3RNaWpwTU94M1dEdzBaUm5HeG5zdFk1ZnZmU2xLbEczVHBMZ2FveEJtSXd4NnpJbEU5UzQ3Z2NvN3lRdUsrMTY2TCtqalBaYXh6ZmZjVTZFMUpiS2x4U0NZY2RBSWlJc3FtVzNBcW54VkE2VEZNU0VFMUk0bzN0OFo3TFdPZjcvaWkvcGRPWDd6aWplMHhuc3RZNmorNGNVWCszcHlQZGNVZjJXTTlsckhVLzNIaWlkUjM2dmNVbjJPTTlsckhWZmY4QUZGL1Y2YXZxcmlsL3QrTTlsckhWeS9POFVZL3pQU1VkazgwNHJVL0dleTFqckpmbWVLUWRwdlNmTzBmbUVWb09NOWxySFdpL0Z4VER0VU9sTk8wTG1PVm8yTTlsckhXaS9wY1FUOFozU3FSMnAvSkZaT005bHJIVnl2QzRhVjR2ZEtzS3RENFlUNVNNaDdMV09vcDhvSExTdk5ubzFwWDA0cDZmS2ZrUFpheHZKODJPYWN2emdkR3JyOHBuRklUZVprUFpheVNFZkRrOFVaeTdIUmxyK0pNNG9xUHdaRDJXc2xXYjhKdkZLZCtITTZFbDM0TWJtbXQvRGdaRDJXc2xZYThtT0VxTkMyWENlWnoxaC84QUR3MmczSEVwSktjaDdMV1I1c25tRkpOS3VLVEs4RlpublVzTlBPcWZlNHBEUG5KeW5zdFphdEg4SHVZRlNKd3NqcnFHVVRacXBhK1lVZjVhTmxQWmF5dnNwZlplYVV3N3pGcWJqSVprTnlFNFpWVGFZRDhoeVF2bWxSUE5lWTlsck5OaEpsTnJRcHRmS0ZxYlZHcTRRNGgxUHBrem1Zd2sxQjZSNllNRlVwYVVraE9ZOWxyUExoTnlreUl6a1pmb2FmY1lWRnF5SE9YcERjZEVtcU9PK3FIVEZPaEtTUW5PZXkxMEZvUzRpVlNESUtTYUZlaUxPZGpCK3NGNExjVTZ2MFI0ajBrNHRPYWo5STlscnBQeG1wQlNhVTYxaFpZY2ZWR3BLRUFpSWk2VnV0SmdzeVJKZ3V4dlNTVFVjV2tHWVEybHRQVCt3Ky9WTXJsTHBSS0NrcVFvUllUc280ME5xS25ybjJIb3pNZ0pwY1ZKa1JKTHJmZi9BSnd2M2I5Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN3bkwvQVAvRUFDY1JBQUlCQWdVRkFBSURBQUFBQUFBQUFBRUNBd0FSQkJBd01USVNJQ0ZBUVJSd0lsRlMvOW9BQ0FFREFRRS9BZjBhN2hONk03VkhNRzhIMWIyb3lxS2FjbmF0ODFtWmFXZFRRWUhiMEpKQ1RWejJKQ3pVSWxBdFR3RWNhMnp2UVlpa1BVTDZyYjBxbGpZVitPMUREajdTeHF1M1lWQjNvNGRmbEhEbis2ZU1wdmxGd0dxL0kxRHowc1JzTW8rQTFYNUdvZVkwc1I4eWo0alZsNW1vK1kwc1I4eVhpTldiblNjaHBZamxrTlhFY3RPZm5TK1RyWWdiSEtNM1VhTG03RTFFTHVOYVlYWExEdDR0b08zU3Q4c09QTjlkbDZUYWxicE42Vmd3dU8rV1RxOERLSmVsZGVXUHE4akpXSzdVazRQTHNlVlZwNUMrVU1kLzVIMFpJZzlNaFhmSkpDbTFDZFNQTlBNVzJ5QXZ0U1FmVzlNaTlQQi9taUNOODBnSjNwVkM3ZXN5aHQ2T0hQeWtpQ2ZvL3dEL3hBQWtFUUFDQVFNRUFnTUJBUUFBQUFBQUFBQUJBZ01BQkJFUU1ERXlFaUVnUUVFaWNQL2FBQWdCQWdFQlB3SC9BQTFJeS9GQzNURlNRRmZZK3FBVFN3dWFTMkE3VUJqVjRGYW10M0hGRlNPZm9SUmhWckErRHpxdE5NNU9hUzRCN1VEblhBb29wNUZPdmkyTjFlQlRNRUdUUnVWbzNSL0JUU00zSitDc1Y0b1hMRG1oZEQ5RkpLSDQwbTduZFRxS242YlZyeWRKZTUzWStncWZvZHExL2RKTzUzWXVncVhvZHExL2RIN0hkZzZDbjZuYXR1dWgzYlkveHQyNC9pbU9CbmV0VHlOSlJoenN4akNnVk1jSWQ2QnNQcGNyNzh0aU5mSnNhWFRlZ043aWtieUdhZGZNWU5NaFE0UHpoaThCazZTdjV0bmZobDhEZzhhTW9iMGFlM0k2L0JJV2VraVZOSjVjZnlQb3h6RlBWSTRmalI0bGZtbXQyQndLamdDODZFZ2MxSmNmaWZUQnh4U1hQNDFBZyt4ckpjQWVscG5MYy9XVnluc1VMbGNlNmttTC93Q0gvd0QveEFBM0VBQUJBUVFHQndZR0FnTUFBQUFBQUFBQkFnQURFUklRSUNFaVFGRXhRVkpoY1hLQkV5TXdVR0toQkRJemtaS3hRb0tBa1BELzJnQUlBUUVBQmo4Qy93QkMwcVIyaXR6WG5ObTR0TTdNZkw1bHFDUXhRNXVvejFtbWQyWUZwVlhIbVdmbGtWRUFiMmc1RTV6MU5GNHFOYVZmZUkzNld1cmdySStUM255UHUxMlpmQU4zYVFqM2FMeFpWeDhLeGNSa3ExdTlkZFV0OVNYaTExYVZjRGpwVTJ2RDdORXZsOURCdnJQUHlhMTR2N3RhZkFtZTkyajNMQU8rN1VHZzhURGZxUGdXS0k2dDlWZjVOOVo1K1RYMWRvbmV3V2d4QnhMMG5haDRVU096VG1wb3dtWHRHbVZRQkJ6YUxoVXZwTFFlSUtmQ1duSldKZmN4clFTQ2VEZlRsNXJHNzE1MFMxeDJBYzY4Q0lockIyWjlMWEZKWDdOZmRLSFN1ODVzUzk1cVZLZVJzT3B2a2oxYXh5ajdOWUllTmZkcFZ4RGZSSFJ0Q2gxWjRoT2hKaFN2bXhMM2pTOTQ0Ujl6bWxmUGlYdEwzcGhIdk1hVHo0bDUwL1ZMN3BoRjh4cC9zY1NyZ0tYdkRDRTBvNjRrY3RLeDZjR1RVZGY5cnhLRDZhZUtjRzhQcE5SMXk0bHllTktOOGYxZzMzTFVkREpJeExzNzZYWE5nM25UOTFBTXNUSEpWS0ZaS0J3WUdhcVhhYzFERlBmdlVRck1Sd1RwUEUwdWh2amlscHpTUlVkN3JNRkxzcHBKMlU0dDRqSlZLMFpHT0NlcTMwdlY5TVhOdGlOTXVwWWhnVnZNaFVSNnJjV2w1c0drS0drV3NsNG5Rb1lCTGtjVFNsQTBxTUdDUm9GbUxXN1A4Z3hTZElwN0Jac1Y4dmpsNHMyQmxQRmFUU1hoMEkvZU43WWZLdlR4cUIwK01GNmpuNHBXdFVBMlRzYUJVU2orV2s0MVR0V2dzWGE5SXFCTHkrajNEVE8xUjhLVkhlTDltbWVLalU3ZFl1ajVjZms4R2dzVUxFQ0treUZGSjNNRS9FRCt3YVpDZ29icTBDWmxiSWFFWkVaQ3JFMk9ocExCS1JBRHlDMnhlcFRRZUo2MVpuYWlscFgxeFdlcW1aNHFEU3V1N1Q3MWd0OWRSbHJMQktSQUR5S1ZhUW9NVmZEMmpaTFFVQ0R2cXdqTWpaTGR5bThkclUweTFGUnEzRTJablEweHZyelBrMEhpWTcybWRkNG4zOEdWMmtxYVo4WnpscWFBRUI1VEVpQzlvTkVpS05vVllKRVMwM3hGbnBEU29TRWpkNVpBdFA4QUQzVHN0S29RSW91aUNkb3RkRVZiUjh3N3hFZDdSbEo0bG9KRUIvbkovOFFBS2hBQUFRSUVCQVlEQVFFQkFBQUFBQUFBQVFBUklURmhjUkF3UVZFZ1FJR1JvYkZRNGZEQjhkSC8yZ0FJQVFFQUFUOGh5Q1FFNTI3cGp1bUtnRlFDb0JVQXFBVkFLZ0ZRQ29CVUFxQVZBS2dGUUNvQlVBcUFWQUtnRlFDb0JVQXFBVkFLZ0ZRQ1ltcVZHNlpia0NXVVRPQ0FiNEpta24zaG11OHBib0J2aG9pb1U4cncrSmJVSUY4ancrTEkxRTBJOFJpVzcvR21CZnZ3a3NnR0h4d2hEZ203YjQ4K3NTV0NBWWZJQ0RqQXlmSW1Zd0V6ekI4WUdZSmdPcSsvbFFGV28xRitaSk9XTmhEcVZHWElQNk5pSE1ieW1kamNTczVjQUFGSjVRb0hjeVRCT0Zab2ZaUEg3Um9PbkVPRmlLQ3hUUUJFcG5sWmlrMjVBZ0RrZ0NxbDRwR1U3eE5nZVU1Z2Z1WWs4UjFaVE9Eam9FWkFncVA0SzBtV3drTHduQjVHYmRTYlpnQkRBcnhrRzY4UFFlRi9wRk5GYzBSY2h2a05EMngrR1FnV0xBemU2Y2MyQjREa2VGNUFHUStwZjZSQVFKcWlNOUNtbmpjWmsyNmsyek5FUXV5R1RNcHY3a095WmcvWmh0aVp6YkFFOHZuUjdxOFdhSHJsRkJLRjFHWk51cE5zeUg4VWVKMUYyQjFxME4wQk1YNkg5SzZqQkU5K001Q0pNRUozSnV5N0o2SW51VW9MZUlkK01JOUhyTW0zVW0yWURYV01ieTJITXAwZDVyMzJkN1RLRUd3R2Q0b2txYkJ1STlLUVdpdTFQUWZIOTlNeWJkU2JaZ05peWhVK3VVSi8weHhDSlY2R1pOdXBOc3dHdUQwTVRoMS9ybERjbS91eEJxcGVobVRicVRiTUJxdjhNU2lQN1BsRGQ3K3pFV0d1WVRicVRiTUZxM294S0J1SEtGVkRpTFZEN1prMjZrMnpHaWJpZkp4dlova2NuUVFQd05LaFBsbVRicVRiTXZKdms0d0hjSHJrNkhFOGNEUm9PWk51cE5zeThRSHJHMHdlWEp1YXNjRkRWNHpKdDFKdG1PN2N4NCtzWFRRTzhPVHZ4bmhpQTVZS2xCc3liZFNiWmpmc2o3R1A2NkR5ZEJNZURqUWdlYzJiZFNiWmpHMkE3RHdVWi9Ea3V2eWVNYUVlQVBtemJxVGJNL053T0J5Nmg0bHVTYWRnUDdqWDBQOEFNMmJkU2Jac0FHZUFzK01ZNCtkL25KYThnbUJZUXhZM0pBL3V1Yk51cE5zMXgwQi9qK1l0SkdLNjVqa2Q3b1Y5T0NNSnVQcjlObXpicVRiTmFlYkJzY1Rqc2NBYXJWMEZ1UWFMeFAxNHlDUUNsT0lETm0zVW0yYkxRWXNnSXNSaU1RbGFFY2pvZHM5bVFQdlJUd0Y3WXN5Z3d1L0hPbTNVbTJjY1lmU3hTSzBNUVdYM3pRRWg2bFFDL3dEdHppQVNXRVNuRW03dWROdXBOczZRaXoyTzZEWXhlOWVBYTZHaHFzZFJxTGpLY0dOZ0dDNVZqQU5CYmdza1IxTytmTnVwTnM5NUJoZnFLT2hoaUR3QW9CMUprVVJFZnR3aGtvNmx4T25kcjEyVHZHUDJUcndnSXlSY29FT2dFd0EwejV0MUp0eUdnOUkwVUdRYUJJOEwxWlNSVEdJZDUvNGdRUTRMZzROUmpvTlRaUDdubGY4QUZNOEo0TXpoK2pJZEFaZ0JweUUyNmsyNUUrTU13VTRyVWVqMEtMQlhNQXg0UzREOFNHeVp3ZGlKL0RvME9PcDRlcXJDQk05bklDdzVLYmZsQm5zdEpDT3FlYkNKZW1xSUlMR0J5SE96WFlKbm92Si8xQVFBSkFjbkhIZENaNVVTZTZqN1J1aXBIMXdpNWhwQUJ5VXdtWjF1cFF1QWRBNVF6S1FYdHl3Q0FCQjBLZjJOWFNiYkk3TG5nY0pCT2NqN1U0Uk9ZZVdPZ3drNWdaQ01Ta0k2cDBxV0NoOFFVZ0F3SExpSkhFUWg4ZVN3UURERTc3Zkh6TnVHUnA4YWRoTlNIRE5EWS9Ga3NnTy9HUTZCME0vaVNXUUdwbmtrT25hZmY0ZDlCTkFkOHhtbDJUN3crRGRsRTBVczl0aW5PbzdKbS9PczNUN0JNVE05a0EzS0FBSktvVlVLcUZWQ3FoVlFxb1ZVS3FGVkNxaFZRcW9WVUtxRlZDcWhWUXFvVlVLcUZWQ3FoVlFxb1ZVS2luSE4vOW9BREFNQkFBSUFBd0FBQUJEenp6UlR6enp6enp6enp6enp6enp6VHp6enp6eVJ6enp6enp6enp6enp6enp6enp3elR6enlUenp6enp6enp6enp6enp6enp6enp5anp5aHp6enp6enp6enp6enp6enp6enp6enp4end6enp6enp6enp6enp6enp6enp6enp6enl6enp6enp6enp6enp6OVBmenp6enp6enp6enpEenp6enp6enp6UW9NTU9EN0h6enp6enp6ekx6enp6enl1QUFNTTkrNHNNUE9MM3p6enp3THp6enp6eUVJV1kzenp3MjAwd1A4QTg4ODg4Qzg4ODg4OEtRODg4ODg4ODg4NkQwODg4ODhDODg4ODg4cUU4ODg4ODg4ODhyRGQ4ODg4OEM4ODg4ODhxRzg4ODg4ODg4OGdEVzg4ODg4Qzg4ODg4OGpTODg4ODg4ODg4SkdWODg4ODhDODg4ODg4cEEvODg4ODg4ODhDSDg4ODg4OEM4ODg4ODhNRDE4ODg4ODg4OEpIODg4ODg4Qzg4ODg4OG9EYjg4ODg4ODg1REQ4ODg4ODhDODg4ODg4L0NDLzhBUFBQUFB3UjkvUFBQUFBBdlBQUFBQUE9DQWZ0L1BPOEF5dlBQUFBQUEF2UFBQUFBQUERqUTQwcUF4VDNQUFBQUFBQQXZQUFBQUFBQUExmUUF3RGovQUR6enp6enp6elB6enp6enp6enp6eTJLL3dBODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODhFODhVODg4ODg4ODg4ODg4ODg4ODg4ODg4MGM4OHN3ODg4ODg4ODg4ODg4ODg4ODg4OHM4ODg4ODhjODg4ODg4ODg4ODg4ODg4ODhFODg4ODg4ODg4akJCQkJCQkJCQkJCQkIvOEFQUFBQUFAvRUFDWVJBUUFDQVFNRUFnSURBUUFBQUFBQUFBRUFFU0VRTURGQVFXRnhJS0ZSY0lHUnNmRC8yZ0FJQVFNQkFUOFEvUm8xd2xzYW5ZQjZWSEpuZjc5VEdHb3FyZGNRNUp5V0p5UytnYmw0SjV2aGtPQ1k0dVpUSWlLcDFFY01Xc1pTL251OHZ2U1FkeElMbE9BZkF1aGNaeXFkbkExNzZmWVp4ZFRKajdtZjhQVzF4L2xwOUxkRlFkYlE4ajNvYUR3YnBwUlVuazJuZ2VOQlFHNktMNGcwM0JzdlpWcnhCU2VlZ2l4YlB1amZoZjhBak9saS9IWXVORjYzcUNVeGxVY3g4OUNnV3k3MkRTbUhuZnI5d2lWaGlGcVlUQitvSTVOY0x5emx1UHhvNjdIUTVRd3h1aG9sbGlYREJtT3dORVZDVmY0empvZ0ZNRnovQUVqdEN0Y2ppZmNIbzdWYmg5Q1djc1ROY3Y2UC84UUFKaEVCQUFJQUJRUURBQU1CQUFBQUFBQUFBUUFSRUNFd01WRkJZWEdoSUVDeFlIQ0I4UC9hQUFnQkFnRUJQeEQralg2MmN3bEV1ZFpUNnV3RnpvdGVabVN1QUtESE16Sm5LcHM1UG9ER3JXZHI0WkdOc3BScVpabGZVQVdPS201Q2FoZGNkWDFpZE1VSHNNYjB2aTR0YnFiVUdkU1I5TmZ2V0p2L0FPZnVsNldIdmFydndrRi85ZGRJNXJ4Zzc4anF1L0ZEZmkwaGt2R0N0TzdxdS84QWI5aHN1enBITTk4RmF1cmNqaGlXVkVwclJvTHpMbmdmUUNtZDlIdzVyeXF1K1dGWUhYUXI4RkhKMWhWWkJNOVlLeXFEOGdWb25NRGhjamJwcjh3SU41a0hwdVovbVBjUkduSFBOam1iVHZ6Z1o2N3Y5SFAyWkJyZUJPVFBtYmtEbVp2bmNBYlZFdjhBMG0vMGtWcW1NZnJEYkxNZXJqNmpkdTlLOVJxMk95RzVrZXh4L09qV2ZuLy94QUFxRUFFQUFRSUNDUVVCQVFFQUFBQUFBQUFCRVFBaE1hRVFNRUZSWVhHQmtmRWdRTEhCOEZEUjRmL2FBQWdCQVFBQlB4RFVXUmI3akdwY0ljMVNZdm9SVzhsNXJYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4Vlc0STVNVk13NjE2azRoeVdva2hsYm4yQXFNWGNWR0lodVA5b0JZaitDZ2tKSlU4V09EY292Z1N5ZGJMZGZpMUJnUDRxQ1FralVZTTdqYVVJSkdUVXFCS3dGUTNOdHpmei9rcUhBZHB2b0JicWJ0UVhTNE1PUEgrV2srUlNCSjZ1U0g0ZnpjRndmeDlNUzJMWXF3ZnpyeTlsemw2QzVzV0gzL0FEemFURzRvUkJMam9tVXgyYzZnRGQvUXZibTV5MFhCdXY4QTBiRzMyZEZ6OVAzZjNDUERpWWU1dXZ5R2tTUU51ekE1SmZ1VUV2MkVJWGNObnQ4UjJsKzJqYTcxYy9iWTJvM2c1Y1hoUXEzWE5nNGJtZkxEU2tXeWRvTnliU2pIcXRKZTR2cHZ6OXVSTGNJcktudE1KS2lCMWFMZkd3YUw4NU9kVHFSd2VXTEhxa2dDeFlQNHN6MG9NQlByelk5RjlyTEQydFpWN0JxTllxZ281a1RFRHNGNkhFWmg4aEJ5bzVXNFd2dkJrMWNsTWtxSEl3T21xSi94d2k5em9sRkN2YkRaSHpRUkRPNXZXSXpvc3VtSDBqN0hPcXlyV1JXNkRxVGZ3T0hkS1V1eFE2UUsvYi9kRHdMeFgzVW9EdlUrc0ZZTHRQRmJjUkJjQndjWHRRVVlReU9YdDU0MHpPTEY5eFBveDFHelgzeDhWa3JIOTErMys2ZHgwblFtL0VubkpWMll6OVBFYmF6T3F5cldNVEtUd0xHUnFRUUFWYkFWZkNkZ2lPR042d2NhTWhyWVNqd1lmTGpwTGUwU2cxdkhHUlh5eEhXZVpVMkU0SW5rQ3ozMVN0ek80UUpPNVBYV1oxV1Zhd29IZjV2VURXOXBYWXBzUlBhRU9qZktuRmQrRWZqaFJBbE5sUDFYN2VzSW13TWljUnBGZWJWaTVyZG9wM1laRmw2TnM2ZVlWak4yRW5yNWtEV002ckt0WVFUZjU2UmZaQ2hSQTdxL08zNEpTUXlEQk5uV1ZGaVhBUVphNmF1TzFqTXFSbUg4S0tZZXJuM05PUXBKU3dPM1NTZmF3eTZ6T3F5cldRQ0l2ZTRhWnQwWDg2ZTBCWnVzK21MZkEvZlBXWjFXVmF5RzhidTJtYmQzN24rUGFZM1hkK2ZUTU41eWZyV1oxV1ZheTJON3B1YlJlMDdkWkdNN1dtVWJ4OEgxck02ckt0WktONitIMXBqM3Q5bC8zMmwwcGxjOU1vakhaejYxbWRWbFdzL1djSDFwZzN4N1A5dlo3S3ArdzlIR0R1ays5Wm5WWlZySWZISCsybWQ4bVgxN1B4ano5SEZydkwvZXN6cXNxMWtjVDZaWDNwanV4RHVmWHM3cVJQZEVmZm90NUdUSFdaMVdWYXkwKzJlY3RLNjhUK0p6OW54M0Y2L1JPbERDVllDakp3QWREV1oxV1ZhenlnNTltbTlrWERrSDJkeTd3WEFUNk5OaUp0dk1HdHpxc3Exa0tsek9nL0I2TGd6ZnQ4aCsvWlFCY1F1VUQ1ZE5ucGw3ajZhM09xeXJXUitTa2RVZWlWMlVyaElNZzlsRVRaZzRxL0JOTStscGJpcDhGMXVkVmxXdGUzQVRtUmxHa0c3RVRnSStWMzlrWmpJamZZWkJwbkV4NXlGZmhyYzZyS3RiQVJFejJTWGZCNjZUaHJnQ0grQ2RmWWhKUW5yMnpKU3F5M2RMUVVkOUxaTmF6cXNxMXJuWit6dmNPK25oWXJJTWxZSlFKdmJUb3lkUFlIYzFpTmdXSGVYb2FjMVlCWW9HNENOd0VHdHpxc3ExcmhRc3U5c2VqRDBwTGJ6c1JHRTAzOENCYmE5V3pqejE5eTFFYlZzSEZwRDlqVFlZQWNBZzAzVU1lMnlCMkpkdGRuVlpWcnRpMW9iRSt3bm1Pa1VFVVM0bEFaSFlYQVhaOHVldHhlejRpN2cydkNqb0VMbUw5bnhtNkFRS01BWFZvekppNXY0blFnNmE3T3F5clhCMWdBRjlrT0kxWkVwT3diQndmUWFka0ZiWEJjVGc5eW9LTkd3ZmRpR3FscU8yS2Z4WXlwUzVtSFk5dzJmUG9jcnZzTVA0SHp5MStkVmxXdkpZb0hCUGkrTzhwWU9HdWZ0L293UWdzUjJwelloQmM0N1RtZHF3c3VURGs3bmg2aDRaTFhPcGgxWDRVWTJCVFluYytIRDA3cUZybVptOTJVR2RRMEFOZm5WWlY3QzBrV0RTOENiVGgycVRSSGJ1Vy9XUHBCYlNSZEJNSHJTRFJzSE1tL1ZialFNQUpFWkUwVFlEaXZ1R0xVZmxrS052aS9BNzBxaXFyZFgwOEZCUVAweithZ3ppZUFld3pxc3E5amdxamNsU1EzbFlPRzA1TitMVFRsaFFPWStsMnhOMnNjMjFsd3JFZXdWbnVBeFpjNnhwaHZMeTRIRDB4RjRNWm9iWGdTMDRBSzVlT1J6dSt5MzNhcXdHNjNzNENjUUhaaS9UQ3BTSlhnc2NmbzdVaUJCaEVoSFVRd25FRWN4YkZObURmQWJqdHlIQ2piREFZQTRIc3drNTFXanVaOXJaUjFyZlZzSFB1VS9GTkYzMUdLNTkzMHNkdUZrY0FvcGw3aVhmQnlMOFNzRE9FUS82OGZhT0VNWXRRUUJnV3BzWGNqOW43WU1MUWhJbERHdVZHT2UydUdIS2xHWkE0UjBTT1pRYXpnYjNBNnhVTWpVRW5oRzQ0R2Z0cjNlTTl2eG9HSXhMME1rbUQ3Y1dERUJQSkMvU2pjSFpGUFlSUFdqTzNBd09BZTM0QUxIMys0YWJ6dTRjdjU5NEx1QnpxQU5KYkRITVVJZ2x4L25HUHNzT2ZwTUxhdzRPNythM0V1eU45QUFHQjZVQkRoU1IybXgzL3dBdUJoSzRHK29MdDFpK3NCR0c1M1VrNEh5L2toeExnYjZTY1JaYWtCRFV0K2ZsL3dDTzN3VGtLZ3VzcmJySjduaXcvd0NVR1lFdHp0L2hvc2NkMjJveGJOeGpRQWdJTmNna0pKVXpFT0RjcURhOFZXOWh6dDcxRmhFN3FtNHJ6dFc0QnUvMVFZQ1BhS1VBN3dwdmZOWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxVjQrYWdHUjFYb0FJQURXZi9aIi8+CjwvZGVmcz4KPC9zdmc+Cg==",this.supportedTransactionVersions=null,this._readyState=Ue.Unsupported,this._disconnected=()=>{const e=this._wallet;e&&(e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new WalletDisconnectedError),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState,Ue.Unsupported}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Ue.Installed)throw new WalletNotReadyError;this._connecting=!0;const e=window.trustwallet.solana;if(!e.isConnected)try{await e.connect()}catch(e){throw new WalletConnectionError(e?.message,e)}if(!e.publicKey)throw new WalletAccountError;let l;try{l=new wc(e.publicKey.toBytes())}catch(e){throw new WalletPublicKeyError(e?.message,e)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=l,this.emit("connect",l)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(e){this.emit("error",new WalletDisconnectionError(e?.message,e))}}this.emit("disconnect")}async sendTransaction(e,l,d={}){try{const v=this._wallet;if(!v)throw new WalletNotConnectedError;try{const{signers:S,...B}=d;e=await this.prepareTransaction(e,l,B),S?.length&&e.partialSign(...S),B.preflightCommitment=B.preflightCommitment||l.commitment;const{signature:T}=await v.signAndSendTransaction(e,B);return T}catch(e){if(e instanceof WalletError)throw e;throw new WalletSendTransactionError(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signTransaction(e){try{const l=this._wallet;if(!l)throw new WalletNotConnectedError;try{return await l.signTransaction(e)||e}catch(e){throw new WalletSignTransactionError(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{const l=this._wallet;if(!l)throw new WalletNotConnectedError;try{return await l.signAllTransactions(e)||e}catch(e){throw new WalletSignTransactionError(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{const l=this._wallet;if(!l)throw new WalletNotConnectedError;try{const{signature:d}=await l.signMessage(e);return d}catch(e){throw new WalletSignMessageError(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}function isWrappable(e){return null!=e&&"object"==typeof e&&(Object.getPrototypeOf(e)===Object.prototype||Array.isArray(e))}function setProperty(e,l,d,v){e[l]!==d&&(void 0===d?delete e[l]:e[l]=d)}function mergeStoreNode(e,l,d){const v=Object.keys(l);for(let d=0;d<v.length;d+=1){const S=v[d];setProperty(e,S,l[S])}}function updatePath(e,l,d=[]){let v,S=e;if(l.length>1){v=l.shift();const B=typeof v,T=Array.isArray(e);if(Array.isArray(v)){for(let S=0;S<v.length;S++)updatePath(e,[v[S]].concat(l),d);return}if(T&&"function"===B){for(let S=0;S<e.length;S++)v(e[S],S)&&updatePath(e,[S].concat(l),d);return}if(T&&"object"===B){const{from:S=0,to:B=e.length-1,by:T=1}=v;for(let v=S;v<=B;v+=T)updatePath(e,[v].concat(l),d);return}if(l.length>1)return void updatePath(e[v],l,[v].concat(d));S=e[v],d=[v].concat(d)}let B=l[0];"function"==typeof B&&(B=B(S,d),B===S)||void 0===v&&null==B||(void 0===v||isWrappable(S)&&isWrappable(B)&&!Array.isArray(B)?mergeStoreNode(S,B):setProperty(e,v,B))}function createStore(e){const l=Array.isArray(e);return[e,function(...d){l&&1===d.length?function(e,l){if("function"==typeof l&&(l=l(e)),Array.isArray(l)){if(e===l)return;let d=0,v=l.length;for(;d<v;d++){const v=l[d];e[d]!==v&&setProperty(e,d,v)}setProperty(e,"length",v)}else mergeStoreNode(e,l)}(e,d[0]):updatePath(e,d)}]}function p(e){let l=e.get(),[d,v]=function(e){let[l,d]=createStore({value:e});return[()=>l.value,e=>{let v=l.value;return"function"==typeof e&&(e=e(v)),d("value",(S=e,e=>{if(!isWrappable(e)||!isWrappable(S))return S;const l=Object.keys(S);for(let d=0,v=l.length;d<v;d++){const v=l[d];setProperty(e,v,S[v])}const d=Object.keys(e);for(let l=0,v=d.length;l<v;l++)void 0===S[d[l]]&&setProperty(e,d[l],void 0);return e})),l.value;var S}]}(l),S=e.subscribe(v);return Q((()=>S())),d}var src=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var l=new Uint8Array(256),d=0;d<l.length;d++)l[d]=255;for(var v=0;v<e.length;v++){var S=e.charAt(v),B=S.charCodeAt(0);if(255!==l[B])throw new TypeError(S+" is ambiguous");l[B]=v}var T=e.length,k=e.charAt(0),x=Math.log(T)/Math.log(256),U=Math.log(256)/Math.log(T);function decodeUnsafe(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var d=0,v=0,S=0;e[d]===k;)v++,d++;for(var B=(e.length-d)*x+1>>>0,U=new Uint8Array(B);e[d];){var O=l[e.charCodeAt(d)];if(255===O)return;for(var F=0,P=B-1;(0!==O||F<S)&&-1!==P;P--,F++)O+=T*U[P]>>>0,U[P]=O%256>>>0,O=O/256>>>0;if(0!==O)throw new Error("Non-zero carry");S=F,d++}for(var D=B-S;D!==B&&0===U[D];)D++;for(var W=new Uint8Array(v+(B-D)),j=v;D!==B;)W[j++]=U[D++];return W}return{encode:function(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===l.length)return"";for(var d=0,v=0,S=0,B=l.length;S!==B&&0===l[S];)S++,d++;for(var x=(B-S)*U+1>>>0,O=new Uint8Array(x);S!==B;){for(var F=l[S],P=0,D=x-1;(0!==F||P<v)&&-1!==D;D--,P++)F+=256*O[D]>>>0,O[D]=F%T>>>0,F=F/T>>>0;if(0!==F)throw new Error("Non-zero carry");v=P,S++}for(var W=x-v;W!==x&&0===O[W];)W++;for(var j=k.repeat(d);W<x;++W)j+=e.charAt(O[W]);return j},decodeUnsafe:decodeUnsafe,decode:function(e){var l=decodeUnsafe(e);if(l)return l;throw new Error("Non-base"+T+" character")}}};const Uc=getDefaultExportFromCjs(src("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"));let Ac=[],Oc=0;let Cc=0,atom=e=>{let l=[],d={get:()=>(d.lc||d.listen((()=>{}))(),d.value),lc:0,listen:e=>(d.lc=l.push(e),()=>{for(let l=Oc+4;l<Ac.length;)Ac[l]===e?Ac.splice(l,4):l+=4;let v=l.indexOf(e);~v&&(l.splice(v,1),--d.lc||d.off())}),notify(e,v){Cc++;let S=!Ac.length;for(let S of l)Ac.push(S,d.value,e,v);if(S){for(Oc=0;Oc<Ac.length;Oc+=4)Ac[Oc](Ac[Oc+1],Ac[Oc+2],Ac[Oc+3]);Ac.length=0}},off(){},set(e){let l=d.value;l!==e&&(d.value=e,d.notify(l))},subscribe(e){let l=d.listen(e);return e(d.value),l},value:e};return d};let on$1=(e,l,d,v)=>(e.events=e.events||{},e.events[d+10]||(e.events[d+10]=v((l=>{e.events[d].reduceRight(((e,l)=>(l(e),e)),{shared:{},...l})}))),e.events[d]=e.events[d]||[],e.events[d].push(l),()=>{let v=e.events[d],S=v.indexOf(l);v.splice(S,1),v.length||(delete e.events[d],e.events[d+10](),delete e.events[d+10])}),onSet=(e,l)=>on$1(e,l,2,(l=>{let d=e.set,v=e.setKey;return e.setKey&&(e.setKey=(d,S)=>{let B;if(l({abort:()=>{B=!0},changed:d,newValue:{...e.value,[d]:S}}),!B)return v(d,S)}),e.set=e=>{let v;if(l({abort:()=>{v=!0},newValue:e}),!v)return d(e)},()=>{e.set=d,e.setKey=v}})),computedStore=(e,l,d)=>{let v,S;Array.isArray(e)||(e=[e]);let set=()=>{if(S===Cc)return;S=Cc;let d=e.map((e=>e.get()));if(!v||d.some(((e,l)=>e!==v[l]))){v=d;let e=l(...d);e&&e.then&&e.t?e.then((e=>{v===d&&B.set(e)})):(B.set(e),S=Cc)}},B=atom(void 0),T=B.get;B.get=()=>(set(),T());let k=set;var x,U;return U=()=>{let l=e.map((e=>e.listen(k)));return set(),()=>{for(let e of l)e()}},on$1(x=B,(e=>{let l=U(e);l&&x.events[6].push(l)}),5,(e=>{let l=x.listen;x.listen=(...d)=>(x.lc||x.active||(x.active=!0,e()),l(...d));let d=x.off;return x.events[6]=[],x.off=()=>{d(),setTimeout((()=>{if(x.active&&!x.lc){x.active=!1;for(let e of x.events[6])e();x.events[6]=[]}}),1e3)},()=>{x.listen=l,x.off=d}})),B},computed=(e,l)=>computedStore(e,l);const Fc=/^(?:[a-z0-9]+:)?\/\//i,Lc=/^\/+|(\/)\/+$/g,Pc="http://sr";function de(e,l=!1){const d=e.replace(Lc,"$1");return d?l||/^[?#]/.test(d)?d:"/"+d:""}function pe(e,l,d){if(Fc.test(l))return;const v=de(e),S=d&&de(d);let B="";return B=!S||l.startsWith("/")?v:0!==S.toLowerCase().indexOf(v.toLowerCase())?v+S:S,(B||"/")+de(l,!B)}function on(e,l){return de(e).replace(/\/*(\*.*)?$/g,"")+de(l)}function ut(e){const l={};return e.searchParams.forEach(((e,d)=>{l[d]=e})),l}function sn(e,l,d){const[v,S]=e.split("/*",2),B=v.split("/").filter(Boolean),T=B.length;return e=>{const v=e.split("/").filter(Boolean),k=v.length-T;if(k<0||k>0&&void 0===S&&!l)return null;const x={path:T?"":"/",params:{}},u=e=>void 0===d?void 0:d[e];for(let e=0;e<T;e++){const l=B[e],d=v[e],S=":"===l[0],T=S?l.slice(1):l;if(S&&Ie(d,u(T)))x.params[T]=d;else if(S||!Ie(d,l))return null;x.path+=`/${d}`}if(S){const e=k?v.slice(-k).join("/"):"";if(!Ie(e,u(S)))return null;x.params[S]=e}return x}}function Ie(e,l){const n=l=>0===l.localeCompare(e,void 0,{sensitivity:"base"});return void 0===l||("string"==typeof l?n(l):"function"==typeof l?l(e):Array.isArray(l)?l.some(n):l instanceof RegExp&&l.test(e))}function an(e){const[l,d]=e.pattern.split("/*",2),v=l.split("/").filter(Boolean);return v.reduce(((e,l)=>e+(l.startsWith(":")?2:3)),v.length-(void 0===d?0:1))}function dt(e){const l=new Map,d=ne();return new Proxy({},{get:(v,S)=>(l.has(S)||he(d,(()=>l.set(S,re((()=>e()[S]))))),l.get(S)()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),ownKeys:()=>Reflect.ownKeys(e())})}function ft(e){let l=/(\/?\:[^\/]+)\?/.exec(e);if(!l)return[e];let d=e.slice(0,l.index),v=e.slice(l.index+l[0].length);const S=[d,d+=l[1]];for(;l=/^(\/\:[^\/]+)\?/.exec(v);)S.push(d+=l[1]),v=v.slice(l[0].length);return ft(v).reduce(((e,l)=>[...e,...S.map((e=>e+l))]),[])}const Dc=se(),Wc=se();function un(e,l=""){const{component:d,preload:v,load:S,children:B,info:T}=e,k=!B||Array.isArray(B)&&!B.length,x={key:e,component:d,preload:v||S,info:T};return gt(e.path).reduce(((d,v)=>{for(const S of ft(v)){const B=on(l,S);let T=k?B:B.split("/*",1)[0];T=T.split("/").map((e=>e.startsWith(":")||e.startsWith("*")?e:encodeURIComponent(e))).join("/"),d.push({...x,originalPath:v,pattern:T,matcher:sn(T,!k,e.matchFilters)})}return d}),[])}function dn(e,l=0){return{routes:e,score:1e4*an(e[e.length-1])-l,matcher(l){const d=[];for(let v=e.length-1;v>=0;v--){const S=e[v],B=S.matcher(l);if(!B)return null;d.unshift({...B,route:S})}return d}}}function gt(e){return Array.isArray(e)?e:[e]}function wt(e,l="",d=[],v=[]){const S=gt(e);for(let e=0,B=S.length;e<B;e++){const B=S[e];if(B&&"object"==typeof B){B.hasOwnProperty("path")||(B.path="");const e=un(B,l);for(const l of e){d.push(l);const e=Array.isArray(B.children)&&0===B.children.length;if(B.children&&!e)wt(B.children,l.pattern,d,v);else{const e=dn([...d],v.length);v.push(e)}d.pop()}}}return d.length?v:v.sort(((e,l)=>l.score-e.score))}function fe(e,l){for(let d=0,v=e.length;d<v;d++){const v=e[d].matcher(l);if(v)return v}return[]}let Vc;function gn(e,l,d,v={}){const{signal:[S,B],utils:T={}}=e,k=T.parsePath||(e=>e),x=T.renderPath||(e=>e),U=T.beforeLeave||function(){let e=new Set,l=!1;return{subscribe:function(l){return e.add(l),()=>e.delete(l)},confirm:function(d,v){if(l)return!(l=!1);const S={to:d,options:v,defaultPrevented:!1,preventDefault:()=>S.defaultPrevented=!0};for(const B of e)B.listener({...S,from:B.location,retry:e=>{e&&(l=!0),B.navigate(d,{...v,resolve:!1})}});return!S.defaultPrevented}}}(),O=pe("",v.base||"");if(void 0===O)throw new Error(`${O} is not a valid base path`);O&&!S().value&&B({value:O,replace:!0,scroll:!1});const[F,P]=ae(!1);let D;const[W,j]=ae(S().value),[z,Q]=ae(S().state),K=function(e,l){const d=new URL(Pc),v=re((l=>{const v=e();try{return new URL(v,d)}catch{return console.error(`Invalid path ${v}`),l}}),d),S=re((()=>v().pathname)),B=re((()=>v().search),!0),T=re((()=>v().hash));return{get pathname(){return S()},get search(){return B()},get hash(){return T()},get state(){return l()},get key(){return""},query:dt(ie(B,(()=>ut(v()))))}}(W,z),H=[],q=ae(function(){const e=$();return e&&e.router&&e.router.submission?[e.router.submission]:[]}()),G=re((()=>"function"==typeof v.transformUrl?fe(l(),v.transformUrl(K.pathname)):fe(l(),K.pathname))),J=dt((()=>{const e=G(),l={};for(let d=0;d<e.length;d++)Object.assign(l,e[d].params);return l})),te={pattern:O,path:()=>O,outlet:()=>null,resolvePath:e=>pe(O,e)};return ce(ie(S,(e=>((e,l)=>{l.value===W()&&l.state===z()||(void 0===D&&P(!0),Vc=e,D=l,be((()=>{D===l&&(j(D.value),Q(D.state))})).finally((()=>{D===l&&Ee((()=>{Vc=void 0,P(!1),D=void 0}))})))})("native",e)),{defer:!0})),{base:te,location:K,params:J,isRouting:F,renderPath:x,parsePath:k,navigatorFactory:function(e){return e=e||ee(Wc)||te,(l,d)=>function(e,l,d){me((()=>{if("number"==typeof l)return void(l&&(T.go?T.go(l):console.warn("Router integration does not support relative routing")));const v=!l||"?"===l[0],{replace:k,resolve:x,scroll:U,state:O}={replace:!1,resolve:!v,scroll:!0,...d};let F;const P=x?e.resolvePath(l):pe(v&&(F=S().value)&&F.split("?")[0]||"",l);if(void 0===P)throw new Error(`Path '${l}' is not a routable path`);if(H.length>=100)throw new Error("Too many redirects");if(P!==W()||O!==z()){const e=$();e&&(e.response={status:302,headers:new Headers({Location:P})}),B({value:P,replace:k,scroll:U,state:O})}}))}(e,l,d)},matches:G,beforeLeave:U,preloadRoute:function(e,v={}){const S=fe(l(),e.pathname),B=Vc;Vc="preload";for(let l in S){const{route:B,params:T}=S[l];B.component&&B.component.preload&&B.component.preload();const{preload:k}=B;v.preloadData&&k&&he(d(),(()=>k({params:T,location:{pathname:e.pathname,search:e.search,hash:e.hash,query:ut(e),state:null,key:""},intent:"preload"})))}Vc=B},singleFlight:void 0===v.singleFlight||v.singleFlight,submissions:q}}function wn(e,l,d,v){const{base:S,location:B,params:T}=e,{pattern:k,component:x,preload:U}=v().route,O=re((()=>v().path));x&&x.preload&&x.preload();const F=U?U({params:T,location:B,intent:Vc||"initial"}):void 0;return{parent:l,pattern:k,path:O,outlet:()=>x?K(x,{params:T,location:B,data:F,get children(){return d()}}):d(),resolvePath:e=>pe(S.path(),e,O())}}const yt=e=>l=>{const{base:d}=l,v=te((()=>l.children)),S=re((()=>wt(v(),l.base||"")));let B;const T=gn(e,S,(()=>B),{base:d,singleFlight:l.singleFlight,transformUrl:l.transformUrl});return e.create&&e.create(T),K(Dc.Provider,{value:T,get children(){return K(yn,{routerState:T,get root(){return l.root},get preload(){return l.rootPreload||l.rootLoad},get children(){return[(B=ne())&&null,K(pn,{routerState:T,get branches(){return S()}})]}})}})};function yn(e){const l=e.routerState.location,d=e.routerState.params,v=re((()=>e.preload&&me((()=>{e.preload({params:d,location:l,intent:Vc||"initial"})}))));return K(oe,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:S=>K(S,{params:d,location:l,get data(){return v()},get children(){return e.children}})})}function pn(e){{const l=$();if(l&&l.router&&l.router.dataOnly)return void function(e,l,d){const v=new URL(e.request.url),S=fe(d,new URL(e.router.previousUrl||e.request.url).pathname),B=fe(d,v.pathname);for(let d=0;d<B.length;d++){(!S[d]||B[d].route!==S[d].route)&&(e.router.dataOnly=!0);const{route:v,params:T}=B[d];v.preload&&v.preload({params:T,location:l.location,intent:"preload"})}}(l,e.routerState,e.branches);l&&((l.router||(l.router={})).matches||(l.router.matches=e.routerState.matches().map((({route:e,path:l,params:d})=>({path:e.originalPath,pattern:e.pattern,match:l,params:d,info:e.info})))))}const l=[];let d;const v=re(ie(e.routerState.matches,((S,B,T)=>{let k=B&&S.length===B.length;const x=[];for(let d=0,U=S.length;d<U;d++){const U=B&&B[d],O=S[d];T&&U&&O.route.key===U.route.key?x[d]=T[d]:(k=!1,l[d]&&l[d](),ge((S=>{l[d]=S,x[d]=wn(e.routerState,x[d-1]||e.routerState.base,Be((()=>v()[d+1])),(()=>e.routerState.matches()[d]))})))}return l.splice(S.length).forEach((e=>e())),T&&k?T:(d=x[0],x)})));return Be((()=>v()&&d))()}const Be=e=>()=>K(oe,{get when(){return e()},keyed:!0,children:e=>K(Wc.Provider,{value:e,get children(){return e.outlet()}})});function Tn(e){const l=new URL(e);return l.pathname+l.search}function Ln(e){return function(e){let l;const d={value:e.url||(l=$())&&Tn(l.request.url)||""};return yt({signal:[()=>d,e=>Object.assign(d,e)]})(e)}(e)}var jc={exports:{}};!function(e){var l=Object.prototype.hasOwnProperty,d="~";function r(){}function o(e,l,d){this.fn=e,this.context=l,this.once=d||!1}function s(e,l,v,S,B){if("function"!=typeof v)throw new TypeError("The listener must be a function");var T=new o(v,S||e,B),k=d?d+l:l;return e._events[k]?e._events[k].fn?e._events[k]=[e._events[k],T]:e._events[k].push(T):(e._events[k]=T,e._eventsCount++),e}function i(e,l){0==--e._eventsCount?e._events=new r:delete e._events[l]}function c(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(d=!1)),c.prototype.eventNames=function(){var e,v,S=[];if(0===this._eventsCount)return S;for(v in e=this._events)l.call(e,v)&&S.push(d?v.slice(1):v);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(e)):S},c.prototype.listeners=function(e){var l=d?d+e:e,v=this._events[l];if(!v)return[];if(v.fn)return[v.fn];for(var S=0,B=v.length,T=new Array(B);S<B;S++)T[S]=v[S].fn;return T},c.prototype.listenerCount=function(e){var l=d?d+e:e,v=this._events[l];return v?v.fn?1:v.length:0},c.prototype.emit=function(e,l,v,S,B,T){var k=d?d+e:e;if(!this._events[k])return!1;var x,U,O=this._events[k],F=arguments.length;if(O.fn){switch(O.once&&this.removeListener(e,O.fn,void 0,!0),F){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,l),!0;case 3:return O.fn.call(O.context,l,v),!0;case 4:return O.fn.call(O.context,l,v,S),!0;case 5:return O.fn.call(O.context,l,v,S,B),!0;case 6:return O.fn.call(O.context,l,v,S,B,T),!0}for(U=1,x=new Array(F-1);U<F;U++)x[U-1]=arguments[U];O.fn.apply(O.context,x)}else{var P,D=O.length;for(U=0;U<D;U++)switch(O[U].once&&this.removeListener(e,O[U].fn,void 0,!0),F){case 1:O[U].fn.call(O[U].context);break;case 2:O[U].fn.call(O[U].context,l);break;case 3:O[U].fn.call(O[U].context,l,v);break;case 4:O[U].fn.call(O[U].context,l,v,S);break;default:if(!x)for(P=1,x=new Array(F-1);P<F;P++)x[P-1]=arguments[P];O[U].fn.apply(O[U].context,x)}}return!0},c.prototype.on=function(e,l,d){return s(this,e,l,d,!1)},c.prototype.once=function(e,l,d){return s(this,e,l,d,!0)},c.prototype.removeListener=function(e,l,v,S){var B=d?d+e:e;if(!this._events[B])return this;if(!l)return i(this,B),this;var T=this._events[B];if(T.fn)T.fn===l&&(!S||T.once)&&(!v||T.context===v)&&i(this,B);else{for(var k=0,x=[],U=T.length;k<U;k++)(T[k].fn!==l||S&&!T[k].once||v&&T[k].context!==v)&&x.push(T[k]);x.length?this._events[B]=1===x.length?x[0]:x:i(this,B)}return this},c.prototype.removeAllListeners=function(e){var l;return e?(l=d?d+e:e,this._events[l]&&i(this,l)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=d,c.EventEmitter=c,e.exports=c}(jc);const zc=(Gc=jc.exports)&&Gc.__esModule&&Object.prototype.hasOwnProperty.call(Gc,"default")?Gc.default:Gc,Zc="solana:signAndSendTransaction",Qc="solana:signMessage",Kc="solana:signTransaction",Hc="standard:connect",qc="standard:events";var Gc;const Yc="Mobile Wallet Adapter";function Nt(e){return!(e.features||e.chains||!e.accounts)}function Yn(e){console.log("dispatchConnect: connecting to: ",{payload:e});const l=new CustomEvent(Jc.CONNECT,{detail:e});window.dispatchEvent(l)}function Se(e){const l=new CustomEvent(Jc.CONNECTING,{detail:e});window.dispatchEvent(l)}function Bn(){console.log("dispatchDisconnect");const e=new CustomEvent(Jc.DISCONNECT);window.dispatchEvent(e)}const Jc={CONNECT:"unified:connect",DISCONNECT:"unified:disconnect",CONNECTING:"unified:connecting",WALLET_CHANGED:"unified:wallet-changed",AVAILABLE_WALLETS_CHANGED:"unified:available-wallets-changed"};var $c;let Xc;const eu=new Set,tu={};function Ke(){if(Xc||(Xc=Object.freeze({register:He,get:Zn,on:Fn}),1))return Xc;const e=Object.freeze({register:He});try{window.addEventListener("wallet-standard:register-wallet",(({detail:l})=>l(e)))}catch(e){console.error("wallet-standard:register-wallet event listener could not be added\n",e)}try{window.dispatchEvent(new Vn(e))}catch(e){console.error("wallet-standard:app-ready event could not be dispatched\n",e)}return Xc}function He(...e){return(e=e.filter((e=>!eu.has(e)))).length?(e.forEach((e=>eu.add(e))),tu.register?.forEach((l=>Ge((()=>l(...e))))),function(){e.forEach((e=>eu.delete(e))),tu.unregister?.forEach((l=>Ge((()=>l(...e)))))}):()=>{}}function Zn(){return[...eu]}function Fn(e,l){return tu[e]?.push(l)||(tu[e]=[l]),function(){tu[e]=tu[e]?.filter((e=>l!==e))}}function Ge(e){try{e()}catch(e){console.error(e)}}class Vn extends Event{constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),$c.set(this,void 0),function(e,l,d,v,S){if("function"==typeof l?e!==l||!S:!l.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");l.set(e,d)}(this,$c,e)}get detail(){return function(e,l,d,v){if("a"===d&&!v)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof l?e!==l||!v:!l.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===d?v:"a"===d?v.call(e):v?v.value:l.get(e)}(this,$c,"f")}get type(){return"wallet-standard:app-ready"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}function Ze(e,l,d){if(l<2)throw new Error(`convertRadix: wrong from=${l}, base cannot be less than 2`);if(d<2)throw new Error(`convertRadix: wrong to=${d}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let v=0;const S=[],B=Array.from(e);for(B.forEach((e=>{if(e<0||e>=l)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,T=!0;for(let S=v;S<B.length;S++){const k=B[S],x=l*e+k;if(!Number.isSafeInteger(x)||l*e/l!==e||x-k!=l*e)throw new Error("convertRadix: carry overflow");e=x%d;const U=Math.floor(x/d);if(B[S]=U,!Number.isSafeInteger(U)||U*d+e!==x)throw new Error("convertRadix: carry overflow");T&&(U?T=!1:v=S)}if(S.push(e),T)break}for(let l=0;l<e.length-1&&0===e[l];l++)S.push(0);return S.reverse()}function er(e){return{encode:l=>{if(!function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}(l))throw new Error("radix.encode input should be Uint8Array");return Ze(Array.from(l),256,e)},decode:l=>{if(!Array.isArray(l)||l.length&&"number"!=typeof l[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(Ze(l,e,256))}}}$c=new WeakMap;const ru=(e=>function(...e){const t=e=>e,n=(e,l)=>d=>e(l(d)),l=e.map((e=>e.encode)).reduceRight(n,t),d=e.map((e=>e.decode)).reduce(n,t);return{encode:l,decode:d}}(er(58),function(e){return{encode:l=>{if(!Array.isArray(l)||l.length&&"number"!=typeof l[0])throw new Error("alphabet.encode input should be an array of numbers");return l.map((l=>{if(l<0||l>=e.length)throw new Error(`Digit index outside alphabet: ${l} (alphabet: ${e.length})`);return e[l]}))},decode:l=>{if(!Array.isArray(l)||l.length&&"string"!=typeof l[0])throw new Error("alphabet.decode input should be array of strings");return l.map((l=>{if("string"!=typeof l)throw new Error(`alphabet.decode: not string element=${l}`);const d=e.indexOf(l);if(-1===d)throw new Error(`Unknown letter: "${l}". Allowed: ${e}`);return d}))}}}(e),function(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:l=>{if(!Array.isArray(l)||l.length&&"string"!=typeof l[0])throw new Error("join.encode input should be array of strings");for(let e of l)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return l.join(e)},decode:l=>{if("string"!=typeof l)throw new Error("join.decode input should be string");return l.split(e)}}}("")))("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),nu={WALLET_NAME:"unified:connected_wallet_name"};function vt(e){return"mainnet-beta"===e?"mainnet":e}function or({env:e,disconnectOnAccountChange:l,additionalWallets:d=[]}){const v=atom(X(d?.map((e=>({type:"custom",wallet:e})))));onSet(v,(async({newValue:e})=>{!function(e){const l=new CustomEvent(Jc.AVAILABLE_WALLETS_CHANGED,{detail:e});window.dispatchEvent(l)}({wallets:Object.values(e)});const l=T.get(),d=U.get();if(l||d)return;const v=function(e,l){try{const l=localStorage.getItem(e);return l?JSON.parse(l):void 0}catch(e){}return l}(nu.WALLET_NAME);v&&await Y(v)}));const S=computed(v,(e=>Object.values(e))),B=atom();onSet(B,(({newValue:e})=>{!function(e){console.log("dispatchWalletChanged: wallet changed: ",{payload:e});const l=new CustomEvent(Jc.WALLET_CHANGED,{detail:e});window.dispatchEvent(l)}({wallet:e})}));const T=computed(B,(e=>!!e)),k=computed([B,v],((e,l)=>{if(e&&e.info)return l[e.info.name]})),x=atom(e??"mainnet-beta");onSet(x,(({newValue:e})=>{console.log("new env value: ",{newValue:e})}));const U=atom(!1);onSet(U,(({newValue:e})=>{Se({connecting:e})}));const O=atom(!1);function u(e,l){if(!function(e){return Nt(e)&&e.accounts.length>0}(e))return;const d=e.accounts[0];if(!d)return void console.error("onConnect: THIS CHECK SHOULD NEVER OCCUR");const v={type:"standard",info:{name:l.name,icon:l.icon,account:d,pubKey:ru.encode(d.publicKey)}};B.set(v)}function g(e){(function(e){return Nt(e)&&0===e.accounts.length})(e)&&N()}function y(e){(e=e||k.get())&&"standard"===e.type&&e.wallet.features["standard:events"].on("change",(l=>M(e.wallet,l)))}async function N(e){if(function(e,l){try{null==l?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(l))}catch(e){}}(nu.WALLET_NAME,e),!e)return void B.set(void 0);if(y(),U.get()||O.get())throw new Error("connect: failed to connect, already connecting/disconnecting");const l=S.get();if(l.some((e=>"ios-webview"===e.type))){const d=l.find((l=>l.wallet.name===e));if(!d||"ios-webview"!==d.type)throw new Error(`connect: failed to connect, requested wallet ${e} has not been hardcoded!`);const v=d.wallet;if(!v.deepUrl)return void window.open(v.url,"_blank");const S=v.deepUrl(window.location);return void(window.location.href=S)}const d=l.find((l=>l.wallet.name===e));if(!d||"ios-webview"===d.type)throw new Error(`updateWallet: cannot connect to wallet '${e}', no wallet info found!`);try{U.set(!0),Se({connecting:!0});const l="custom"===d.type?await async function(e){const l=v.get()[e];if(!l||"custom"!==l.type)return void console.error("connectCustomWallet: failed, missing/invalid walletInfo: ",{walletInfo:l});const d=l.wallet;return await d.connect(),{type:"custom",info:d}}(e):"mwa"===d.type?await async function(e){if(e!==Yc)throw new Error(`connectMwa: wallet with name: ${e} is not mobile wallet adapter!`);const l=v.get()[e];if(!l||"mwa"!==l.type)return void console.error("connectMwa: failed, missing/invalid walletInfo: ",{walletInfo:l});const d=await l.wallet.signIn();return{type:"mwa",info:{name:l.wallet.name,icon:l.wallet.icon,account:d.account,pubKey:ru.encode(d.account.publicKey)}}}(e):await async function(e){const l=v.get()?.[e];if(!l)throw new Error(`connectStandardWallet: wallet with name: ${e} does not exist!`);if("standard"!==l.type)throw new Error("`connectStandardWallet: cannot connect to non-standard wallet");if(!("standard:connect"in l.wallet.features))throw new Error("connectStandardWallet: standard wallet does NOT have standard:connect feature enabled!");const d=await l.wallet.features["standard:connect"].connect();if(0===d.accounts.length)throw new Error("connectStandardWallet: no accounts available!");const S=d.accounts[0];if(!S)throw new Error("connectStandardWallet: account failed to connect!");return{type:"standard",info:{name:e,icon:l.wallet.icon,account:S,pubKey:ru.encode(S.publicKey)}}}(e);if(!l)throw new Error("connect: failed to connect, missing response after connecting wallet");B.set(l)}catch(e){console.error("failed to connect, error occurred connecting: ",{error:e}),N()}finally{U.set(!1),Se({connecting:!1})}}async function p(){if(O.get())return;const e=k.get();if(!e||"ios-webview"===e.type)return console.error("disconnect: resetting wallet since cannot disconnect from nonexistent adapter: ",e),void N();try{if(O.set(!0),"custom"==e.type||"mwa"===e.type)await e.wallet.disconnect();else{const l=e.wallet;"standard:disconnect"in l.features&&await l.features["standard:disconnect"].disconnect()}}finally{O.set(!1),N()}}async function M(e,l){console.log("standard event change captured: ",{name:e.name,accounts:l.accounts});const d=k.get()?.wallet.name;if(!d||d!==e.name)return;const B=l.accounts&&l.accounts[0];if(console.log("standard wallet change detected: ",{changes:l}),!B)return void g(l);u(l,{name:e.name,accounts:e.accounts,icon:e.icon,chains:e.chains,version:e.version,features:e.features});const T=C().map((e=>({type:"standard",wallet:e})));v.set(X([...S.get(),...T]))}async function E(e){const l=e;console.log("detected connect event to wallet: ",l.detail.wallet),await Y(l.detail.wallet)}async function I(e){console.log("detected disconnect event "),await p()}function C(){const{get:e}=Ke();return e().filter((e=>function(e){return Hc in e.features&&qc in e.features&&(Zc in e.features||Kc in e.features)}(e)))}function R(){return C().map((e=>({type:"standard",wallet:e})))}async function Y(e){if(k.get()?.wallet.name===e)return void console.error("adapter already connected");const l=k.get();l&&(console.error("another wallet connected, disconnecting: ",{_wallet:l}),await p()),N(e)}return{$wallets:S,$walletsMap:v,$connectedAccount:B,$isConnected:T,$wallet:k,$env:x,$connecting:U,$disconnecting:O,initOnMount:function(){const e=(console.log("onMountClearAdapterEventListeners"),window.addEventListener("beforeunload",(()=>y())),()=>{window.removeEventListener("beforeunload",(()=>y()))});window.addEventListener(Jc.CONNECT,E),window.addEventListener(Jc.DISCONNECT,I);const l=function(){const e=R();e.forEach((e=>{"standard"===e.type&&e.wallet.features["standard:events"].on("change",(async l=>{console.log({changes:l}),await M(e.wallet,l)}))})),v.set(X([...S.get(),...e]));const w=()=>{console.log("addWallet: triggered by on('register') event");const e=R(),l=S.get(),d=l.map((e=>e.wallet.name)),B=e.filter((e=>!d.includes(e.wallet.name)));B.forEach((e=>{"standard"===e.type&&e.wallet.features["standard:events"].on("change",(async l=>{console.log({changes:l}),await M(e.wallet,l)}))})),v.set(X([...l,...B]))},{on:l}=Ke(),d=l("register",w),B=l("unregister",w);return()=>{d(),B()}}();return async function(){}(),()=>{e(),l(),window.removeEventListener(Jc.CONNECT,E),window.removeEventListener(Jc.DISCONNECT,I)}},signMessage:async function(e){const l=B.get(),d=k.get();if(!l||!d)throw new Error("signMessage failed, missing adapter/public key!");if("ios-webview"===d.type)throw new Error("solana:signMessage NOT found since wallet is not standard wallet");if("custom"===l.type){if(!("signMessage"in l.info))throw new Error("solana:signMessage NOT supported by custom wallet");return await l.info.signMessage(e)}const v=l.info?.account;if(!v)throw new Error("solana:signMessage NOT found in standard wallet features");if("mwa"===d.type)throw new Error("sign message NOT implemented on mwa YET");if("standard"!==d.type)throw new Error("solana:signMessage NOT found in custom wallet features");if(!(Qc in d.wallet.features))throw new Error("solana:signMessage NOT found in standard wallet features");const S=(await d.wallet.features[Qc].signMessage({account:v,message:e}))[0];if(!S)throw new Error("failed to sign message, missing sign message output");return S.signature}}}function X(e){return e.reduce(((e,l)=>{const d=l.wallet.name;return e[d]||(e[d]=l),e}),{})}class V extends Error{constructor(e,l){super(e),this.error=l}}class Le extends V{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class we extends V{constructor(){super(...arguments),this.name="WalletConnectionError"}}class sr extends V{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class ir extends V{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class Et extends V{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class le extends V{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class ue extends V{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class ar extends V{constructor(){super(...arguments),this.name="WalletSignMessageError"}}var ou;!function(e){e.Installed="Installed",e.NotDetected="NotDetected",e.Loadable="Loadable",e.Unsupported="Unsupported"}(ou||(ou={}));class cr extends zc{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,l,d={}){const v=this.publicKey;if(!v)throw new Et;return e.feePayer=e.feePayer||v,e.recentBlockhash=e.recentBlockhash||(await l.getLatestBlockhash({commitment:d.preflightCommitment,minContextSlot:d.minContextSlot})).blockhash,e}}function Ve(e){return"version"in e}class lr extends cr{async sendTransaction(e,l,d={}){let v=!0;try{if(Ve(e)){if(!this.supportedTransactionVersions)throw new le("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new le(`Sending transaction version ${e.version} isn't supported by this wallet`);try{const v=(e=await this.signTransaction(e)).serialize();return await l.sendRawTransaction(v,d)}catch(e){throw e instanceof ue?(v=!1,e):new le(e?.message,e)}}else try{const{signers:v,...S}=d;e=await this.prepareTransaction(e,l,S),v?.length&&e.partialSign(...v);const B=(e=await this.signTransaction(e)).serialize();return await l.sendRawTransaction(B,S)}catch(e){throw e instanceof ue?(v=!1,e):new le(e?.message,e)}}catch(e){throw v&&this.emit("error",e),e}}async signAllTransactions(e){for(const l of e)if(Ve(l)){if(!this.supportedTransactionVersions)throw new ue("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(l.version))throw new ue(`Signing transaction version ${l.version} isn't supported by this wallet`)}const l=[];for(const d of e)l.push(await this.signTransaction(d));return l}}class ur extends lr{}class dr extends ur{}const iu={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Z extends Error{constructor(...e){const[l,d,v]=e;super(d),this.code=l,this.data=v,this.name="SolanaMobileWalletAdapterError"}}class Tt extends Error{constructor(...e){const[l,d,v,S]=e;super(v),this.code=d,this.data=S,this.jsonRpcMessageId=l,this.name="SolanaMobileWalletAdapterProtocolError"}}function _(e,l,d,v){return new(d||(d=Promise))((function(l,S){function c(e){try{a(v.next(e))}catch(e){S(e)}}function f(e){try{a(v.throw(e))}catch(e){S(e)}}function a(e){e.done?l(e.value):function(e){return e instanceof d?e:new d((function(l){l(e)}))}(e.value).then(c,f)}a((v=v.apply(e,[])).next())}))}function yr(e){return function(e){return window.btoa(e)}(function(e){return function(e){let l=`${e.domain} wants you to sign in with your Solana account:\n`;l+=`${e.address}`,e.statement&&(l+=`\n\n${e.statement}`);const d=[];if(e.uri&&d.push(`URI: ${e.uri}`),e.version&&d.push(`Version: ${e.version}`),e.chainId&&d.push(`Chain ID: ${e.chainId}`),e.nonce&&d.push(`Nonce: ${e.nonce}`),e.issuedAt&&d.push(`Issued At: ${e.issuedAt}`),e.expirationTime&&d.push(`Expiration Time: ${e.expirationTime}`),e.notBefore&&d.push(`Not Before: ${e.notBefore}`),e.requestId&&d.push(`Request ID: ${e.requestId}`),e.resources){d.push("Resources:");for(const l of e.resources)d.push(`- ${l}`)}return d.length&&(l+=`\n\n${d.join("\n")}`),l}(e)}(e))}const su="solana:signTransactions",au="solana:cloneAuthorization";function mr(e,l){return new Proxy({},{get:(d,v)=>(null==d[v]&&(d[v]=function(d){return _(this,0,void 0,(function*(){const{method:S,params:B}=function(e,l,d){let v=l,S=e.toString().replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`)).toLowerCase();switch(e){case"authorize":{let{chain:e}=v;if("legacy"===d){switch(e){case"solana:testnet":e="testnet";break;case"solana:devnet":e="devnet";break;case"solana:mainnet":e="mainnet-beta";break;default:e=v.cluster}v.cluster=e}else{switch(e){case"testnet":case"devnet":e=`solana:${e}`;break;case"mainnet-beta":e="solana:mainnet"}v.chain=e}}case"reauthorize":{const{auth_token:e,identity:l}=v;if(e)if("legacy"===d)S="reauthorize",v={auth_token:e,identity:l};else S="authorize";break}}return{method:S,params:v}}(v,d,e),T=yield l(S,B);return"authorize"===S&&B.sign_in_payload&&!T.sign_in_result&&(T.sign_in_result=yield function(e,l,d){var v;return _(this,0,void 0,(function*(){const S=null!==(v=e.domain)&&void 0!==v?v:window.location.host,B=l.accounts[0].address,T=yr(Object.assign(Object.assign({},e),{domain:S,address:B}));return{address:B,signed_message:T,signature:(yield d("sign_messages",{addresses:[B],payloads:[T]})).signed_payloads[0].slice(T.length)}}))}(B.sign_in_payload,T,l)),function(e,l,d){if("getCapabilities"===e){const e=l;switch(d){case"legacy":{const l=[su];return!0===e.supports_clone_authorization&&l.push(au),Object.assign(Object.assign({},e),{features:l})}case"v1":return Object.assign(Object.assign({},e),{supports_sign_and_send_transactions:!0,supports_clone_authorization:e.features.includes(au)})}}return l}(v,T,e)}))}),d[v]),defineProperty:()=>!1,deleteProperty:()=>!1})}const cu=4;const uu=12,lu=65;function Er(e,l,d){return _(this,0,void 0,(function*(){const v=function(e){if(e>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const l=new ArrayBuffer(cu);return new DataView(l).setUint32(0,e,!1),new Uint8Array(l)}(l),S=new Uint8Array(uu);crypto.getRandomValues(S);const B=yield crypto.subtle.encrypt(bt(v,S),d,(new TextEncoder).encode(e)),T=new Uint8Array(v.byteLength+S.byteLength+B.byteLength);return T.set(new Uint8Array(v),0),T.set(new Uint8Array(S),v.byteLength),T.set(new Uint8Array(B),v.byteLength+S.byteLength),T}))}function St(e,l){return _(this,0,void 0,(function*(){const d=e.slice(0,cu),v=e.slice(cu,cu+uu),S=e.slice(cu+uu),B=yield crypto.subtle.decrypt(bt(d,v),l,S);return(void 0===du&&(du=new TextDecoder("utf-8")),du).decode(B)}))}function bt(e,l){return{additionalData:e,iv:l,name:"AES-GCM",tagLength:128}}let du;function Lt(e){if(e<49152||e>65535)throw new Z(iu.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${e} given.`,{port:e});return e}const hu="solana-wallet";function Je(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function xr(e,l,d,v=["v1"]){return _(this,0,void 0,(function*(){const S=Lt(l),B=function(e){let l="";const d=new Uint8Array(e),v=d.byteLength;for(let e=0;e<v;e++)l+=String.fromCharCode(d[e]);return window.btoa(l)}(yield crypto.subtle.exportKey("raw",e)),T=function(e,l){let d=null;if(l){try{d=new URL(l)}catch{}if("https:"!==d?.protocol)throw new Z(iu.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}d||(d=new URL(`${hu}:/`));const v=e.startsWith("/")?e:[...Je(d.pathname),...Je(e)].join("/");return new URL(v,d)}("v1/associate/local",d);return T.searchParams.set("association",function(e){return e.replace(/[/+=]/g,(e=>({"/":"_","+":"-","=":"."}[e])))}(B)),T.searchParams.set("port",`${S}`),v.forEach((e=>{T.searchParams.set("v",e)})),T}))}const fu={Firefox:0,Other:1};let pu=null;function Pr(e,l){return _(this,0,void 0,(function*(){const d=Lt(49152+Math.floor(16384*Math.random())),v=yield xr(e,d,l);if("https:"===v.protocol)window.location.assign(v);else try{switch(-1!==navigator.userAgent.indexOf("Firefox/")?fu.Firefox:fu.Other){case fu.Firefox:!function(e){null==pu&&(pu=document.createElement("iframe"),pu.style.display="none",document.body.appendChild(pu)),pu.contentWindow.location.href=e.toString()}(v);break;case fu.Other:{const e=new Promise(((e,l)=>{function n(){clearTimeout(d),window.removeEventListener("blur",r)}function r(){n(),e()}window.addEventListener("blur",r);const d=setTimeout((()=>{n(),l()}),2e3)}));window.location.assign(v),yield e;break}}}catch{throw new Z(iu.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}return d}))}const mu={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},yu="com.solana.mobilewalletadapter.v1";function Xe(e){return new DataView(e).getUint32(0,!1)}function Kr(e,l){return _(this,0,void 0,(function*(){!function(){throw new Z(iu.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}();const d=yield function(){return _(this,0,void 0,(function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])}))}(),v=yield Pr(d.publicKey,l?.baseUri),S=`ws://localhost:${v}/solana-wallet`;let B;const T=(()=>{const e=[...mu.retryDelayScheduleMs];return()=>e.length>1?e.shift():e[0]})();let k=1,x=0,U={__type:"disconnected"};return new Promise(((l,O)=>{let F;const P={},A=()=>_(this,0,void 0,(function*(){if("connecting"!==U.__type)return void console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${U.__type}\`.`);const{associationKeypair:e}=U;F.removeEventListener("open",A);const l=yield function(){return _(this,0,void 0,(function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])}))}();F.send(yield function(e,l){return _(this,0,void 0,(function*(){const d=yield crypto.subtle.exportKey("raw",e),v=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},l,d),S=new Uint8Array(d.byteLength+v.byteLength);return S.set(new Uint8Array(d),0),S.set(new Uint8Array(v),d.byteLength),S}))}(l.publicKey,e.privateKey)),U={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:l.privateKey}})),m=e=>{e.wasClean?U={__type:"disconnected"}:O(new Z(iu.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${e.code}: ${e.reason}).`,{closeEvent:e})),D()},h=e=>_(this,0,void 0,(function*(){D(),Date.now()-B>=mu.timeoutMs?O(new Z(iu.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket on port ${v}.`)):(yield new Promise((e=>{const l=T();W=window.setTimeout(e,l)})),b())})),N=d=>_(this,0,void 0,(function*(){const v=yield d.data.arrayBuffer();switch(U.__type){case"connected":try{const e=Xe(v.slice(0,cu));if(e!==x+1)throw new Error("Encrypted message has invalid sequence number");x=e;const l=yield function(e,l){return _(this,0,void 0,(function*(){const d=yield St(e,l),v=JSON.parse(d);if(Object.hasOwnProperty.call(v,"error"))throw new Tt(v.id,v.error.code,v.error.message);return v}))}(v,U.sharedSecret),d=P[l.id];delete P[l.id],d.resolve(l.result)}catch(e){if(!(e instanceof Tt))throw e;{const l=P[e.jsonRpcMessageId];delete P[e.jsonRpcMessageId],l.reject(e)}}break;case"hello_req_sent":{const d=yield function(e,l,d){return _(this,0,void 0,(function*(){const[v,S]=yield Promise.all([crypto.subtle.exportKey("raw",l),crypto.subtle.importKey("raw",e.slice(0,lu),{name:"ECDH",namedCurve:"P-256"},!1,[])]),B=yield crypto.subtle.deriveBits({name:"ECDH",public:S},d,256),T=yield crypto.subtle.importKey("raw",B,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(v),info:new Uint8Array},T,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])}))}(v,U.associationPublicKey,U.ecdhPrivateKey),S=v.slice(lu),B=0!==S.byteLength?yield _(this,0,void 0,(function*(){const e=Xe(S.slice(0,cu));if(e!==x+1)throw new Error("Encrypted message has invalid sequence number");return x=e,function(e,l){return _(this,0,void 0,(function*(){const d=yield St(e,l),v=JSON.parse(d);let S="legacy";if(Object.hasOwnProperty.call(v,"v"))switch(v.v){case 1:case"1":case"v1":S="v1";break;case"legacy":S="legacy";break;default:throw new Z(iu.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${v.v}`)}return{protocol_version:S}}))}(S,d)})):{protocol_version:"legacy"};U={__type:"connected",sharedSecret:d,sessionProperties:B};const T=mr(B.protocol_version,((e,l)=>_(this,0,void 0,(function*(){const v=k++;return F.send(yield function(e,l){return _(this,0,void 0,(function*(){return Er(JSON.stringify(e),e.id,l)}))}({id:v,jsonrpc:"2.0",method:e,params:l??{}},d)),new Promise(((l,d)=>{P[v]={resolve(v){switch(e){case"authorize":case"reauthorize":{const{wallet_uri_base:e}=v;if(null!=e)try{!function(e){let l;try{l=new URL(e)}catch{throw new Z(iu.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if("https:"!==l.protocol)throw new Z(iu.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}(e)}catch(e){return void d(e)}break}}l(v)},reject:d}}))}))));try{l(yield e(T))}catch(e){O(e)}finally{D(),F.close()}break}}}));let D,W;const b=()=>{D&&D(),U={__type:"connecting",associationKeypair:d},void 0===B&&(B=Date.now()),F=new WebSocket(S,[yu]),F.addEventListener("open",A),F.addEventListener("close",m),F.addEventListener("error",h),F.addEventListener("message",N),D=()=>{window.clearTimeout(W),F.removeEventListener("open",A),F.removeEventListener("close",m),F.removeEventListener("error",h),F.removeEventListener("message",N)}};b()}))}))}function je(e,l){var d={};for(var v in e)Object.prototype.hasOwnProperty.call(e,v)&&l.indexOf(v)<0&&(d[v]=e[v]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var S=0;for(v=Object.getOwnPropertySymbols(e);S<v.length;S++)l.indexOf(v[S])<0&&Object.prototype.propertyIsEnumerable.call(e,v[S])&&(d[v[S]]=e[v[S]])}return d}function ye(e,l,d,v){return new(d||(d=Promise))((function(l,S){function c(e){try{a(v.next(e))}catch(e){S(e)}}function f(e){try{a(v.throw(e))}catch(e){S(e)}}function a(e){e.done?l(e.value):function(e){return e instanceof d?e:new d((function(l){l(e)}))}(e.value).then(c,f)}a((v=v.apply(e,[])).next())}))}function Ot(e){return window.btoa(String.fromCharCode.call(null,...e))}function De(e){return new Uint8Array(window.atob(e).split("").map((e=>e.charCodeAt(0))))}function et(e){return Ot("version"in e?e.serialize():e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}function Hr(e){const l=e[0]*Ec+1;return"legacy"===Sc.deserializeMessageVersion(e.slice(l,e.length))?vc.from(e):Bc.deserialize(e)}function L(e,l,d,v){return new(d||(d=Promise))((function(l,S){function c(e){try{a(v.next(e))}catch(e){S(e)}}function f(e){try{a(v.throw(e))}catch(e){S(e)}}function a(e){e.done?l(e.value):function(e){return e instanceof d?e:new d((function(l){l(e)}))}(e.value).then(c,f)}a((v=v.apply(e,[])).next())}))}function Ae(e){return new Uint8Array(window.atob(e).split("").map((e=>e.charCodeAt(0))))}function tt(e){return"version"in e}class Jr extends dr{constructor(e){var l;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name="Mobile Wallet Adapter",this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=ou.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._chain=null!==(l=e.chain)&&void 0!==l?l:e.cluster,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==ou.Unsupported&&this._authorizationResultCache.get().then((e=>{e&&this.declareWalletAsInstalled()}))}get publicKey(){if(null==this._publicKey&&null!=this._selectedAddress)try{this._publicKey=function(e){const l=Ae(e);return new wc(l)}(this._selectedAddress)}catch(e){throw new ir(e instanceof Error&&e?.message||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==ou.Installed&&this.emit("readyStateChange",this._readyState=ou.Installed)}runWithGuard(e){return L(this,0,void 0,(function*(){try{return yield e()}catch(e){throw this.emit("error",e),e}}))}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return L(this,0,void 0,(function*(){return yield this.autoConnect()}))}autoConnect(){return L(this,0,void 0,(function*(){if(!this.connecting&&!this.connected)return yield this.runWithGuard((()=>L(this,0,void 0,(function*(){if(this._readyState!==ou.Installed&&this._readyState!==ou.Loadable)throw new Le;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new we(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))))}))}connect(){return L(this,0,void 0,(function*(){if(!this.connecting&&!this.connected)return yield this.runWithGuard((()=>L(this,0,void 0,(function*(){if(this._readyState!==ou.Installed&&this._readyState!==ou.Loadable)throw new Le;this._connecting=!0;try{yield this.performAuthorization()}catch(e){throw new we(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))))}))}performAuthorization(e){return L(this,0,void 0,(function*(){try{const l=yield this._authorizationResultCache.get();return l?(this.handleAuthorizationResult(l),l):yield this.transact((l=>L(this,0,void 0,(function*(){const d=yield l.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:e});return Promise.all([this._authorizationResultCache.set(d),this.handleAuthorizationResult(d)]),d}))))}catch(e){throw new we(e instanceof Error&&e.message||"Unknown error",e)}}))}handleAuthorizationResult(e){var l;return L(this,0,void 0,(function*(){const d=null==this._authorizationResult||(null===(l=this._authorizationResult)||void 0===l?void 0:l.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some(((l,d)=>l.address!==e.accounts[d].address));if(this._authorizationResult=e,this.declareWalletAsInstalled(),d){const l=yield this._addressSelector.select(e.accounts.map((({address:e})=>e)));l!==this._selectedAddress&&(this._selectedAddress=l,delete this._publicKey,this.emit("connect",this.publicKey))}}))}performReauthorization(e,l){return L(this,0,void 0,(function*(){try{const d=yield e.authorize({auth_token:l,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(d),this.handleAuthorizationResult(d)])}catch(e){throw this.disconnect(),new sr(e instanceof Error&&e?.message||"Unknown error",e)}}))}disconnect(){return L(this,0,void 0,(function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")}))}transact(e){var l;return L(this,0,void 0,(function*(){const d=null===(l=this._authorizationResult)||void 0===l?void 0:l.wallet_uri_base,v=d?{baseUri:d}:void 0,S=this._connectionGeneration;try{return yield function(e,l){return ye(this,0,void 0,(function*(){return yield Kr((l=>{const d=new Proxy({},{get(e,d){if(null==e[d])switch(d){case"signAndSendTransactions":e[d]=function(e){var{minContextSlot:d,commitment:v,skipPreflight:S,maxRetries:B,waitForCommitmentToSendNextTransaction:T,transactions:k}=e,x=je(e,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return ye(this,0,void 0,(function*(){const e=k.map(et),U={min_context_slot:d,commitment:v,skip_preflight:S,max_retries:B,wait_for_commitment_to_send_next_transaction:T},{signatures:O}=yield l.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},x),Object.values(U).some((e=>null!=e))?{options:U}:null),{payloads:e}));return O.map(De).map(Uc.encode)}))};break;case"signMessages":e[d]=function(e){var{payloads:d}=e,v=je(e,["payloads"]);return ye(this,0,void 0,(function*(){const e=d.map(Ot),{signed_payloads:S}=yield l.signMessages(Object.assign(Object.assign({},v),{payloads:e}));return S.map(De)}))};break;case"signTransactions":e[d]=function(e){var{transactions:d}=e,v=je(e,["transactions"]);return ye(this,0,void 0,(function*(){const e=d.map(et),{signed_payloads:S}=yield l.signTransactions(Object.assign(Object.assign({},v),{payloads:e}));return S.map(De).map(Hr)}))};break;default:e[d]=l[d]}return e[d]},defineProperty:()=>!1,deleteProperty:()=>!1});return e(d)}),l)}))}(e,v)}catch(e){throw this._connectionGeneration!==S&&(yield new Promise((()=>{}))),e instanceof Error&&"SolanaMobileWalletAdapterError"===e.name&&"ERROR_WALLET_NOT_FOUND"===e.code&&(yield this._onWalletNotFound(this)),e}}))}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new Et;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return L(this,0,void 0,(function*(){const{authToken:l}=this.assertIsAuthorized();try{return yield this.transact((d=>L(this,0,void 0,(function*(){return yield this.performReauthorization(d,l),yield d.signTransactions({transactions:e})}))))}catch(e){throw new ue(e?.message,e)}}))}sendTransaction(e,l,d){return L(this,0,void 0,(function*(){return yield this.runWithGuard((()=>L(this,0,void 0,(function*(){const{authToken:v}=this.assertIsAuthorized(),S=d?.minContextSlot;try{return yield this.transact((B=>L(this,0,void 0,(function*(){function c(){let e,v;switch(l.commitment){case"confirmed":case"finalized":case"processed":e=l.commitment;break;default:e="finalized"}switch(d?.preflightCommitment){case"confirmed":case"finalized":case"processed":v=d.preflightCommitment;break;case void 0:v=e;break;default:v="finalized"}return("finalized"===v?2:"confirmed"===v?1:0)<("finalized"===e?2:"confirmed"===e?1:0)?v:e}const[T,k,x]=yield Promise.all([B.getCapabilities(),this.performReauthorization(B,v),tt(e)?null:L(this,0,void 0,(function*(){var d;if(e.feePayer||(e.feePayer=null!==(d=this.publicKey)&&void 0!==d?d:void 0),null==e.recentBlockhash){const{blockhash:d}=yield l.getLatestBlockhash({commitment:c()});e.recentBlockhash=d}}))]);if(T.supports_sign_and_send_transactions)return(yield B.signAndSendTransactions({minContextSlot:S,transactions:[e]}))[0];{const[v]=yield B.signTransactions({transactions:[e]});if(tt(v))return yield l.sendTransaction(v);{const e=v.serialize();return yield l.sendRawTransaction(e,Object.assign(Object.assign({},d),{preflightCommitment:c()}))}}}))))}catch(e){throw new le(e?.message,e)}}))))}))}signTransaction(e){return L(this,0,void 0,(function*(){return yield this.runWithGuard((()=>L(this,0,void 0,(function*(){const[l]=yield this.performSignTransactions([e]);return l}))))}))}signAllTransactions(e){return L(this,0,void 0,(function*(){return yield this.runWithGuard((()=>L(this,0,void 0,(function*(){return yield this.performSignTransactions(e)}))))}))}signMessage(e){return L(this,0,void 0,(function*(){return yield this.runWithGuard((()=>L(this,0,void 0,(function*(){const{authToken:l,selectedAddress:d}=this.assertIsAuthorized();try{return yield this.transact((v=>L(this,0,void 0,(function*(){yield this.performReauthorization(v,l);const[S]=yield v.signMessages({addresses:[d],payloads:[e]});return S.slice(-64)}))))}catch(e){throw new ar(e?.message,e)}}))))}))}signIn(e){return L(this,0,void 0,(function*(){return yield this.runWithGuard((()=>L(this,0,void 0,(function*(){var l,d;if(this._readyState!==ou.Installed&&this._readyState!==ou.Loadable)throw new Le;this._connecting=!0;try{const v=yield this.performAuthorization(Object.assign(Object.assign({},e),{domain:null!==(l=e?.domain)&&void 0!==l?l:window.location.host}));if(!v.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const S=v.sign_in_result.address;return{account:Object.assign(Object.assign({},null!==(d=v.accounts.find((e=>e.address==S)))&&void 0!==d?d:{address:S}),{publicKey:Ae(S)}),signedMessage:Ae(v.sign_in_result.signed_message),signature:Ae(v.sign_in_result.signature)}}catch(e){throw new we(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))))}))}}const gu="SolanaMobileWalletAdapterDefaultAuthorizationCache";function Xr(){let e;try{e=window.localStorage}catch{}return{clear(){return L(this,0,void 0,(function*(){if(e)try{e.removeItem(gu)}catch{}}))},get(){return L(this,0,void 0,(function*(){if(e)try{return JSON.parse(e.getItem(gu))||void 0}catch{}}))},set(l){return L(this,0,void 0,(function*(){if(e)try{e.setItem(gu,JSON.stringify(l))}catch{}}))}}}function eo(e){return L(this,0,void 0,(function*(){}))}function ro({env:e,disconnectOnAccountChange:l,autoConnect:d,additionalWallets:v=[]}){const{$connectedAccount:S,$wallet:B,$wallets:T,$walletsMap:k,$env:x,$connecting:U,signMessage:O,initOnMount:F,$isConnected:P,$disconnecting:D}=or({env:e,disconnectOnAccountChange:l,additionalWallets:v,autoConnect:d});return{$wallets:T,$walletsMap:k,$connectedAccount:S,$isConnected:P,$wallet:B,$env:x,$connecting:U,$disconnecting:D,initOnMount:function(){const e=F(),l=function(e,l){if(e.some((({name:e})=>e===Yc)))return;const d=window.navigator?.userAgent;if(!d)return;const r=()=>{const{location:e}=globalThis;if(e)return`${e.protocol}//${e.host}`};if(function(e){return/android/i.test(e)}(d)&&!function(e){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(e)}(d)){const e=vt(l);return new Jr({addressSelector:{select(e){return L(this,0,void 0,(function*(){return e[0]}))}},appIdentity:{uri:r()},authorizationResultCache:Xr(),chain:`solana:${e}`,onWalletNotFound:eo})}}(T.get().filter((e=>"standard"===e.type)).map((e=>e.wallet)),x.get());if(l){const e={type:"mwa",wallet:l};k.set(X([...T.get(),e]))}return e},signMessage:O,signTransaction:async function(e){const l=S.get(),d=B.get();if(!l||!d)throw new Error("signTransaction failed, missing adapter/public key!");if("custom"===l.type)return await l.info.signTransaction(e);if("standard"!==d.type||"standard"!==l.type)throw new Error("solana:signTransaction NOT found since wallet is not standard wallet");const v=d.wallet;if(!(Kc in v.features))throw new Error("solana:signTransaction NOT found in standard wallet features");const T=l.info?.account;if(!T)throw new Error("solana:signTransaction account NOT found in connected standard wallet");const k=v.features[Kc],x={account:T,transaction:e.serialize({verifySignatures:!1})},U=await k.signTransaction(x);if(0===U.length||!U[0])throw new Error("failed to sign tx, missing sign tx output");return U[0].signedTransaction},signAllTransactions:async function(e){const l=S.get(),d=B.get();if(!l||!d)throw new Error("signAllTransactions failed, missing adapter/public key!");if("custom"===l.type)return await l.info.signAllTransactions(e);if("standard"!==d.type||"standard"!==l.type)throw new Error("solana:signTransaction NOT found since wallet is not standard wallet");const v=d.wallet;if(!(Kc in v.features))throw new Error("solana:signTransaction NOT found in standard wallet features");const T=l.info?.account;if(!T)throw new Error("solana:signTransaction account NOT found in connected standard wallet");const k=v.features[Kc],x=e.map((e=>({account:T,transaction:e.serialize({verifySignatures:!1})}))),U=await k.signTransaction(...x);if(0===U.length||!U[0])throw new Error("solana:signTransaction failed, missing sign all txs output");return U[0].signedTransaction},sendTransaction:async function(e,l,d){const v=S.get(),T=B.get();if(!v||!T)throw new Error("sendTransaction failed: missing adapter / public key!");if("custom"===v.type)try{return await v.info.sendTransaction(e,l,{signers:[],...d})}catch(e){console.log(`sendTransaction: custom wallet error: ${JSON.stringify(e)}`)}if("mwa"===T.type&&"mwa"===v.type)try{return await T.wallet.sendTransaction(e,l,d)}catch(e){console.log(`sendTransaction: custom wallet error: ${JSON.stringify(e)}`)}if("standard"!==T.type||"standard"!==v.type)throw new Error("solana:signAndSendTransaction NOT found since wallet is not standard wallet");const k=T.wallet;if(!(Zc in k.features))throw new Error("solana:signAndSendTransaction NOT found in standard wallet features");const U=v.info?.account;if(!U)throw new Error("solana:signAndSendTransaction account NOT found in connected standard wallet");const O={account:U,transaction:e.serialize({verifySignatures:!1}),chain:`solana:${vt(x.get())}`},F=await k.features[Zc].signAndSendTransaction(O);if(0===F.length||!F[0])throw new Error("Missing tx output from signAndSendTx from connected standard wallet!");return F[0].signature}}}const[bu,wu]=function(e,l){const d=se(l);return[l=>K(d.Provider,{value:e(l),get children(){return l.children}}),()=>ee(d)]}((e=>{const{$wallet:l,$connectedAccount:d,$connecting:v,$disconnecting:S,$isConnected:B,initOnMount:T,$env:k,$wallets:x,$walletsMap:U,signMessage:O,sendTransaction:F,signTransaction:P,signAllTransactions:D}=ro({env:e.env,autoConnect:e.autoConnect,disconnectOnAccountChange:e.disconnectOnAccountChange,localStorageKey:e.localStorageKey,additionalWallets:e.additionalWallets}),W=p(x),j=p(U),z=p(d),Q=p(B),K=p(l);return{env:p(k),connected:Q,connecting:p(v),disconnecting:p(S),localStorageKey:e.localStorageKey,connectedAccount:z,wallet:K,wallets:W,walletsByName:j,connect:Yn,disconnect:Bn,signMessage:O,sendTransaction:F,signTransaction:P,signAllTransactions:D}}));var Eu=["<unified-wallet-modal","></unified-wallet-modal>"];const vu=Object.freeze(Object.defineProperty({__proto__:null,default:function(){return K(Ln,{root:e=>[K(H,{get children(){return K(bu,{autoConnect:!0,disconnectOnAccountChange:!0,localStorageKey:"unified:wallet-storage-key",env:"mainnet-beta",additionalWallets:[new TrezorWalletAdapter,new CoinbaseWalletAdapter,new LedgerWalletAdapter,new TrustWalletAdapter],get children(){return e.children}})}}),q(Eu,G())],get children(){return K(J,{})}})}},Symbol.toStringTag,{value:"Module"}));export{Tc as T,getDefaultExportFromCjs as a,vu as b,ke as c,Zo as e,getDefaultExportFromNamespaceIfNotNamed as g,kc as l};
//# sourceMappingURL=app.mjs.map
